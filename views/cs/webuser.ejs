<!DOCTYPE html>
<html lang="en">

<head>
    <title>CHANGE_STYLE</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <!-- day picker -->
    <!-- Include jQuery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <title>Node Authentication</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
    <!-- load bootstrap css -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
    <!-- load fontawesome -->

</head>

<body onload="loaddata()">
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
                <span class="mdl-layout-title">CHANGE STYLE</span>
                <!-- <button onclick="bttest()">test</button> -->
                <!-- <p id="demo">hihii</p> -->
                <div class="mdl-layout-spacer"></div>
                <div id="sign_up" action="/login" method="post">
                    <div style="float: right;">
                        <p > Hi <%=user %> !
                            <a href="/logout" >
                                <button  class="btn-box" style="color: black;">Đăng xuất</button></a> </p>
                    </div>
                </div>
            </div>
            <div class="mdl-layout__tab-bar mdl-js-ripple-effect">
                <a href="#scroll-tab-1" class="mdl-layout__tab is-active">GROUP</a>
            </div>
        </header>
        <%- include('menucs'); %>
        <main class="mdl-layout__content">
            <section class="mdl-layout__tab-panel is-active" id="scroll-tab-1">
                <!-- Uses a header that contracts as the page scrolls down. -->
                <style>
                    .demo-layout-waterfall .mdl-layout__header-row .mdl-navigation__link:last-of-type {
                        padding-right: 0;
                    }
                </style>
                <div class="demo-layout-waterfall mdl-layout mdl-js-layout">
                    <div class="mdl-layout__content">
                        <header class="mdl-layout__header mdl-layout__header--waterfall">
                            <div class="mdl-layout__header-row" style="background-color: rgb(200, 200, 200);">
                                <div style="margin-left: -28px; font-size: 18px; margin-top: 5px;">
                                    <!-- <p id="demo"></p> -->
                                    <label for="cars">CHANGE STYLE W</label>         
                                    <select style="background-color: #7c4abe;" name="cars" id="selectweekk" onchange="selectweek()">
                                    </select>
                                </div>
                                <div class="mdl-layout__header-row" style="background-color: rgb(200, 200, 200);">
                                    <button type="button" class="btn btn-primary" id="btn_refresh" onclick="caculate_layout()">Refresh</button>
                                </div>
                                <div class="mdl-layout-spacer"></div>
                                <!-- Navigation -->
                                <div class="mdl-textfield mdl-js-textfield 
                                      mdl-textfield--floating-label mdl-textfield--align-right">
                                    <label class="mdl-button mdl-js-button mdl-button--icon">
                              
                            </label>
                                    <input placeholder="Search GROUP&TIME" type="text" class="form-control" id="id_groupcs" oninput="ctgroup()">
                                </div>
                            </div>
                            
                        </header>
                        <div class="page-content">
                            <div style="width: 100%; padding-top: 0px; margin-top: 10px;">
                                <!-- Square card -->
                                <style>
                                    #tablea {
                                        margin-top: 0px !important;
                                        font-family: Arial, Helvetica, sans-serif;
                                        border-collapse: collapse;
                                        border-radius: 15px;
                                        border: 1px solid #ffffff;
                                        overflow: scroll !important;
                                    }
                                    #tableprepare {
                                        margin-top: 0px !important;
                                        font-family: Arial, Helvetica, sans-serif;
                                        border-collapse: collapse;
                                        border-radius: 15px;
                                        border: 1px solid #ffffff;
                                        overflow: scroll !important;
                                    }
                                    #tableprepare td {
                                        text-align: center;
                                        border: 1px solid #7c4abe;
                                        height: 45px !important;
                                                                               
                                    }
                                    #tableprepare th {
                                        border: 1px solid #ddd;
                                        padding: 8px;
                                        border: 1px solid #7c4abe;
                                        height: 45px !important;

                                    }
                                    #tablea td {
                                        text-align: left;
                                        border: 1px solid #7c4abe;
                                        height: 45px !important;
                                                                               
                                    }
                                    
                                    #tablea th {
                                        border: 1px solid #ddd;
                                        padding: 8px;
                                        border: 1px solid #7c4abe;
                                        height: 45px !important;

                                    }
                                    #tbmachinesub td {
                                        text-align: left;
                                        border: 1px solid #7c4abe;
                                        height: 10px;
                                        height: 25px !important;
                                    }
                                    
                                    #tbmachinesub th {
                                        border: 1px solid #ddd;
                                        padding: 8px;
                                        border: 1px solid #7c4abe;
                                        height: 25px !important;
                                    }
                                    #tbmachineadd td {
                                        text-align: left;
                                        border: 1px solid #7c4abe;
                                        height: 25px !important;
                                    }
                                    
                                    #tbmachineadd th {
                                        border: 1px solid #ddd;
                                        padding: 8px;
                                        border: 1px solid #7c4abe;
                                        height: 25px !important;
                                    }

                                    #tablea tr:nth-child(even) {
                                        background-color: #f2f2f2;
                                    }
                                    
                                    #tablea tr:hover {
                                        background-color: #ddd;
                                    }

                                    #tablea th {
                                        height: 600px;
                                        padding-top: 12px;
                                        padding-bottom: 12px;
                                        text-align: center;
                                        background-color: #7c4abe;
                                        color: white;
                                    }
                                    .tableFixHead {
                                        overflow-y: auto;
                                        height: 600px;
                                    }
                                    .tableFixHead thead th {
                                        position: sticky;
                                        top: 0;
                                    }
                                    #tablea {
                                        border-collapse: collapse;
                                        width: 100%;
               
                                    }
                                </style>
                             
                                <div class="tableFixHead">
                                    <table id="tablea"  style="margin:auto;width: 99%;" onclick="detail_ticket()">
                                        <thead>
                                            <tr>
                                                <!-- <th style="text-align: center;" id="stt">EDIT</th> -->
                                                <!-- <th style="text-align: center;width: 50px;">STT</th> -->
                                                <th style="text-align: center;width: 100px;">GROUP</th>
                                                <th style="text-align: center;">CẤU TRÚC/SELLING</th>
                                                <th style="text-align: center;">CẤU TRÚC/SELLING</th>
                                                <th style="text-align: center;">PHÂN LOẠI</th>
                                                <th style="text-align: center;width: 150px;">THỜI GIAN CHUYỂN
                                                    <button style="background-color: #7c4abe; width: 30px;" class="glyphicon glyphicon-sort" onclick="sortTable()"></button>
                                                    <th style="text-align: center;">QUALITY_REMARK</th>
                                                    <th style="text-align: center;width: 80px;">LEADER</th>
                                            </tr>
                                        </thead>
                                        <tbody style="text-align: left;" >
                                        </tbody>
                                    </table>
                                </div>
                                
                            </div>
                        
                        </div>
                        <div class="w3-container">
                            <div style="margin-top: 20px;" id="id01" class="w3-modal">
                                <div style="width: 90%; margin-top: 20PX;" class="w3-modal-content">
                                    <div style="width: 95%;  margin: auto;" class="w3-container">
                                        <span onclick="document.getElementById('id01').style.display='none'" class="w3-button w3-display-topright">&times;</span>

                                        <div class="modal-header">

                                            <h5 class="modal-title" style="color: #7c4abe ; font-weight: bold;" id="namebox"></h5>
                                        </div>
                                        <div class="row text-center padding" style="margin-top: 5px;">
                                            <!-- <h5 style="width:500px; text-align: left ;margin-left: 25px;" id="tb2_useredit" ></h5> -->
                                            <!-- <input style="width:50px; text-align: center ;margin-left: 15px; width: 100px;" type="text" id="tb2_useredit" class="form-control" > -->
                                            <div class="col-xs-12 col-sm-6 col-md-4 ">
                                                <p class="modal-title" style="color: #7c4abe;font-weight: bold;">GROUP</p>
                                                <input aria-required="true" style=" width:150px; min-height: 10px;text-align: center; margin: auto;" type="text" id="tb2_group" class="form-control">
                                            </div>
                                            <div class="col-xs-12 col-sm-6 col-md-4 " style="display: none;">
                                                <p class="modal-title" style="color: #7c4abe;font-weight: bold;">GROUP_hide</p>
                                                <input aria-required="true" style=" width:150px; min-height: 10px;text-align: center; margin: auto;" type="text" id="tb2_group_hide" class="form-control">
                                            </div>
                                            <div class="col-xs-12 col-sm-6 col-md-4 ">
                                                <p class="modal-title" style="color: #7c4abe;font-weight: bold;">THỜI GIAN CHUYỂN</p>
                                                <input style="width:150px; min-height: 10px;text-align: center; margin: auto;" type="text" id="tb2_time" class="form-control" required>
                                            </div>
                                            <div class="col-xs-12 col-sm-6 col-md-4 " style="display: none;">
                                                <p class="modal-title" style="color: #7c4abe;font-weight: bold;">THỜI GIAN </p>
                                                <input style="width:150px; min-height: 10px;text-align: center; margin: auto;" type="text" id="tb2_time_hide" class="form-control" required>
                                            </div>
                                            <div class="col-xs-12 col-sm-6 col-md-4 ">
                                                <p class="modal-title" style="color: #7c4abe;font-weight: bold;">LEADER</p>
                                                <input style="width:150px; min-height: 10px;text-align: center; margin: auto;" type="text" id="tb2_leader" class="form-control">
                                            </div>
                                        </div>
                                        <div class="row" style="margin-top: 5px; margin-left: 5px;">
                                            <div>
                                                <p class="modal-title" style="color: #7c4abe; margin-top: 0px;font-weight: bold;">CẤU TRÚC/ SELLING</p>
                                                <select style="width:100%;" type="text" id="tb2_selling" class="form-control">
                                                    <option>IE Bổ sung</option>
                                                </select>
                                                <select style="width:100%; margin-top: 5px;" type="text" id="tb2_style" class="form-control">
                                                    <option>IE Bổ sung</option>
                                                </select>
                        
                                            </div>
                                        </div>
                                        <div style="margin-top: 20px;height: 400px; overflow-y: scroll ;">
                                            <!-- <button style="margin-top: 13px;" ;class="fun" data-toggle="collapse" data-target="#emoji">
                                            Machine
                                        </button>
                                            <div id="emoji" class="collapse"> -->
                                            <div>
                                                <p class="modal-title" style="color: #7c4abe; margin-top: 18px;font-weight: bold;">PHÂN LOẠI</p>
                                                <textarea style="width:100%;" type="text" id="tb2_type" class="form-control"> </textarea>
                                                <p class="modal-title" style="color: #7c4abe; margin-top: 18px;font-weight: bold;">QUALITY_REMARK</p>
                                                <textarea style="width:100%;" type="text" id="tb_quality_remark" class="form-control"> </textarea>
                                            </div>
                                            <div id="table_modal">
                                                <div style="margin-top: 18px;" class="container-fluid padding ">
                                                    <div class="row text-center">
                                                        <div class="col-xs-12 col-md-5 ">
                                                            <div class="row">
                                                                <p class="modal-title" style="color: #7c4abe;font-weight: bold;">MÁY CẦN LẮP</p>
                                                                <span id="stt_sel_mc" style="display: none;">0</span>
                                                            </div>
                                                            <div class="row" id="select_mc" style="border: solid 1px #7c4abe; display: none;">
                                                                <div class="col-md-7" style="padding-top: 5px; padding-bottom: 5px;">
                                                                    <p class="modal-title" style="color: #7c4abe; margin-top: 0px;font-weight: bold;">chọn công đoạn</p>
                                                                    <select style="width:100%;" type="text" id="add_opration_option" class="form-control">
                                                                    </select>
                                                                </div>
                                                                <div class="col-md-3"  style="padding-top: 5px; padding-bottom: 5px;">
                                                                    <p class="modal-title" style="color: #7c4abe; margin-top: 0px;font-weight: bold;">SL</p>
                                                                    <input style="width:100%;" type="number" id="add_qty_option" class="form-control">
                                                                </div>
                                                                <div class="col-sm-2" style="padding-top: 20px; padding-right: 5px;">
                                                                    <button type="button" class="btn btn-primary" id="btn_red">+</button>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <table id="tbmachineadd" class=" table table-hover " style="margin:auto;height: auto;" ondblclick="new_MC()">
                                                                    <thead>
                                                                        <tr>
                                                                            <th style="text-align: center ;width : 100px;">MODEL</th>
                                                                            <th style="text-align: center;width : 100px;">CHỨC NĂNG</th>
                                                                            <th style="text-align: center;width : 30px; ">SLYC</th>
                                                                            <th style="text-align: center;width : 30px; ">SLCB</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody style="text-align: left;">
                                                                        <!-- Update Data lên đây -->
                                                                    </tbody>
                                                                </table>
                                                            </div>


                                                        </div>
                                                        <div class="col-xs-12 col-md-1 ">
                                                        </div>
                                                        <div class="col-xs-12 col-md-5 ">
                                                            <div class="row">
                                                                <p class="modal-title" style="color: #7c4abe;font-weight: bold;">MÁY KÉO VÀO KHO</p>
                                                                <span id="stt_sel_mc_red" style="display: none;">0</span>
                                                            </div>
                                                            <div class="row" id="select_mc_red" style="border: solid 1px #7c4abe; display: none;">

                                                                <div class="col-sm-7" style="padding-top: 5px; padding-bottom: 5px;">
                                                                    <p class="modal-title" style="color: #7c4abe; margin-top: 0px;font-weight: bold;">chọn công đoạn</p>
                                                                    <select style="width:100%;" type="text" id="red_opration_option" class="form-control">
                                                                    </select>
                                                                </div>
                                                                <div class="col-sm-3"  style="padding-top: 5px; padding-bottom: 5px;">
                                                                    <p class="modal-title" style="color: #7c4abe; margin-top: 0px;font-weight: bold;">SL</p>
                                                                    <input style="width:100%;" type="number" id="red_qty_option" class="form-control">
                                                                </div>
                                                                <div class="col-sm-2" style="padding-top: 20px; padding-right: 5px;">
                                                                    <button type="button" class="btn btn-primary" id="btn_red">-</button>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <table id="tbmachinesub" class=" table table-hover " style="margin:auto;height: auto;" ondblclick="mov_MC()">
                                                                    <thead>
                                                                        <tr>
                                                                            <th style="text-align: center ;width : 160px;">MODEL</th>
                                                                            <th style="text-align: center;width : 160px;">CHỨC NĂNG</th>
                                                                            <th style="text-align: center;width : 30px; ">SL</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody style="text-align: left;">
                                                                        <!-- Update Data lên đây -->
                                                                    </tbody>
                                                                </table>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                        </div>
                                        <div class="row" style="margin-top: 5px;" id="smed_modal" style="display: none; background-color: lightcyan;">
                                            <h1>thông tin chuẩn bị máy ở đây</h1>
                                            <span id="smed_md_stt" style="display: none;">none</span>
                                            <span id="new_adj" style="display: none;">new</span>
                                            <div class="row" style="background-color: burlywood; padding-bottom: 5px; padding-top: 5px;">
                                                <form>
                                                    <div  class="col-md-3">
                                                        <div class="form-group">
                                                            <label class="w3-left" for="f_operation">công đoạn:</label>
                                                            <input class="form-control w3-left" type="text" name="f_operation" id="f_operation">
                                                        </div>
                                                    </div>
                                                    <div  class="col-md-2">
                                                        <div class="form-group">
                                                            <label class="w3-left" for="f_model">loại máy:</label>
                                                            <input class="form-control w3-left" type="text" name="f_model" id="f_model">
                                                        </div>
                                                    </div>
                                                    <div  class="col-md-2">
                                                        <div  class="form-group">
                                                            <label class="w3-left" for="f_tagnumber" id="model_log">mã máy:</label>
                                                            <input class="form-control w3-left" type="text" name="f_tagnumber" id="f_tagnumber" onkeypress="search_mc()">
                                                        </div>
                                                    </div>

                                                    <div  class="col-md-2">
                                                        <div class="form-group">
                                                            <label class="w3-left" for="f_idmec" id="mec_log">ID THỢ MÁY:</label>
                                                            <input class="form-control w3-left" type="number" name="f_idmec" id="f_idmec" onkeypress="get_mec_name()" >
                                                        </div>
                                                    </div>
                                                    <div  class="col-md-1">
                                                        <div class="form-group">
                                                            <label class="w3-left" for="f_stt">trạng thái:</label>
                                                            <select class="form-control w3-left" type="text" name="f_stt" id="f_stt">
                                                                <option>-</option>
                                                                <option>done</option>
                                                                <option>prepair</option>
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <div  class="col-md-1">
                                                        <div class="form-group" style="padding-top: 15px;">
                                                            <button type="button" class="btn btn-primary" id="f_btn_add" onclick="prepare_add()"> THÊM </button>
                                                        </div>
                                                    </div>
                                                    <div  class="col-md-1">
                                                        <div class="form-group" style="padding-top: 15px;">
                                                            <button type="button" class="btn btn-primary" id="f_btn_del" onclick="prepare_adj_bt()"> XÓA </button>
                                                        </div>
                                                    </div>

                                                </form>
                                            </div>
                                            <div class="row" style="padding-top: 20px;">
                                                <table id="tableprepare"  class="table table-hover" style="margin:auto;height: auto; border: blueviolet!important; border-width: 2px!important;" ondblclick="prepare_adj()">
                                                    <thead>
                                                        <tr>
                                                            <!-- <th style="text-align: center;" id="stt">EDIT</th> -->
                                                            <!-- <th style="text-align: center;width: 50px;">STT</th> -->
                                                            <th style="text-align: center;">TAG NUMBER</th>
                                                            <th style="text-align: center;">MODEL</th>
                                                            <th style="text-align: center;">CÔNG ĐOẠN</th>
                                                            <th style="text-align: center;">THỢ MÁY</th>
                                                            <th style="text-align: center;">THỜI GIAN CB</th>
                                                            <th style="text-align: center;">TRẠNG THÁI</th>
                                                            <th></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody style="text-align: center;" >
                                                        <tr><td>123456</td><td>NTD</td><td>IE</td><td>BI</td><td>now</td><td>ok</td></tr>
                                                        <tr><td>123456</td><td>NTD</td><td>IE</td><td>BI</td><td>now</td><td>ok</td></tr>
                                                        <tr><td>123456</td><td>NTD</td><td>IE</td><td>BI</td><td>now</td><td>ok</td></tr>
                                                        <tr><td>123456</td><td>NTD</td><td>IE</td><td>BI</td><td>now</td><td>ok</td></tr>
                                                        <tr><td>123456</td><td>NTD</td><td>IE</td><td>BI</td><td>now</td><td>ok</td></tr>
                                                    </tbody>
                                                </table>
                                            </div>

                        
                                        </div>
                                        <!-- <div class="modal-footer">
                                            
                                            <button type="button" class="btn btn-primary" id="btn_delete">DELETE</button>
                                            <button type="button" class="btn btn-primary" id="btn_upload">SAVE</button>
                                        </div> -->

                                        <div class="modal-footer" style="margin-top: 10px">
                                            <div class="col-md-6 " style="margin-left: 0px;">
                                                <button style="float: left;" type="button" class="btn btn-primary" id="btn_mc_reg" onclick="smed_modal_show()">chuẩn bị máy (SMED)</button>
                                            </div>
                                            <div class="col-md-6 ">
                                                <button type="button" class="btn btn-primary" id="btn_delete">DELETE</button>
                                                <button type="button" class="btn btn-primary" id="btn_upload">SAVE</button>
                                            </div>
                                        </div>


                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
            </section>

        </main>
        <script type="text/javascript">
            var user;
            function loaddata() {
                loaddata1();            
            };
            function loaddata1()
            {              
                var xmlhttp1 = new XMLHttpRequest();
                xmlhttp1.open("get", '/cs/listweek', true);
                event.preventDefault();
                xmlhttp1.setRequestHeader("Content-type", "application/json");
                xmlhttp1.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var jsonObject = JSON.parse(this.responseText);
                        console.log(jsonObject)
                        var trHTML = '';
                        var i;                       
                        
                        for (i = 0; i < jsonObject.length; i++) {
                            var id = jsonObject[i].id;

                            trHTML += '<option>' + id + '</option>';
                            var x = document.getElementById("selectweekk");
                            var option = document.createElement("option");
                            option.text = id;
                            x.add(option);
                        };
                        console.log(trHTML);
                        loaddata2() 
                    }
                };
                xmlhttp1.setRequestHeader("Content-type", "application/json");
                xmlhttp1.send();
                
            }

            function loaddata2()
            {
                var x = document.getElementById("selectweekk").value;
                console.log(x)
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.open("post", '/cs/selectweek', true);
                xmlhttp.setRequestHeader("Content-type", "application/json");
                data = {
                    week: x
                    };
      
                xmlhttp.send(JSON.stringify(data));

                xmlhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var jsonObject = JSON.parse(this.responseText);
                        var trHTML = '';
                        var i;
                        var id = 0;
                        for (i = 0; i < jsonObject.length; i++) {

                            var groupcs = jsonObject[i].GROUP_CS;
                            var selling1 = jsonObject[i].STYLE1;
                            var selling2 = jsonObject[i].STYLE2;
                            var distribute = jsonObject[i].SECTION;
                            var tarnsfer_time = jsonObject[i].C_TIME;
                            var leader = jsonObject[i].LEADER;
                            var quality_remark = jsonObject[i].QUALITY_REMARK;
                            trHTML += '<tr><td style="text-align: center;">' + groupcs + '</td><td style="text-align: center;">' + selling1 + '</td><td style="text-align: center;">' + selling2 + '</td><td style="text-align: center;">' + distribute + '</td><td style="text-align: center;">' + tarnsfer_time + '</td><td style="text-align: center;">' + quality_remark + '</td><td style="text-align: center;">' + leader + '</td></tr>';

                        };
                        $('#tablea tbody').html(trHTML);;
                        loaddata3()
                    }
                };
            }

            function loaddata3(){
                var x = document.getElementById("selectweekk").value;
                console.log(x)
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.open("post", '/cs/style_detail', true);
                xmlhttp.setRequestHeader("Content-type", "application/json");
                data = {
                    week: x
                    };
      
                xmlhttp.send(JSON.stringify(data));

                xmlhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var jsonObject = JSON.parse(this.responseText);
                        var trHTML = '';
                        var i;
                        for (i = 0; i < jsonObject.length; i++) {
                            var x = document.getElementById("tb2_selling");
                            var option = document.createElement("option");
                            option.text = jsonObject[i].style_detail;
                            x.add(option);
                            var x = document.getElementById("tb2_style");
                            var option = document.createElement("option");
                            option.text = jsonObject[i].style_detail;
                            x.add(option);
                        };
                    }
                };
            }

            function ref_tb_prepare(){
                    var group = document.getElementById("tb2_group_hide").value;
                    var ctime = document.getElementById("tb2_time_hide").value;
                    var style = document.getElementById("tb2_style").value;
                    var xmlhttp = new XMLHttpRequest();
                    xmlhttp.open("post", '/cs/get_mc_prepare', true);
                    xmlhttp.setRequestHeader("Content-type", "application/json");
                    data = {
                        group:group,
                        ctime:ctime,
                        style:style
                        };
        
                    xmlhttp.send(JSON.stringify(data));

                    xmlhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            if (this.responseText=="0"){
                                alert("chưa có chuẩn bị máy")
                                return
                            }
                            var jsonObject = JSON.parse(this.responseText);
                            console.log(jsonObject)
                            var trHTML = '';
                            for (i = 0; i < jsonObject.length; i++) {

                                var tag = jsonObject[i].tagnumber;
                                var model = jsonObject[i].model_req;
                                var ope = jsonObject[i].operation;
                                var mec = jsonObject[i].mec_name;
                                var t = change_time(jsonObject[i].timeupdate);
                                var stt = jsonObject[i].machine_stt;
                                trHTML += '<tr><td style="text-align: center;">' + tag + '</td><td style="text-align: center;">' + model + '</td><td style="text-align: center;">' + ope + '</td><td style="text-align: center;">' + mec + '</td><td style="text-align: center;">' + t + '</td><td style="text-align: center;">' + stt + '</td><td style="text-align: center;">x</td></tr>';

                            };
                            $('#tableprepare tbody').html(trHTML);;
                            }
                        }
            }

            function smed_modal_show(){
                var stt=document.getElementById("smed_md_stt").innerText
                if (stt=="none"){
                    // send request to server
                    ref_tb_prepare()
                
                    // finish request

                    document.getElementById("smed_modal").style.display='block'
                    document.getElementById("smed_md_stt").innerText='block'
                }else{
                    document.getElementById("smed_modal").style.display='none'
                    document.getElementById("smed_md_stt").innerText='none'
                }
                
            }
            function change_time(time){
                return (new Date(time)).toLocaleString("en-US", {timeZone: "Asia/Bangkok"});
            }
            function ctgroup() {
                var input, filter, table, tr, th, i, y, txtValue, txtValuee;
                input = document.getElementById("id_groupcs");
                filter = input.value.toUpperCase();
                table = document.getElementById("tablea");
                tr = table.getElementsByTagName("tr");

                for (i = 0; i < tr.length; i++) {
                    td = tr[i].getElementsByTagName("td")[0];
                    th = tr[i].getElementsByTagName("td")[4];
                    if (td || th) {
                        txtValue = td.textContent || td.innerText;
                        txtValuee = th.textContent || th.innerText;
                        if ((txtValue.toUpperCase().indexOf(filter) > -1) || txtValuee.toUpperCase().indexOf(filter) > -1) {
                            tr[i].style.display = "";
                        } else {
                            tr[i].style.display = "none";
                        }
                    }
                }
            }

            function selectweek() {
                var x = document.getElementById("selectweekk").value;
               // document.getElementById("demo").innerHTML = x;
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.open("post", '/cs/selectweek', true);

                event.preventDefault();
                xmlhttp.setRequestHeader("Content-type", "application/json");
                data = {
                    week: x
                    };
                xmlhttp.send(JSON.stringify(data));

                xmlhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var jsonObject = JSON.parse(this.responseText);
                        var trHTML = '';
                        var i;
                        var id = 0;
                        for (i = 0; i < jsonObject.length; i++) {
                            // var id = i + 1;

                            var groupcs = jsonObject[i].GROUP_CS;
                            var selling1 = jsonObject[i].STYLE1;
                            var selling2 = jsonObject[i].STYLE2;
                            var distribute = jsonObject[i].SECTION;
                            var tarnsfer_time = jsonObject[i].C_TIME;
                            var leader = jsonObject[i].LEADER;
                            var quality_remark = jsonObject[i].QUALITY_REMARK;
       
                            trHTML += '<tr><td style="text-align: center;">' + groupcs + '</td><td style="text-align: center;">' + selling1 + '</td><td style="text-align: center;">' + selling2 + '</td><td style="text-align: center;">' + distribute + '</td><td style="text-align: center;">' + tarnsfer_time + '</td><td style="text-align: center;">' + quality_remark + '</td><td style="text-align: center;">' + leader + '</td></tr>';

                        };
                       // console.log(trHTML);
                        $('#tablea tbody').html(trHTML);;
                    }
                };
            
            }

            document.getElementById('btn_upload').addEventListener('click', function() {


                event.preventDefault(); //prevent default action 
                //var stt = document.getElementById("tb2_stt").value;
                var group = document.getElementById("tb2_group_hide").value;
                var group_new=document.getElementById("tb2_group").value
                var selling = document.getElementById("tb2_selling").value;
                var style = document.getElementById("tb2_style").value;
                var type = document.getElementById("tb2_type").value;
                var time = document.getElementById("tb2_time").value;
                var ctime = document.getElementById("tb2_time_hide").value;
                var leader = document.getElementById("tb2_leader").value;
                var qualityremark = document.getElementById("tb_quality_remark").value;
                var id= document.getElementById("selectweekk").value;
                // var user_edit= document.getElementById("Username").value;
                if (group_new==""||time==""){
                    alert("vui lòng nhập vào thông tin nhóm chuyền và thời gian chuyển đổi")
                    return
                }
                var xmlhttp = new XMLHttpRequest();
                var x = document.getElementById("namebox").innerText;
                if (x == "ADD GROUP") {
                    xmlhttp.open("post", '/cs/insertline', true);
                } else {
                    xmlhttp.open("post", '/cs/updateline', true);
                }
                xmlhttp.setRequestHeader("Content-type", "application/json");
                data = {
                    id:id,
                    //stt: stt,
                    group: group,
                    group_new: group_new,
                    ctime: ctime,
                    style1: selling,
                    style2: style,
                    type: type,
                    time: time,
                    leader: leader,
                    qualityremark: qualityremark,

                };

                xmlhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var data = this.responseText;
                        //document.getElementById("demo").innerHTML = data;
                        if (data == "ok") {
                            loaddata2()
                            //selectweek();
                            alert("ĐÃ CẬP NHẬT THÀNH CÔNG");
                        } else {
                            alert("Có lỗi rồi!!!");
                        }
                        document.getElementById('id01').style.display = 'none';
                    }
                };
                console.log(data);
                xmlhttp.send(JSON.stringify(data));

            });

            document.getElementById('btn_delete').addEventListener('click', function() {
                var r = confirm("Bạn có chắc muốn xóa không???");
                if (r == true) {
                    var xmlhttp = new XMLHttpRequest();
                    xmlhttp.open("post", '/cs/deleteline', true);
                    event.preventDefault(); //prevent default action 
                    var group = document.getElementById("tb2_group").value;
                    var time = document.getElementById("tb2_time").value;
                    xmlhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            var data = this.responseText;
                            if (data == "ok") {
                                loaddata2()
                                //selectweek();
                                alert("ĐÃ CẬP NHẬT THÀNH CÔNG");
                            } else {
                                alert("Có lỗi rồi!!!");
                            }
                            document.getElementById('id01').style.display = 'none';
                        }
                    };
                    xmlhttp.setRequestHeader("Content-type", "application/json");
                    data = {
                        group: group,
                        time: time,
                    };
                    console.log(data);
                    xmlhttp.send(JSON.stringify(data));
                } else {
                    return
                }
                
            });

            function prepare_adj(){
                var table = document.getElementById("tableprepare");
                if (table) {
                    for (var i = 0; i < table.rows.length; i++) {
                        table.rows[i].ondblclick = function(e) {
                            tableadj(this);
                        };
                    };
                };
            }
            function tableadj(tableRow){
                // alert(tableRow.childNodes[0].innerText)
                document.getElementById("f_model").value=tableRow.childNodes[1].innerText
                document.getElementById("f_operation").value=tableRow.childNodes[2].innerText
                document.getElementById("f_tagnumber").disabled=true
                document.getElementById("f_model").disabled=true
                document.getElementById("f_operation").disabled=true
                document.getElementById("f_tagnumber").value=tableRow.childNodes[0].innerText
                document.getElementById("f_stt").value=tableRow.childNodes[5].innerText
                document.getElementById('model_log').innerText="Mã Máy"
                document.getElementById("f_idmec").disabled=false
                document.getElementById("f_idmec").value=''
                document.getElementById('mec_log').innerText="ID Thợ Máy"
                document.getElementById("f_idmec").focus()
                document.getElementById("new_adj").innerText="adj"
            }
            function dbclick_tb_add(){
                var table = document.getElementById("tbmachineadd");
                if (table) {
                    for (var i = 0; i < table.rows.length; i++) {
                        table.rows[i].ondblclick = function(e) {
                            tableadd(this);
                        };
                    };
                };
            }
            function tableadd(tableRow){
                // alert(tableRow.childNodes[0].innerText)
                document.getElementById("f_model").value=tableRow.childNodes[0].innerText
                document.getElementById("f_operation").value=tableRow.childNodes[1].innerText
                document.getElementById("f_model").disabled=true
                document.getElementById("f_operation").disabled=true
                document.getElementById("f_tagnumber").disabled=false
                document.getElementById("f_tagnumber").value=''
                document.getElementById('model_log').innerText="Mã Máy"
                document.getElementById("f_idmec").disabled=false
                document.getElementById("f_idmec").value=''
                document.getElementById('mec_log').innerText="ID Thợ Máy"
                document.getElementById("f_tagnumber").focus()
                document.getElementById("new_adj").innerText="new"

            }
            function search_mc(){
                if (event.keyCode === 13){
                    find_machine()
                    }
            }
            function find_machine(){
                // alert('load group')
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var res_result=this.responseText
                        console.log(res_result)
                        if (res_result=="false"){
                            alert("mã số nhập vào không phải nv may!")
                        } else{
                            res_result=JSON.parse(res_result)
                            model_log=res_result[0].MachineModel
                            model_req=document.getElementById("f_model").value
                            mlog=model_log.substr(0,2)
                            mreq=model_req.substr(0,2)
                            if (mlog==mreq){
                                document.getElementById("model_log").innerHTML=res_result[0].MachineModel;
                                document.getElementById("f_tagnumber").disabled=true;
                            }else{
                                var r = confirm("Xác nhận thông tin!\nMã máy nhập vào khác model: "+model_req+"\nXác nhận thay thế bởi loại máy "+model_log);
                                if (r == true) {
                                    document.getElementById("model_log").innerHTML=res_result[0].MachineModel;
                                    document.getElementById("f_tagnumber").disabled=true;
                                } else {
                                    alert("Vui lòng nhập lại mã máy!");
                                }
                            }


                        }
                    }
                };
                var mcid=document.getElementById("f_tagnumber").value;
                console.log(mcid)
                xhttp.open("get", "/mec/mclocate2/"+mcid, true);
                xhttp.send();
            }
            function get_mec_name(){
                var msnv=document.getElementById('f_idmec').value
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                    var res_result=this.responseText
                    console.log(res_result)
                    if (res_result=="wrong_id"){
                        alert("something wrong happen!")
                    } else{
                        nv=JSON.parse(res_result);
                        console.log(nv[0].type)
                        if (nv[0].dept=="MEC"){
                            document.getElementById("mec_log").innerText=nv[0].name;
                            document.getElementById("f_idmec").disabled=true;
                        }else{
                            alert("Mã số nhập vào không phải thợ máy")
                        }
                    }
                    }
                    };
                    if (msnv.length>=6 && event.keyCode === 13){
                        xhttp.open("get", "/mec/idnv/"+msnv, true);
                        xhttp.send();
                    }
            }
            function new_MC(){
                var group_cs = document.getElementById("tb2_group_hide").value
                if (group_cs==""){
                    alert("Vui lòng lưu chuyển đổi trước khi yêu cầu máy")
                    return
                }
                var selling=document.getElementById("tb2_selling").value
                var style=document.getElementById("tb2_style").value
                if (selling!="IE Bổ sung"){
                    // alert("nhập thông tin máy chuẩn bị cho change style")
                    var stt=document.getElementById("smed_md_stt").innerText
                    if (stt=="none"){
                        return
                    }
                    dbclick_tb_add()
                } else{
                    var stt=document.getElementById("stt_sel_mc").innerText
                    if (stt==0){
                        document.getElementById("select_mc").style.display="block";
                        document.getElementById("stt_sel_mc").innerText="1"
                    } else{
                        document.getElementById("select_mc").style.display="none";
                        document.getElementById("stt_sel_mc").innerText="0"
                    }

                    var xmlhttp = new XMLHttpRequest();
                    xmlhttp.open("POST", '/cs/get_operation', true);
                    xmlhttp.setRequestHeader("Content-type", "application/json");
                    data = {
                        style_detail: style,
                    };

                    xmlhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            var res = this.responseText;
                            //document.getElementById("demo").innerHTML = data;
                            if (res == "no") {
                                alert("data not found");
                            } else {
                                console.log("ok")
                                const jsonObject=JSON.parse(res);
                                console.log(jsonObject)
                                var x = document.getElementById("add_opration_option");
                                while (x.length >0){
                                    x.options.remove(0);
                                    var x = document.getElementById("add_opration_option");
                                }
                                for (i = 0; i < jsonObject.length; i++) {
                                var operation = jsonObject[i].operation;
                                var x = document.getElementById("add_opration_option");
                                var option = document.createElement("option");
                                option.text = operation;
                                x.add(option);
                        };
                            }
                        }
                    };
                    console.log(data);
                    xmlhttp.send(JSON.stringify(data));
                }


            }

            function prepare_adj_bt() {
                var cd = document.getElementById("f_operation").value;
                var mod=document.getElementById("f_model").value
                var tag=document.getElementById("f_tagnumber").value
                var mec=document.getElementById("f_idmec").value
                var mec_name=document.getElementById('mec_log').innerText
                var mod_p=document.getElementById("model_log").innerText
                var stt=document.getElementById("f_stt").value
                var group_cs = document.getElementById("tb2_group_hide").value
                var ctime = document.getElementById("tb2_time_hide").value;
                var style = document.getElementById("tb2_style").value;
                if (cd==""){
                    alert("Vui lòng điền thông tin công đoạn")
                    return
                }
                if (tag==""){
                    alert("Vui lòng điền thông tin loại máy")
                    return
                }
                if (document.getElementById("mec_log").innerText=="ID Thợ Máy"){
                    alert("Vui lòng nhập vào thông tin thợ máy chuẩn bị")
                    return
                }
               // document.getElementById("demo").innerHTML = x;
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.open("post", '/cs/prepare_adj', true);

                event.preventDefault();
                xmlhttp.setRequestHeader("Content-type", "application/json");
                data = {
                    cd:cd,
                    mod:mod,
                    tag:tag,
                    mod_p:mod_p,
                    mecid:mec,
                    mecname:mec_name,
                    stt:stt,
                    group_cs:group_cs,
                    ctime:ctime,
                    style:style     
                    };
                xmlhttp.send(JSON.stringify(data));

                xmlhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        alert(this.responseText);
                        ref_tb_prepare()
                        rf_add_red(group_cs,ctime)
                        document.getElementById('f_idmec').disabled=false
                        document.getElementById("f_idmec").value=''
                        document.getElementById('mec_log').innerText='ID Thợ Máy'
                    }
                };
            
            }
            
            
            function prepare_add() {
                var cd = document.getElementById("f_operation").value;
                var mod=document.getElementById("f_model").value
                var tag=document.getElementById("f_tagnumber").value
                var mec=document.getElementById("f_idmec").value
                var mec_name=document.getElementById('mec_log').innerText
                var mod_p=document.getElementById("model_log").innerText
                var stt=document.getElementById("f_stt").value
                var group_cs = document.getElementById("tb2_group_hide").value
                var ctime = document.getElementById("tb2_time_hide").value;
                var style = document.getElementById("tb2_style").value;
                var new_adj=document.getElementById("new_adj").innerText
                if (stt=="-"){
                    alert("Vui lòng chọn trạng thái chuẩn bị máy")
                    return
                }
                if (cd==""){
                    alert("Vui lòng điền thông tin công đoạn")
                    return
                }
                if (tag==""){
                    alert("Vui lòng điền thông tin loại máy")
                    return
                }
                if (document.getElementById("model_log").innerText=="Mã Máy" && new_adj=="new"){
                    alert("Vui lòng nhập vào thông tin tag máy")
                    return
                }
                if (document.getElementById("mec_log").innerText=="ID Thợ Máy"){
                    alert("Vui lòng nhập vào thông tin thợ máy chuẩn bị")
                    return
                }
               // document.getElementById("demo").innerHTML = x;
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.open("post", '/cs/prepare_add', true);

                event.preventDefault();
                xmlhttp.setRequestHeader("Content-type", "application/json");
                data = {
                    cd:cd,
                    mod:mod,
                    tag:tag,
                    mod_p:mod_p,
                    mecid:mec,
                    mecname:mec_name,
                    stt:stt,
                    group_cs:group_cs,
                    ctime:ctime,
                    style:style     
                    };
                xmlhttp.send(JSON.stringify(data));

                xmlhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        alert(this.responseText);
                        ref_tb_prepare()
                        rf_add_red(group_cs,ctime)
                        document.getElementById('f_idmec').disabled=false
                        document.getElementById("f_idmec").value=''
                        document.getElementById('mec_log').innerText='ID Thợ Máy'
                    }
                };
            
            }
            
            
            
            // var ds=JSON.parse(sessionStorage.getItem('result_output'));
            // const jsonObject=JSON.parse(data);
            // sessionStorage.setItem('result_output',JSON.stringify(jsonObject));
            function mov_MC(){
                var group_cs = document.getElementById("tb2_group_hide").value
                if (group_cs==""){
                    alert("Vui lòng lưu chuyển đổi trước khi yêu cầu máy")
                    return
                }
                var selling=document.getElementById("tb2_selling").value
                if (selling!="IE Bổ sung"){
                    alert("Chỉ những yêu cầu IE bổ sung mới yêu cầu chuyển máy")
                    return
                }
                var stt=document.getElementById("stt_sel_mc_red").innerText
                if (stt==0){
                    document.getElementById("select_mc_red").style.display="block";
                    document.getElementById("stt_sel_mc_red").innerText="1"
                } else{
                    document.getElementById("select_mc_red").style.display="none";
                    document.getElementById("stt_sel_mc_red").innerText="0"
                }
            }

            function detail_ticket() {
                var table = document.getElementById("tablea");
                event.stopImmediatePropagation;
                if (table) {
                    table.rows[0].ondblclick = function(e) {
                        tableaddText(this);
                    };
                    for (var i = 1; i < table.rows.length; i++) {
                        table.rows[i].ondblclick = function(e) {
                            tableText(this);
                        };
                    };
                };
            }

            function rf_add_red(group_cs,c_time){
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.open("post", '/cs/loading_machine', true);
                event.preventDefault(); //prevent default action 
                xmlhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var jsonObject = JSON.parse(this.responseText);
                        console.log(jsonObject)
                        var trHTML = '';
                        var trHTMLL = '';
                        var a = 1;
                        var i;
                        for (i = 0; i < jsonObject.length; i++) {
                            var groupcs = jsonObject[i].GROUP_CS;
                            var tarnsfer_time = jsonObject[i].C_TIME;
                            var add_red = jsonObject[i].ADD_RED;

                            var model = jsonObject[i].MODEL;
                            var functionn = jsonObject[i].FUNCTION;
                            var quantity = jsonObject[i].QUANTITY;
                            var pre=0
                            if(jsonObject[i].pre==null){
                                pre==0
                            }else{
                                pre=jsonObject[i].pre
                            }
                      

                            if (true) {
                                if (add_red== "ADD")
                                {trHTML += '<tr><td style="text-align: center;">' + model + '</td><td style="text-align: center;">' + functionn + '</td><td style="text-align: center;">' + quantity + '</td><td style="text-align: center;">'+pre+'</td></tr>';}
                                if (add_red== "RED") 
                                {trHTMLL += '<tr><td style="text-align: center;">' + model + '</td><td style="text-align: center;">' + functionn + '</td><td style="text-align: center;">' + quantity + '</td></tr>';}
                            }
                        };
                        //console.log(trHTML);
                        //console.log(trHTMLL);
                        $('#tbmachineadd tbody').html(trHTML);
                        $('#tbmachinesub tbody').html(trHTMLL);

                    }
                };
                xmlhttp.setRequestHeader("Content-type", "application/json");
                data = {
                        group_cs: group_cs,
                        c_time: c_time,
                    };
                console.log(data)
                xmlhttp.send(JSON.stringify(data));
            }

            function tableText(tableRow) {
                document.getElementById("namebox").innerHTML = "EDIT BOX";
                document.getElementById('id01').style.display = 'block';
                document.getElementById('smed_modal').style.display = 'none';
                document.getElementById("btn_delete").disabled = false;

                // document.getElementById("tb2_stt").value = tableRow.childNodes[0].innerText;
                document.getElementById("tb2_group").value = tableRow.childNodes[0].innerText;
                var group_cs=tableRow.childNodes[0].innerText;
                document.getElementById("tb2_group_hide").value = tableRow.childNodes[0].innerText;
                document.getElementById("tb2_selling").value = tableRow.childNodes[1].innerText;
                document.getElementById("tb2_style").value = tableRow.childNodes[2].innerText;
                document.getElementById("tb2_type").value = tableRow.childNodes[3].innerText;
                document.getElementById("tb2_time").value = tableRow.childNodes[4].innerText;
                var c_time=tableRow.childNodes[4].innerText;
                document.getElementById("tb2_time_hide").value = tableRow.childNodes[4].innerText;
                document.getElementById("tb2_leader").value = tableRow.childNodes[6].innerText;
                document.getElementById("tb_quality_remark").value = tableRow.childNodes[5].innerText;
               
                rf_add_red(group_cs,c_time)

            };

            function caculate_layout(){
                username="ngoi"
                week=document.getElementById("selectweekk").value
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.open("post", '/cs/calculate_machine', true);
                event.preventDefault(); //prevent default action 
                xmlhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var jsonObject = this.responseText;
                        alert(jsonObject)
                        //console.log(trHTML);
                    }
                };
                xmlhttp.setRequestHeader("Content-type", "application/json");
                data = {
                        week_cbc:week,
                        userx: username,
                    };
                console.log(data)
                xmlhttp.send(JSON.stringify(data));

            }

            function tableaddText(tableRow) {
                document.getElementById("tb2_useredit").innerHTML= "";
                document.getElementById("btn_delete").disabled = true

                document.getElementById("namebox").innerHTML = "ADD GROUP";
                var table = document.getElementById("tablea");
                document.getElementById('id01').style.display = 'block';
               // document.getElementById("tb2_stt").value = table.rows.length;
                document.getElementById("tb2_group").value = "";
                document.getElementById("tb2_group_hide").value = "";
                document.getElementById("tb2_selling").selectedIndex="0"
                document.getElementById("tb2_style").selectedIndex="0"
                document.getElementById("tb2_type").value = "";
                document.getElementById("tb2_time").value = "";
                document.getElementById("tb2_time_hide").value = "";
                document.getElementById("tb2_leader").value = "";
                document.getElementById("tb_quality_remark").value = "";
                
                $('#tbmachineadd tbody').html('');
                $('#tbmachinesub tbody').html('');
                // table = document.getElementById("tbmachineadd");
                // tr = table.getElementsByTagName("tr");
                // table = document.getElementById("tbmachinesub");
                // trr = table.getElementsByTagName("tr");
                // var i, j;
                // for (i = 1; i < tr.length; i++) {
                //     tr[i].style.display = "none";
                // }
                // for (i = 1; i < trr.length; i++) {
                //     trr[i].style.display = "none";
                // }
            };

            function sortTable() {
                var table, rows, switching, i, x, y, w1, w2, d1, c1, d2, c2, shouldSwitch;
                table = document.getElementById("tablea");
                switching = true;
                while (switching) {
                    switching = false;
                    rows = table.rows;
                    for (i = 1; i < (rows.length - 1); i++) {
                        shouldSwitch = false;
                        x = rows[i].getElementsByTagName("TD")[4].innerHTML;
                        y = rows[i + 1].getElementsByTagName("TD")[4].innerHTML;
                        x = x.replace(/ /g, "");
                        y = y.replace(/ /g, "");
                        x = "00" + x;
                        y = "00" + y;

                        w1 = x.substr(x.length - 2, x.length);
                        d1 = x.substr(x.length - 4, 1);
                        c1 = x.substr(x.length - 6, 1);
                        w2 = y.substr(y.length - 2, y.length);
                        d2 = y.substr(y.length - 4, 1);
                        c2 = y.substr(y.length - 6, 1);

                        var time1 = w1 + d1 + c1;
                        var time2 = w2 + d2 + c2;

                        console.log(time1);
                        console.log(time2);

                        if (time1 > time2) {
                            shouldSwitch = true;
                            break;
                        }
                    }
                    if (shouldSwitch) {

                        rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                        switching = true;
                    }

                }
            }

                   
        </script>     
        </div>
    </div>
</body>

</html>