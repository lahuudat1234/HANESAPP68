<!DOCTYPE html>
<html lang="en" dir="ltr">
<header>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!-- <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-purple.min.css"> -->
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.purple-indigo.min.css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/JS/getmdl/getmdl-select.min.css" />
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script defer src="/JS/getmdl/getmdl-select.min.js"></script>
    <!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>CCS - Purchasing</title>
</header>

<body style="background-color: white;" onload="load_unit()">
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
                <!-- Title -->
                <span class="mdl-layout-title">PURCHASING</span>
                <div class="mdl-layout-spacer"></div>
                <div id="div_cbb_quotation"
                    class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height"
                    style="margin: 0 auto; width: 150px; margin-right: 20px;">
                    <input type="text" value="" class="mdl-textfield__input" id="cbb_quotation" readonly>
                    <input type="hidden" value="" name="cbb_quotation">
                    <label for="cbb_quotation" class="mdl-textfield__label" style="color:white;">Báo Giá</label>
                    <ul for="cbb_quotation" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-shadow--8dp"
                        id="list_cbb_quotation">
                        <!-- <li class="mdl-menu__item" data-val="01">Đã có Báo giá</li>
                            <li class="mdl-menu__item" data-val="02">Chưa có Báo giá</li> -->
                        <li class="mdl-menu__item" data-val="01" style="color:indigo;">Request</li>
                        <li class="mdl-menu__item" data-val="02" style="color:indigo;">Process</li>
                        <li class="mdl-menu__item" data-val="03" style="color:blue;">Bidding</li>
                        <li class="mdl-menu__item" data-val="04" style="color:green;">Quotation</li>
                        <li class="mdl-menu__item" data-val="04" style="color:red;">Reject</li>
                        <li class="mdl-menu__item" data-val="05" style="color:black;" data-selected='true'>ALL</li>
                    </ul>
                </div>
                <div id="div_cbb_purchaser"
                    class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height"
                    style="width: 250px;">
                    <input type="text" value="" class="mdl-textfield__input" id="cbb_purchaser" readonly
                        style="color:white;" disabled>
                    <input type="hidden" value="" name="cbb_purchaser">
                    <label for="cbb_purchaser" class="mdl-textfield__label" style="color:white;">PIC</label>
                    <ul for="cbb_purchaser" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-shadow--8dp"
                        id="list_cbb_purchaser" style="height: 300px;">
                        <!-- <li class="mdl-menu__item" data-val="ALL" data-selected='true'>ALL</li> -->
                        <li class="mdl-menu__item" data-val="TRINH THI THU HA">TRINH THI THU HA</li>
                        <li class="mdl-menu__item" data-val="HOANG THI QUE">HOANG THI QUE</li>
                        <li class="mdl-menu__item" data-val="LE NGUYEN HANH PHUNG">LE NGUYEN HANH PHUNG</li>
                        <li class="mdl-menu__item" data-val="NGUYEN THI DIEU HIEN">NGUYEN THI DIEU HIEN</li>
                        <li class="mdl-menu__item" data-val="TRAN THI MY KIM">TRAN THI MY KIM</li>
                        <li class="mdl-menu__item" data-val="NGUYEN THI LAN NHI">NGUYEN THI LAN NHI</li>
                        <li class="mdl-menu__item" data-val="DUONG THI KIM DUNG">DUONG THI KIM DUNG</li>
                        <li class="mdl-menu__item" data-val="DUONG THI PHUONG">DUONG THI PHUONG</li>
                        <li class="mdl-menu__item" data-val="NGUYEN QUE GIANG">NGUYEN QUE GIANG</li>
                        <li class="mdl-menu__item" data-val="HOANG THI THAO">HOANG THI THAO</li>
                        <li class="mdl-menu__item" data-val="DO THI KHANH DUNG">DO THI KHANH DUNG</li>
                    </ul>
                </div>
                <div id="div_cbb_month"
                    class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height"
                    style="width: 50px; margin-left: 20px;">
                    <input type="text" value="" class="mdl-textfield__input" id="cbb_month" readonly>
                    <input type="hidden" value="" name="cbb_month">
                    <label for="cbb_month" class="mdl-textfield__label" style="color:white">Tháng</label>
                    <ul for="cbb_month" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-shadow--8dp"
                        id="list_cbb_month">
                        <li class="mdl-menu__item" data-val="0">ALL</li>
                        <li class="mdl-menu__item" data-val="1">1</li>
                        <li class="mdl-menu__item" data-val="2">2</li>
                        <li class="mdl-menu__item" data-val="3">3</li>
                        <li class="mdl-menu__item" data-val="4">4</li>
                        <li class="mdl-menu__item" data-val="5">5</li>
                        <li class="mdl-menu__item" data-val="6">6</li>
                        <li class="mdl-menu__item" data-val="7">7</li>
                        <li class="mdl-menu__item" data-val="8">8</li>
                        <li class="mdl-menu__item" data-val="9">9</li>
                        <li class="mdl-menu__item" data-val="10">10</li>
                        <li class="mdl-menu__item" data-val="11">11</li>
                        <li class="mdl-menu__item" data-val="12">12</li>
                    </ul>
                </div>
                <div id="div_cbb_year"
                    class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height"
                    style="width: 70px; margin-left: 20px;">
                    <input type="text" value="" class="mdl-textfield__input" id="cbb_year" readonly>
                    <input type="hidden" value="" name="cbb_year">
                    <label for="cbb_year" class="mdl-textfield__label" style="color:white">Năm</label>
                    <ul for="cbb_year" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-shadow--8dp"
                        id="list_cbb_year">
                        <li class="mdl-menu__item" data-val="2020">2020</li>
                        <li class="mdl-menu__item" data-val="2021">2021</li>
                        <li class="mdl-menu__item" data-val="2022">2022</li>
                        <li class="mdl-menu__item" data-val="2023">2023</li>
                        <li class="mdl-menu__item" data-val="2024">2024</li>
                        <li class="mdl-menu__item" data-val="2025">2025</li>
                    </ul>
                </div>
            </div>
            <!-- Tabs -->
            <div class="mdl-layout__tab-bar mdl-js-ripple-effect">
                <!-- <a href="#scroll-tab-1" class="mdl-layout__tab is-active">TẠO MỚI</a> -->
                <a href="#scroll-tab-2" class="mdl-layout__tab" is-active>YÊU CẦU BÁO GIÁ</a>
                <a href="#scroll-tab-1" class="mdl-layout__tab">BIDDING</a>
                <a href="#scroll-tab-3" class="mdl-layout__tab">YÊU CẦU MUA HÀNG</a>
                <a href="#scroll-tab-4" class="mdl-layout__tab">SETUP</a>
            </div>
        </header>
        <%- include ("partials/navTemplate.ejs"); -%>
            <main class="mdl-layout__content">
                <section class="mdl-layout__tab-panel is-active" id="scroll-tab-2">
                    <div class="page-content">
                        <div class="mdl-grid" style="margin:10px auto; width: 30%;">
                            <div id="div_cbb_dept"
                                class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height"
                                style="margin: 0 auto; width: 100px; margin-left: 10px; display: none;">
                                <input type="text" value="" class="mdl-textfield__input" id="cbb_dept" readonly>
                                <input type="hidden" value="" name="cbb_dept">
                                <label for="cbb_dept" class="mdl-textfield__label">Bộ Phận</label>
                                <ul for="cbb_dept" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-shadow--8dp"
                                    id="list_cbb_dept">
                                    <li class="mdl-menu__item" data-val="01" data-selected="true">ALL</li>
                                    <li class="mdl-menu__item" data-val="02">IE</li>
                                    <li class="mdl-menu__item" data-val="13">IND</li>
                                    <li class="mdl-menu__item" data-val="03">QA</li>
                                    <li class="mdl-menu__item" data-val="03">PL</li>
                                    <li class="mdl-menu__item" data-val="03">IT</li>
                                    <li class="mdl-menu__item" data-val="04">HR</li>
                                    <li class="mdl-menu__item" data-val="05">FI</li>
                                    <li class="mdl-menu__item" data-val="06">PR</li>
                                    <li class="mdl-menu__item" data-val="07">CT</li>
                                    <li class="mdl-menu__item" data-val="10">LP</li>
                                    <li class="mdl-menu__item" data-val="08">MEC</li>
                                    <li class="mdl-menu__item" data-val="09">F&M</li>
                                    <li class="mdl-menu__item" data-val="10">LOG</li>
                                    <li class="mdl-menu__item" data-val="03">CPL</li>
                                    <li class="mdl-menu__item" data-val="11">IECT</li>
                                    <li class="mdl-menu__item" data-val="12">PAD</li>
                                </ul>
                            </div>
                        </div>
                        <div class="mdl-grid mdl-shadow--6dp"
                            style="margin: 0 auto; border-radius: 10px; padding: 0; width: 98%;">
                            <table class="mdl-data-table mdl-js-data-table"
                                style="border: none; width: 100%; border-radius: 10px;">
                                <thead style="background-color: rgb(28, 43, 109);">
                                    <tr style=" height: 60px; border-radius: 10px;">
                                        <th style="color: white;">#</th>
                                        <th class="mdl-data-table__cell--non-numeric" style="color: white;">PR CODE</th>
                                        <th class="mdl-data-table__cell--non-numeric" style="color: white;">PROJECT</th>
                                        <th style="color: white;">SỐ ITEM</th>
                                        <th class="mdl-data-table__cell--non-numeric" style="color: white;">BỘ PHẬN</th>
                                        <th class="mdl-data-table__cell--non-numeric" style="color: white;">ĐỀ XUẤT</th>
                                        <th class="mdl-data-table__cell--non-numeric" style="color: white;">DỰ TÍNH</th>
                                        <th class="mdl-data-table__cell--non-numeric" style="color: white;">TÌNH TRẠNG
                                        </th>
                                        <th class="mdl-data-table__cell--non-numeric" style="color: white;">PURCHASER
                                        </th>
                                        <th class="mdl-data-table__cell--non-numeric" style="color: white;">LEVEL</th>
                                        <th class="mdl-data-table__cell--non-numeric" style="color: white;">ACTION</th>
                                    </tr>
                                </thead>
                                <tbody id="table_body_PR">
                                </tbody>
                            </table>
                        </div>
                        <form id="upload_form_bidding" method='POST' action='/CCS/Update_PR_File_Bidding_Done'
                            submit='return false;'>
                            <input type='file' name='file_bidding' id='file_bidding' style='display: none;'>
                            <input type='submit' id='submit_bidding' style='display: none;'>
                            <button
                                class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-shadow--6dp"
                                id="btn_upload_new_PR"
                                style="position: fixed; bottom: 50px; right: 50px; background-color: orange;">
                                <i class="material-icons">upload</i>
                            </button>
                        </form>
                    </div>
                </section>
                <section class="mdl-layout__tab-panel" id="scroll-tab-1">
                    <div class="page-content">
                        <div class="mdl_grid" style="margin-top: 20px; margin-left: 20px;">
                            <div class="mdl-grid" style="padding: 0;">
                                <i class="material-icons" style="color: indigo;">person</i>
                                <div style="display: inline; margin-top: 5px; color: indigo; margin-left: 10px; font-weight: bold;"
                                    id="txt_staff_note_bidding">Nhân viên ghi chú:</div>
                            </div>
                            <div class="mdl_grid" style="padding: 0;">
                                <i class="material-icons" style="color: indigo; ">question_answer</i>
                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
                                    style="width: 50%; margin-left: 10px;">
                                    <input class="mdl-textfield__input" type="text" id="txt_note_bidding">
                                    <label class="mdl-textfield__label" for="txt_note_bidding">Ghi chú
                                        bidding...</label>
                                </div>
                                <button
                                    class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
                                    style="margin-left: 20px;" onclick="submit_note_bidding()">
                                    <i class="material-icons">send</i>
                                    Submit
                                </button>
                            </div>
                            <script>
                                function submit_note_bidding() {
                                    note_bidding = document.getElementById('txt_note_bidding').value;
                                    pr_id = document.getElementById('txt_pr_id').innerHTML;
                                    if (note_bidding == '') {
                                        alert('Ghi chú không được để trống!');
                                        return;
                                    }
                                    if (pr_id == 'THÔNG TIN BÁO GIÁ') {
                                        alert('Không tìm thấy mã YCBG!')
                                        return;
                                    }
                                    var xsend = new XMLHttpRequest();
                                    xsend.open("POST", "/CCS/pur_note_bidding", true);
                                    xsend.onreadystatechange = function () {
                                        if (this.readyState == 4 && this.status == 200) {
                                            data = xsend.responseText;
                                            if (data == 'done') {
                                                alert('Đã cập nhật ghi chú!');
                                            }
                                        }
                                    }
                                    xsend.setRequestHeader("Content-type", "application/json");
                                    data = { pr_id: pr_id, note_bidding: note_bidding }
                                    xsend.send(JSON.stringify(data));
                                }
                            </script>
                        </div>
                        <div style="margin-left: 20px; padding: 0;" class="mdl-grid">
                            <div class="mdl-cell--3-col">
                                <div>
                                    <i class="material-icons" style="color: indigo; ">shopping_cart</i>
                                    <div style="display: inline; color: indigo;  margin-left: 10px; font-weight: bold;"
                                        id="txt_full_price">Tổng tiền đã chọn: 0$</div>
                                </div>
                            </div>
                            <div class="mdl-cell--9-col">
                                <div>
                                    <i class="material-icons" style="color: indigo;">table_view</i>
                                    <div style="display: inline; color: indigo; margin-top: 5px;  margin-left: 10px; font-weight: bold;"
                                        id="txt_full_price_discount">Tổng tiền đã chọn sau chiết khấu: 0$</div>
                                </div>
                            </div>
                        </div>
                        <div
                            style="width: 98%; overflow:hidden; overflow-x: scroll; overflow-y: scroll; margin:10px auto; height: 90vh; margin-top:20px;">
                            <div style="width: 3400px;">
                                <div class="mdl-card mdl-shadow--2dp" style="display: inline-block; width: 500px;">
                                    <div class="mdl-card__title" style="background-color: orangered; color:white;">
                                        <h2 class="mdl-card__title-text" style="margin:0 auto;" id="txt_pr_id">THÔNG TIN
                                            BÁO GIÁ</h2>
                                    </div>
                                    <div class="mdl-card__supporting-text" style="padding: 0; width: 100%;">
                                        <table class="mdl-data-table mdl-js-data-table"
                                            style="border: none; width: 100%;">
                                            <colgroup>
                                                <col style="width: 20px;">
                                                <col style="width: 300px;">
                                                <col style="width: 80px;">
                                                <col style="width: 100px;">
                                            </colgroup>
                                            <thead style="background-color: orangered;">
                                                <tr style=" height: 60px;">
                                                    <th style="color: white;">#</th>
                                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                        ITEM</th>
                                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                        ĐƠN VỊ</th>
                                                    <th style="color: white;">SỐ LƯỢNG</th>
                                                </tr>
                                            </thead>
                                            <tbody id="table_body_request">
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="mdl-card__actions mdl-card--border"
                                        style="padding:0; margin-left: 20px;">
                                        <ul class="mdl-list" style="padding: 0; margin: 0;">
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content">
                                                    <i class="material-icons mdl-list__item-icon"
                                                        style="color: red;">attach_money</i>
                                                    TỔNG TIỀN (CHƯA VAT)
                                                    <!-- <div>0</div> -->
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <i class="material-icons mdl-list__item-icon"
                                                        style="color: blue;">request_page</i>
                                                    TỔNG TIỀN (SAU CHIẾT KHẤU)
                                                    <!-- <div>0</div> -->
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <i class="material-icons mdl-list__item-icon"
                                                        style="color: green;">shop</i>
                                                    BẢO HÀNH
                                                    <!-- <div>0</div> -->
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <i class="material-icons mdl-list__item-icon"
                                                        style="color: orangered;">turned_in_not</i>
                                                    HIỆU LỰC BÁO GIÁ
                                                    <!-- <div>0</div> -->
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <i class="material-icons mdl-list__item-icon"
                                                        style="color: indigo;">filter_1</i>
                                                    DEPARTMENT MANAGER<div style="margin-left: 10px;"
                                                        id="txt_dept_result"></div>
                                                    <!-- <div>0</div> -->
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <i class="material-icons mdl-list__item-icon"
                                                        style="color: indigo;">filter_2</i>
                                                    PUR. MANAGER<div style="margin-left: 10px;" id="txt_pur_mng_result">
                                                    </div>
                                                    <!-- <div>0</div> -->
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <i class="material-icons mdl-list__item-icon"
                                                        style="color: indigo;">filter_3</i>
                                                    PLANT MANAGER<div style="margin-left: 10px;"
                                                        id="txt_operation_result"></div>
                                                    <!-- <div>0</div> -->
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <i class="material-icons mdl-list__item-icon"
                                                        style="color: indigo;">filter_4</i>
                                                    RCM<div style="margin-left: 10px;" id="txt_rcm_result"></div>
                                                    <!-- <div>0</div> -->
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <i class="material-icons mdl-list__item-icon"
                                                        style="color: indigo;">filter_5</i>
                                                    OPERATION DIRECTOR<div style="margin-left: 10px;"
                                                        id="txt_plant_result"></div>
                                                    <!-- <div>0</div> -->
                                                </span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="mdl-card mdl-shadow--2dp" style="display: inline-block; width: 500px;"
                                    id="div_vendor1">
                                    <div class="mdl-card__title" style="background-color: blue; color:white;">
                                        <h2 class="mdl-card__title-text" id="txt_vendor_1" style="margin:0 auto;">
                                            Vendor1</h2>
                                    </div>
                                    <div class="mdl-card__supporting-text" style="padding: 0; width: 100%;">
                                        <table class="mdl-data-table mdl-js-data-table mdl-shadow--6dp"
                                            style="border: none; width: 100%;">
                                            <colgroup>
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 110px;">
                                            </colgroup>
                                            <thead style="background-color: orangered;">
                                                <tr style=" height: 60px;">
                                                    <th style="color: white;">ĐƠN GIÁ</th>
                                                    <th style="color: white;">THÀNH TIỀN</th>
                                                    <th style="color: white;">L.T</th>
                                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                        XUẤT XỨ</th>
                                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                        CHỌN</th>
                                                </tr>
                                            </thead>
                                            <tbody id="table_body_vendor1">
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="mdl-card__actions mdl-card--border"
                                        style="padding:0; margin-left: 20px;">
                                        <ul class="mdl-list" style="padding: 0; margin: 0;">
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i> -->
                                                    <!-- TỔNG TIỀN (CHƯA VAT) -->
                                                    <div id="txt_price_no_vat0">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    TỔNG TIỀN (SAU CHIẾT KHẤU) -->
                                                    <div id="txt_price_discount0">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    BẢO HÀNH -->
                                                    <div id="txt_warranty0">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    BẢO HÀNH -->
                                                    <div id="txt_available0">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>

                                        </ul>
                                    </div>
                                </div>
                                <div class="mdl-card mdl-shadow--2dp" style="display: inline-block; width: 500px;"
                                    id="div_vendor2">
                                    <div class="mdl-card__title" style="background-color: blue; color:white;">
                                        <h2 class="mdl-card__title-text" id="txt_vendor_2" style="margin:0 auto;">
                                            Vendor2</h2>
                                    </div>
                                    <div class="mdl-card__supporting-text" style="padding: 0; width: 100%;">
                                        <table class="mdl-data-table mdl-js-data-table"
                                            style="border: none; width: 100%;">
                                            <colgroup>
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 110px;">
                                            </colgroup>
                                            <thead style="background-color: orangered;">
                                                <tr style=" height: 60px;">
                                                    <th style="color: white;">ĐƠN GIÁ</th>
                                                    <th style="color: white;">THÀNH TIỀN</th>
                                                    <th style="color: white;">L.T</th>
                                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                        XUẤT SỨ</th>
                                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                        CHỌN</th>
                                                </tr>
                                            </thead>
                                            <tbody id="table_body_vendor2">
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="mdl-card__actions mdl-card--border"
                                        style="padding:0; margin-left: 20px;">
                                        <ul class="mdl-list" style="padding: 0; margin: 0;">
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    TỔNG TIỀN (CHƯA VAT) -->
                                                    <div id="txt_price_no_vat1">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    TỔNG TIỀN (SAU CHIẾT KHẤU) -->
                                                    <div id="txt_price_discount1">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    BẢO HÀNH -->
                                                    <div id="txt_warranty1">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    BẢO HÀNH -->
                                                    <div id="txt_available1">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="mdl-card mdl-shadow--2dp" style="display: inline-block; width: 500px;"
                                    id="div_vendor3">
                                    <div class="mdl-card__title" style="background-color: blue; color:white;">
                                        <h2 class="mdl-card__title-text" id="txt_vendor_3" style="margin:0 auto;">
                                            Vendor3</h2>
                                    </div>
                                    <div class="mdl-card__supporting-text" style="padding: 0; width: 100%;">
                                        <table class="mdl-data-table mdl-js-data-table"
                                            style="border: none; width: 100%;">
                                            <colgroup>
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                            </colgroup>
                                            <thead style="background-color: orangered;">
                                                <tr style=" height: 60px;">
                                                    <th style="color: white;">ĐƠN GIÁ</th>
                                                    <th style="color: white;">THÀNH TIỀN</th>
                                                    <th style="color: white;">L.T</th>
                                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                        XUẤT SỨ</th>
                                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                        CHỌN</th>
                                                </tr>
                                            </thead>
                                            <tbody id="table_body_vendor3">
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="mdl-card__actions mdl-card--border"
                                        style="padding:0; margin-left: 20px;">
                                        <ul class="mdl-list" style="padding: 0; margin: 0;">
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    TỔNG TIỀN (CHƯA VAT) -->
                                                    <div id="txt_price_no_vat2">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    TỔNG TIỀN (SAU CHIẾT KHẤU) -->
                                                    <div id="txt_price_discount2">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    BẢO HÀNH -->
                                                    <div id="txt_warranty2">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    BẢO HÀNH -->
                                                    <div id="txt_available2">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="mdl-card mdl-shadow--2dp" style="display: inline-block; width: 500px;"
                                    id="div_vendor4">
                                    <div class="mdl-card__title" style="background-color: blue; color:white;">
                                        <h2 class="mdl-card__title-text" id="txt_vendor_4" style="margin:0 auto;">
                                            Vendor4</h2>
                                    </div>
                                    <div class="mdl-card__supporting-text" style="padding: 0; width: 100%;">
                                        <table class="mdl-data-table mdl-js-data-table"
                                            style="border: none; width: 100%;">
                                            <colgroup>
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                            </colgroup>
                                            <thead style="background-color: orangered;">
                                                <tr style=" height: 60px;">
                                                    <th style="color: white;">ĐƠN GIÁ</th>
                                                    <th style="color: white;">THÀNH TIỀN</th>
                                                    <th style="color: white;">L.T</th>
                                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                        XUẤT SỨ</th>
                                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                        CHỌN</th>
                                                </tr>
                                            </thead>
                                            <tbody id="table_body_vendor4">
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="mdl-card__actions mdl-card--border"
                                        style="padding:0; margin-left: 20px;">
                                        <ul class="mdl-list" style="padding: 0; margin: 0;">
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    TỔNG TIỀN (CHƯA VAT) -->
                                                    <div id="txt_price_no_vat3">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    TỔNG TIỀN (SAU CHIẾT KHẤU) -->
                                                    <div id="txt_price_discount3">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    BẢO HÀNH -->
                                                    <div id="txt_warranty3">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    BẢO HÀNH -->
                                                    <div id="txt_available3">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="mdl-card mdl-shadow--2dp" style="display: inline-block; width: 500px;"
                                    id="div_vendor5">
                                    <div class="mdl-card__title" style="background-color: blue; color:white;">
                                        <h2 class="mdl-card__title-text" id="txt_vendor_5" style="margin:0 auto;">
                                            Vendor5</h2>
                                    </div>
                                    <div class="mdl-card__supporting-text" style="padding: 0; width: 100%;">
                                        <table class="mdl-data-table mdl-js-data-table"
                                            style="border: none; width: 100%;">
                                            <colgroup>
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                            </colgroup>
                                            <thead style="background-color: orangered;">
                                                <tr style=" height: 60px;">
                                                    <th style="color: white;">ĐƠN GIÁ</th>
                                                    <th style="color: white;">THÀNH TIỀN</th>
                                                    <th style="color: white;">L.T</th>
                                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                        XUẤT SỨ</th>
                                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                        CHỌN</th>
                                                </tr>
                                            </thead>
                                            <tbody id="table_body_vendor5">
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="mdl-card__actions mdl-card--border"
                                        style="padding:0; margin-left: 20px;">
                                        <ul class="mdl-list" style="padding: 0; margin: 0;">
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    TỔNG TIỀN (CHƯA VAT) -->
                                                    <div id="txt_price_no_vat4">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    TỔNG TIỀN (SAU CHIẾT KHẤU) -->
                                                    <div id="txt_price_discount4">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    BẢO HÀNH -->
                                                    <div id="txt_warranty4">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    BẢO HÀNH -->
                                                    <div id="txt_available4">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="mdl-card mdl-shadow--2dp" style="display: inline-block; width: 500px;"
                                    id="div_vendor6">
                                    <div class="mdl-card__title" style="background-color: blue; color:white;">
                                        <h2 class="mdl-card__title-text" id="txt_vendor_6" style="margin:0 auto;">
                                            Vendor6</h2>
                                    </div>
                                    <div class="mdl-card__supporting-text" style="padding: 0; width: 100%;">
                                        <table class="mdl-data-table mdl-js-data-table"
                                            style="border: none; width: 100%;">
                                            <colgroup>
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                                <col style="width: 90px;">
                                            </colgroup>
                                            <thead style="background-color: orangered;">
                                                <tr style=" height: 60px;">
                                                    <th style="color: white;">ĐƠN GIÁ</th>
                                                    <th style="color: white;">THÀNH TIỀN</th>
                                                    <th style="color: white;">L.T</th>
                                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                        XUẤT SỨ</th>
                                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                        CHỌN</th>
                                                </tr>
                                            </thead>
                                            <tbody id="table_body_vendor6">
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="mdl-card__actions mdl-card--border"
                                        style="padding:0; margin-left: 20px;">
                                        <ul class="mdl-list" style="padding: 0; margin: 0;">
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    TỔNG TIỀN (CHƯA VAT) -->
                                                    <div id="txt_price_no_vat5">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    TỔNG TIỀN (SAU CHIẾT KHẤU) -->
                                                    <div id="txt_price_discount5">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    BẢO HÀNH -->
                                                    <div id="txt_warranty5">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                    <!-- <i class="material-icons mdl-list__item-icon">person</i>
                                                    BẢO HÀNH -->
                                                    <div id="txt_available5">0</div>
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                            <li class="mdl-list__item" style="padding: 0; margin: 0;">
                                                <span class="mdl-list__item-primary-content"
                                                    style="padding: 0; margin: 0;">
                                                </span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <!-- <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" id="btn_confirm" style="position: fixed; right: 50px; bottom: 50px; background-color: green; z-index: 10; display: none">
                                <i class="material-icons">download</i>
                            </button>
                            <div class="mdl-tooltip" data-mdl-for="btn_confirm">
                                Download
                            </div>
                            <form id="upload_form_bidding" method='POST' action='CCS/Update_PR_File_Bidding_Done' submit='return false;'>
                                <input type='file' name='file_bidding' id='file_bidding' style='display: none;'>
                                <input type='submit' id='submit_bidding' style='display: none;'>
                                <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" id="btn_upload" style="position: fixed; right: 50px; bottom: 120px; background-color: orangered; z-index: 10; display: none;">
                                    <i class="material-icons">upload</i>
                                </button>
                                
                                <div class="mdl-tooltip" data-mdl-for="btn_upload">
                                    Upload<br>Done Bidding
                                </div>
                            </form> -->
                            <!-- <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" id="btn_done" style="position: fixed; right: 50px; bottom: 190px; background-color: indigo; z-index: 10;">
                                <i class="material-icons">done</i>
                            </button> -->
                            <!-- <div class="mdl-tooltip" data-mdl-for="btn_done">
                                Confirm Bidding
                            </div>
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" id="btn_reject" style="position: fixed; right: 50px; bottom: 260px; background-color: gray; z-index: 10;">
                                <i class="material-icons">close</i>
                            </button> -->
                            <div class="mdl-tooltip" data-mdl-for="menu-lower-right">
                                Thêm...
                            </div>
                            <button id="menu-lower-right"
                                class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"
                                style="position: fixed; right: 50px; bottom: 50px; background-color: indigo; z-index: 10;">
                                <i class="material-icons">more_vert</i>
                            </button>
                            <!-- <li class="mdl-menu__item"> -->

                            <!-- </li> -->
                            <ul class="mdl-menu mdl-menu--top-right mdl-js-menu mdl-js-ripple-effect"
                                for="menu-lower-right">
                                <li class="mdl-menu__item" style="color: indigo" id="btn_3000">
                                    <i class="material-icons" style="height: 25px; vertical-align: middle;">3k_plus</i>
                                    <div style="display:inline-block">$ 3000</div>
                                </li>
                                <li class="mdl-menu__item" style="color: blue" id="btn_1000">
                                    <i class="material-icons" style="height: 25px; vertical-align: middle;">1k_plus</i>
                                    <div style="display:inline-block">$ 1000</div>
                                </li>
                                <li class="mdl-menu__item" style="color: green" id="btn_done">
                                    <i class="material-icons" style="height: 25px; vertical-align: middle;">done</i>
                                    <div style="display:inline-block">Xác nhận</div>
                                </li>
                                <li class="mdl-menu__item" style="color: red" id="btn_reject">
                                    <i class="material-icons" style="height: 25px; vertical-align: middle;">close</i>
                                    <div style="display:inline-block">Từ chối</div>
                                </li>
                                <!-- <li class="mdl-menu__item">Yet Another Action</li> -->
                            </ul>
                        </div>
                        <div id="demo-toast-example" class="mdl-js-snackbar mdl-snackbar">
                            <div class="mdl-snackbar__text">Đã cập nhật thành công</div>
                            <button class="mdl-snackbar__action" type="button"></button>
                        </div>
                    </div>
                </section>
                <section class="mdl-layout__tab-panel" id="scroll-tab-3">
                    <div class="page-content">
                        <table class="mdl-data-table mdl-js-data-table mdl-shadow--6dp"
                            style="border: none; width: 90%; margin: 10px auto;">
                            <thead style="background-color: indigo;">
                                <tr style=" height: 60px;">
                                    <th style="color: white;">STT</th>
                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">PO CODE</th>
                                    <th style="color: white;">SỐ ITEM</th>
                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">DỰ ÁN</th>
                                    <th style="color: white;">TỔNG TIỀN</th>
                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">TIỀN TỆ</th>
                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">PIC</th>
                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">URGENT</th>
                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">OVER BG</th>
                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">CREATOR</th>
                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;" id="txt_hd">HD
                                    </th>
                                    <div class="mdl-tooltip" for="txt_hd">Giám đốc bộ phận duyệt</div>
                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;" id="txt_fi">FI
                                    </th>
                                    <div class="mdl-tooltip" for="txt_fi">Kế toán duyệt<br>(Phan, Phước)</div>
                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;" id="txt_op">OP
                                    </th>
                                    <div class="mdl-tooltip" for="txt_op">Giám đốc vận hành duyệt<br>(Lê, Tân / Đặng,
                                        Loan)</div>
                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;" id="txt_pm">PM
                                    </th>
                                    <div class="mdl-tooltip" for="txt_pm">Giám đốc nhà máy duyệt<br>(Võ, Lưu)</div>
                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;" id="txt_od">OD
                                    </th>
                                    <div class="mdl-tooltip" for="txt_od">Giám đốc vùng duyệt<br>(Phan, Tuấn)</div>
                                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">ACTION</th>
                                </tr>
                            </thead>
                            <tbody id="table_body_PO">
                            </tbody>
                        </table>
                    </div>
                </section>
                <section class="mdl-layout__tab-panel" id="scroll-tab-4">
                    <div class="page-content">
                        <div class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect" style="margin: 10px auto;">
                            <div id="tab_list" class="mdl-tabs__tab-bar" style="border: none">
                                <a href="#PRICE_LIST" class="mdl-tabs__tab is-active">PRICE LIST</a>
                                <a href="#VENDOR" class="mdl-tabs__tab">VENDOR</a>
                                <a href="#PIC" class="mdl-tabs__tab" onclick="fnc_pic()">PIC</a>
                            </div>
                            <div class="mdl-tabs__panel is-active" id="PRICE_LIST">
                                <div class="mdl-grid" style="width: 100%;">
                                    <div class="mdl-textfield mdl-js-textfield" style="margin: 10px auto;">
                                        <input class="mdl-textfield__input" type="text" id="txt_item_find">
                                        <label class="mdl-textfield__label" for="txt_item_find">Find Item, PR...</label>
                                    </div>
                                </div>
                                <div class="mdl-shadow--6dp"
                                    style="background-color: transparent; padding: 0; width: 90%; overflow: auto; margin: 10px auto;">
                                    <table class="mdl-data-table mdl-js-data-table"
                                        style="border: none; width: 100%; height: 90%; margin: 10px auto;">
                                        <colgroup>
                                            <col span="1" style="width: 10px;">
                                        </colgroup>
                                        <thead style="background-color: orange;">
                                            <tr style=" height: 60px;">
                                                <th style="color: white;">#</th>
                                                <th class="mdl-data-table__cell--non-numeric" style="color: white;">PR
                                                </th>
                                                <th class="mdl-data-table__cell--non-numeric" style="color: white;">ITEM
                                                </th>
                                                <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                    TIẾNG VIỆT</th>
                                                <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                    TIẾNG ANH</th>
                                                <th class="mdl-data-table__cell--non-numeric" style="color: white;">ĐVT
                                                </th>
                                                <th style="color: white;">Đ.G</th>
                                                <th style="color: white;">C.K</th>
                                                <th class="mdl-data-table__cell--non-numeric" style="color: white;">T.T
                                                </th>
                                                <th style="color: white;">S.L</th>
                                                <th style="color: white;">C.P</th>
                                                <th style="color: white;">L.T</th>
                                                <th class="mdl-data-table__cell--non-numeric" style="color: white;">G.C
                                                </th>
                                                <th class="mdl-data-table__cell--non-numeric" style="color: white;">H.H
                                                </th>
                                                <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                    ACTION</th>
                                            </tr>
                                        </thead>
                                        <tbody id="table_body_quotation">
                                        </tbody>
                                    </table>
                                </div>

                                <a class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-shadow--6dp"
                                    id="btn_download_pricelist"
                                    style="position: fixed; bottom: 50px; right: 50px; background-color: green;"
                                    href="../Python/Finance/CCS/Template/ccs_pricelist_template.xlsx"
                                    download="ccs_pricelist_template.xlsx">
                                    <i class="material-icons">download</i>
                                </a>
                                <form id="upload_form_price_list" method='POST' action='CCS/Upload_PriceList_File'
                                    submit='return false;'>
                                    <input type='file' name='file_price_list' id='file_price_list'
                                        style='display: none;'>
                                    <input type='submit' id='submit_price_list' style='display: none;'>
                                    <button
                                        class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-shadow--6dp"
                                        id="btn_pricelist"
                                        style="position: fixed; bottom: 120px; right: 50px; background-color: red;">
                                        <i class="material-icons">fact_check</i>
                                    </button>
                                </form>
                                <div class="mdl-tooltip" for="btn_download_pricelist">Template<br>PriceList</div>
                                <div class="mdl-tooltip" for="btn_pricelist">Upload<br>PriceList</div>
                            </div>
                            <div class="mdl-tabs__panel" id="VENDOR">
                                <div class="mdl-grid" style="width: 100%;">
                                    <div class="mdl-textfield mdl-js-textfield" style="margin: 10px auto;">
                                        <input class="mdl-textfield__input" type="text" id="txt_vendor_find">
                                        <label class="mdl-textfield__label" for="txt_vendor_find"><i
                                                class="material-icons">search</i></label>
                                    </div>
                                </div>
                                <table class="mdl-data-table mdl-js-data-table mdl-shadow--6dp"
                                    style="border-radius: 10px; border: none; width: 80%; overflow: hidden; margin: 10px auto;">
                                    <thead style="background-color: green;">
                                        <tr style=" height: 60px;" style="border-radius: 10px;">
                                            <th style="color: white;">#</th>
                                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                VENDOR_NUM</th>
                                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                VENDOR_LOC</th>
                                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                VENDOR_NAME</th>
                                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">EMAIL
                                            </th>
                                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">STATUS
                                            </th>
                                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">UPDATE
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id="table_body_vendor">
                                    </tbody>
                                </table>
                                <a class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-shadow--6dp"
                                    id="btn_download_vendor"
                                    style="position: fixed; bottom: 50px; right: 50px; background-color: green;"
                                    href="../Python/Finance/CCS/Template/ccs_vendor_template.xlsx"
                                    download="ccs_vendor_template.xlsx">
                                    <i class="material-icons">download</i>
                                </a>
                                <form id="upload_form_vendor" method='POST' action='CCS/Update_Vendor_File'
                                    submit='return false;'>
                                    <input type='file' name='file_vendor' id='file_vendor' style='display: none;'>
                                    <input type='submit' id='submit_vendor' style='display: none;'>
                                    <button
                                        class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-shadow--6dp"
                                        id="btn_vendor"
                                        style="position: fixed; bottom: 120px; right: 50px; background-color: red;">
                                        <i class="material-icons">email</i>
                                    </button>
                                </form>
                                <div class="mdl-tooltip" for="btn_download_vendor">Template<br>Vendor</div>
                                <div class="mdl-tooltip" for="btn_vendor">Upload<br>Vendor</div>
                            </div>
                            <div class="mdl-tabs__panel" id="PIC">
                                <table class="mdl-data-table mdl-js-data-table mdl-shadow--6dp"
                                    style="border-radius: 10px; border: none; width: 500px; overflow: hidden; margin: 10px auto;">
                                    <thead style="background-color: blue;">
                                        <tr style=" height: 60px;" style="border-radius: 10px;">
                                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">#</th>
                                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">CATEGORY
                                            </th>
                                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                PURCHASER</th>
                                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">
                                                TimeUpdate</th>
                                        </tr>
                                    </thead>
                                    <tbody id="table_body_purchaser">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
    </div>
    <dialog class="mdl-dialog" id="dialog_detail"
        style="width: 80%; border-radius: 15px; border: none; padding: 0; overflow: visible;">
        <table class="mdl-data-table mdl-js-data-table"
            style="border-radius: 10px; border: none; width: 100%; overflow: hidden;">
            <thead style="background-color: green;">
                <tr style=" height: 60px;" style="border-radius: 10px;">
                    <th style="color: white;">#</th>
                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">ITEM</th>
                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">TIẾNG VIỆT</th>
                    <th style="color: white;">SỐ LƯỢNG</th>
                    <th style="color: white;">ĐƠN VỊ</th>
                    <th style="color: white;">ĐƠN GIÁ</th>
                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">TIỀN TỆ</th>
                    <th style="color: white;">LEADTIME</th>
                    <th class="mdl-data-table__cell--non-numeric" style="color: white;">EXPIRED</th>
                </tr>
            </thead>
            <tbody id="table_body_PO_temp">
            </tbody>
        </table>
        <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" id="btn_close"
            style="background-color: red; color: white; position:absolute; top:-15px; right:-15px;">
            <i class="material-icons">close</i>
        </button>
    </dialog>
    <dialog id="dialog_create_pr"
        style="width: 99%; border-radius: 10px; border: none; padding: 0; background-color: transparent; overflow: hidden; overflow-y: scroll;">
        <link rel="stylesheet" href="/JS/getmdl/getmdl-select.min.css" />
        <script defer src="/JS/getmdl/getmdl-select.min.js"></script>
        <div class="mdl-grid" style="width: 100%; padding:0;">
            <div class="mdl-cell mdl-cell--3-col mdl-shadow--6dp" style="background-color: white; padding: 0;">
                <div class="mdl-card mdl-shadow--2dp" style="width: 100%; padding: 0;">
                    <div class="mdl-card__title" style="background-color: green; color: white;">
                        <h3 class="mdl-card__title-text" id="txt_request_ID"></h3>
                    </div>
                    <div class="mdl-card__supporting-text">
                        <div style="width: 100%; color:red;">
                            Thông tin Item
                        </div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" id="txt_item" style="color: black;">
                            <label class="mdl-textfield__label" for="txt_item">Tên item</label>
                        </div>
                        <div class="mdl-textfield mdl-js-textfield">
                            <textarea class="mdl-textfield__input" type="text" rows="4" id="txt_specification"
                                maxlength="2000" style="color: black;"></textarea>
                            <label class="mdl-textfield__label" for="txt_specification">Quy cách</label>
                        </div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" id="txt_origin" style="color: black;">
                            <label class="mdl-textfield__label" for="txt_origin">Xuất sứ sản phẩm</label>
                        </div>
                        <div id="cbb_unit_div"
                            class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height">
                            <input type="text" value="" class="mdl-textfield__input" id="cbb_unit" readonly
                                style="color: black;">
                            <input type="hidden" value="" name="cbb_unit">
                            <i class="mdl-icon-toggle__label material-icons">keyboard_arrow_down</i>
                            <label for="cbb_unit" class="mdl-textfield__label">Đơn vị</label>
                            <ul for="cbb_unit" class="mdl-menu mdl-menu--bottom-left mdl-js-menu" id="cbb_unit_list"
                                style="height: 200px;">
                            </ul>
                        </div>
                        <hr>
                        <div style="width: 100%; color:red;">
                            Bộ phận Mua hàng nhập
                        </div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" id="txt_IDItem" style="color: black;">
                            <label class="mdl-textfield__label" for="txt_IDItem">ID Item</label>
                        </div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
                            style="display: none;">
                            <input class="mdl-textfield__input" type="text" id="txt_vietnamese" style="color: black;">
                            <label class="mdl-textfield__label" for="txt_IDItem">Tên tiếng Anh</label>
                        </div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" id="txt_english" style="color: black;">
                            <label class="mdl-textfield__label" for="txt_IDItem">Tên tiếng Việt</label>
                        </div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="number" id="txt_price" style="color: black;">
                            <label class="mdl-textfield__label" for="txt_price">Giá</label>
                        </div>
                        <div id="div_cbb_currency"
                            class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height">
                            <input type="text" value="" class="mdl-textfield__input" id="cbb_currency" readonly
                                style="color: black;">
                            <input type="hidden" value="" name="cbb_currency">
                            <i class="mdl-icon-toggle__label material-icons">keyboard_arrow_down</i>
                            <label for="cbb_currency" class="mdl-textfield__label">Tiền tệ</label>
                            <ul for="cbb_currency" class="mdl-menu mdl-menu--bottom-left mdl-js-menu"
                                id="list_cbb_currency" style="height: 150px;">
                                <li class='mdl-menu__item' data-val="VND">VND</item>
                                <li class='mdl-menu__item' data-val="USD">USD</item>
                                <li class='mdl-menu__item' data-val="EUR">EUR</item>
                            </ul>
                        </div>
                        <!-- <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                <input class="mdl-textfield__input" type="text" id="txt_lawson" style="color: black;">
                                <label class="mdl-textfield__label" for="txt_lawson">Lawson</label>
                            </div> -->
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" id="txt_vendor" style="color: black;">
                            <label class="mdl-textfield__label" for="txt_vendor">Vendor</label>
                        </div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="number" id="txt_leadtime" style="color: black;">
                            <label class="mdl-textfield__label" for="txt_leadtime">Leadtime (Số ngày)</label>
                        </div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="date" id="txt_expired" style="color: black;">
                            <label class="mdl-textfield__label" for="txt_expired">Hết hạn</label>
                        </div>
                    </div>
                    <div class="mdl-card__actions mdl-card--border">
                        <button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                            id="btn_update_item_request"
                            style="background-color: green; color: white; border-radius: 20px; margin-left: 10px;">
                            CẬP NHẬT
                            <i class="material-icons">update</i>
                        </button>
                        <button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                            id="btn_update_item_close"
                            style="background-color: orangered; color: white; border-radius: 20px; margin-left: 20px;">
                            THOÁT
                            <i class="material-icons">close</i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="mdl-cell mdl-cell--9-col mdl-shadow--6dp" style="background-color: white;">
                <table class="mdl-data-table mdl-js-data-table" style="border: none; width: 100%;">
                    <colgroup>
                        <!-- <col span="1" style="width: 20px;">
                            <col span="1" style="width: 60%;">
                            <col span="1" style="width: 20px;"> -->
                        <!-- <col span="1" style="width: 20px;">
                            <col span="1" style="width: 20px;">
                            <col span="1" style="width: 20px;"> -->
                    </colgroup>
                    <thead style="background-color: orangered;">
                        <tr style=" height: 60px;">
                            <th style="color: white;">#</th>
                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">ITEM</th>
                            <!-- <th class="mdl-data-table__cell--non-numeric" style="color: white;">ITEM</th> -->
                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">ĐƠN VỊ</th>
                            <th style="color: white;">QUANTITY</th>
                            <th style="color: white;">PRICE</th>
                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">CURRENCY</th>
                            <!-- <th class="mdl-data-table__cell--non-numeric" style="color: white;">CURRENCY</th> -->
                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">VENDOR</th>
                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">ESTIMATED</th>
                            <th class="mdl-data-table__cell--non-numeric" style="color: white;">ACTION</th>
                        </tr>
                    </thead>
                    <tbody id="table_body">
                    </tbody>
                </table>
            </div>
        </div>
    </dialog>
    <dialog style="border-radius: 10px; border: none; padding: 0; background-color: transparent;"
        id="dialog_change_purchaser">
        <div class="demo-card-wide mdl-card mdl-shadow--2dp" style="width: 400px; border-radius: 10px;">
            <div class="mdl-card__title" style="background-color: indigo; color: white; ">
                <h3 class="mdl-card__title-text" id="txt_request_ID_change"></h3>
                <!-- <div id="txt_PO_ID"></div>
                    </h2> -->
            </div>
            <div class="mdl-card__supporting-text" style=" height: 300px;">
                <div id="div_cbb_purchaser_ch"
                    class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height"
                    style="width: 250px;">
                    <input type="text" value="" class="mdl-textfield__input" id="cbb_purchaser_ch" readonly
                        style="color: black">
                    <input type="hidden" value="" name="cbb_purchaser_ch">
                    <label for="cbb_purchaser_ch" class="mdl-textfield__label">PIC</label>
                    <ul for="cbb_purchaser_ch" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-shadow--8dp"
                        style="color: black; height: 200px;" id="list_cbb_purchaser_ch">
                        <li class="mdl-menu__item" data-val="TRINH THI THU HA">TRINH THI THU HA</li>
                        <li class="mdl-menu__item" data-val="HOANG THI QUE">HOANG THI QUE</li>
                        <li class="mdl-menu__item" data-val="LE NGUYEN HANH PHUNG">LE NGUYEN HANH PHUNG</li>
                        <li class="mdl-menu__item" data-val="NGUYEN THI DIEU HIEN">NGUYEN THI DIEU HIEN</li>
                        <li class="mdl-menu__item" data-val="NGUYEN THI LAN NHI">NGUYEN THI LAN NHI</li>
                        <li class="mdl-menu__item" data-val="TRAN THI MY KIM">TRAN THI MY KIM</li>
                        <li class="mdl-menu__item" data-val="DUONG THI KIM DUNG">DUONG THI KIM DUNG</li>
                        <li class="mdl-menu__item" data-val="DUONG THI PHUONG">DUONG THI PHUONG</li>
                        <li class="mdl-menu__item" data-val="NGUYEN QUE GIANG">NGUYEN QUE GIANG</li>
                        <li class="mdl-menu__item" data-val="HOANG THI THAO">HOANG THI THAO</li>
                        <li class="mdl-menu__item" data-val="DO THI KHANH DUNG">DO THI KHANH DUNG</li>
                    </ul>
                </div>
            </div>
            <div class="mdl-card__actions mdl-card--border">
                <button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                    id="btn_purchaser_done_change">
                    <i class="material-icons">update</i>
                    CẬP NHẬT
                </button>
            </div>
            <div class="mdl-card__menu">
                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect"
                    id="btn_purchaser_close_change" style="background-color: red; color: white;">
                    <i class="material-icons">close</i>
                </button>
            </div>
        </div>
    </dialog>
    <dialog style="border-radius: 10px; border: none; padding: 0; background-color: transparent;"
        id="dialog_change_purchaser_pr">
        <div class="demo-card-wide mdl-card mdl-shadow--2dp" style="width: 400px; border-radius: 10px;">
            <div class="mdl-card__title" style="background-color: indigo; color: white; ">
                <h3 class="mdl-card__title-text" id="txt_pr_ID_change"></h3>
                <!-- <div id="txt_PO_ID"></div>
                    </h2> -->
            </div>
            <div class="mdl-card__supporting-text" style=" height: 300px;">
                <div id="div_cbb_purchaser_ch_pr"
                    class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height"
                    style="width: 250px;">
                    <input type="text" value="" class="mdl-textfield__input" id="cbb_purchaser_ch_pr" readonly
                        style="color: black">
                    <input type="hidden" value="" name="cbb_purchaser_ch_pr">
                    <label for="cbb_purchaser_ch_pr" class="mdl-textfield__label">PIC</label>
                    <ul for="cbb_purchaser_ch_pr" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-shadow--8dp"
                        style="color: black; height: 250px;" id="list_cbb_purchaser_ch_pr">
                        <li class="mdl-menu__item" data-val="TRINH THI THU HA">TRINH THI THU HA</li>
                        <li class="mdl-menu__item" data-val="HOANG THI QUE">HOANG THI QUE</li>
                        <li class="mdl-menu__item" data-val="LE NGUYEN HANH PHUNG">LE NGUYEN HANH PHUNG</li>
                        <li class="mdl-menu__item" data-val="NGUYEN THI DIEU HIEN">NGUYEN THI DIEU HIEN</li>
                        <li class="mdl-menu__item" data-val="NGUYEN THI LAN NHI">NGUYEN THI LAN NHI</li>
                        <li class="mdl-menu__item" data-val="HOANG THI QUE">HOANG THI QUE</li>
                        <li class="mdl-menu__item" data-val="TRAN THI MY KIM">TRAN THI MY KIM</li>
                        <li class="mdl-menu__item" data-val="DUONG THI KIM DUNG">DUONG THI KIM DUNG</li>
                        <li class="mdl-menu__item" data-val="DUONG THI PHUONG">DUONG THI PHUONG</li>
                        <li class="mdl-menu__item" data-val="NGUYEN QUE GIANG">NGUYEN QUE GIANG</li>
                        <li class="mdl-menu__item" data-val="HOANG THI THAO">HOANG THI THAO</li>
                        <li class="mdl-menu__item" data-val="DO THI KHANH DUNG">DO THI KHANH DUNG</li>
                    </ul>
                </div>
            </div>
            <div class="mdl-card__actions mdl-card--border">
                <button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                    id="btn_purchaser_done_change_pr">
                    <i class="material-icons">update</i>
                    CẬP NHẬT
                </button>
            </div>
            <div class="mdl-card__menu">
                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect"
                    id="btn_purchaser_close_change_pr" style="background-color: red; color: white;">
                    <i class="material-icons">close</i>
                </button>
            </div>
        </div>
    </dialog>
    <dialog style="border-radius: 10px; border: none; padding: 0; background-color: transparent;"
        id="dialog_change_purchaser_category">
        <div class="demo-card-wide mdl-card mdl-shadow--2dp" style="width: 400px; border-radius: 10px;">
            <div class="mdl-card__title" style="background-color: indigo; color: white; ">
                <h3 class="mdl-card__title-text" id="txt_purchaser_category"></h3>
                <!-- <div id="txt_PO_ID"></div>
                    </h2> -->
            </div>
            <div class="mdl-card__supporting-text" style=" height: 300px;">
                <div id="div_cbb_purchaser_category"
                    class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height"
                    style="width: 300px; margin: 10px auto;">
                    <input type="text" value="" class="mdl-textfield__input" id="cbb_purchaser_category" readonly
                        style="color: black;">
                    <input type="hidden" value="" name="cbb_purchaser_category">
                    <label for="cbb_purchaser_category" class="mdl-textfield__label">PIC</label>
                    <ul for="cbb_purchaser_category" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-shadow--8dp"
                        style="color: black; height: 200px;" id="list_cbb_purchaser_category">
                        <li class="mdl-menu__item" data-val="TRINH THI THU HA">TRINH THI THU HA</li>
                        <li class="mdl-menu__item" data-val="HOANG THI QUE">HOANG THI QUE</li>
                        <li class="mdl-menu__item" data-val="LE NGUYEN HANH PHUNG">LE NGUYEN HANH PHUNG</li>
                        <li class="mdl-menu__item" data-val="NGUYEN THI DIEU HIEN">NGUYEN THI DIEU HIEN</li>
                        <li class="mdl-menu__item" data-val="NGUYEN THI LAN NHI">NGUYEN THI LAN NHI</li>
                        <li class="mdl-menu__item" data-val="HOANG THI QUE">HOANG THI QUE</li>
                        <li class="mdl-menu__item" data-val="TRAN THI MY KIM">TRAN THI MY KIM</li>
                        <li class="mdl-menu__item" data-val="DUONG THI KIM DUNG">DUONG THI KIM DUNG</li>
                        <li class="mdl-menu__item" data-val="DUONG THI PHUONG">DUONG THI PHUONG</li>
                        <li class="mdl-menu__item" data-val="NGUYEN QUE GIANG">NGUYEN QUE GIANG</li>
                        <li class="mdl-menu__item" data-val="HOANG THI THAO">HOANG THI THAO</li>
                        <li class="mdl-menu__item" data-val="DO THI KHANH DUNG">DO THI KHANH DUNG</li>
                    </ul>
                </div>
            </div>
            <div class="mdl-card__actions mdl-card--border">
                <button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                    id="btn_purchaser_category_done">
                    <i class="material-icons">update</i>
                    CẬP NHẬT
                </button>
            </div>
            <div class="mdl-card__menu">
                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect"
                    id="btn_purchaser_category_close" style="background-color: red; color: white;">
                    <i class="material-icons">close</i>
                </button>
            </div>
        </div>
    </dialog>
    <dialog style="border-radius: 10px; border: none; padding: 0; background-color: transparent; height: 900px;"
        id="dialog_item_infor">
        <div class="demo-card-wide mdl-card mdl-shadow--2dp" style="width: 500px; border-radius: 10px;">
            <div class="mdl-card__title" style="background-color: green; color: white; ">
                <h3 class="mdl-card__title-text" id="txt_item_infor"></h3>
                <!-- <div id="txt_PO_ID"></div>
                    </h2> -->
            </div>
            <div class="mdl-card__supporting-text">
                <div id="txt_item_vendor" style="color: indigo; margin-top: 10px;"></div>
                <div id="txt_item_vendor_cd" style="color: indigo; margin-top: 10px;"></div>
                <div id="txt_item_qty" style="color: indigo; margin-top: 10px;"></div>
                <div id="txt_item_unit" style="color: indigo; margin-top: 10px;"></div>
                <div id="txt_item_price" style="color: indigo; margin-top: 10px;"></div>
                <div id="txt_item_currency" style="color: indigo; margin-top: 10px;"></div>
                <div id="txt_item_usd" style="color: indigo; margin-top: 10px;"></div>
                <div id="txt_item_discount" style="color: indigo; margin-top: 10px;"></div>
                <div id="txt_item_leadtime" style="color: indigo; margin-top: 10px;"></div>
                <div id="txt_item_expired" style="color: indigo; margin-top: 10px;"></div>
                <div id="txt_item_orgin" style="color: indigo; margin-top: 10px;"></div>
                <div id="txt_item_warranty" style="color: indigo; margin-top: 10px;"></div>
                <div id="txt_item_moq" style="color: indigo; margin-top: 10px;"></div>
                <div id="txt_item_file" style="color: indigo; margin-top: 10px;"></div>
                <div id="txt_item_note" style="color: indigo; margin-top: 10px;"></div>
            </div>
            <div class="mdl-card__menu">
                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" id="btn_item_infor_close"
                    style="background-color: red; color: white;">
                    <i class="material-icons">close</i>
                </button>
            </div>
        </div>
    </dialog>
    <dialog style="border-radius: 10px; border: none; padding: 0; background-color: transparent;"
        id="dialog_change_status">
        <div class="demo-card-wide mdl-card mdl-shadow--2dp" style="width: 400px; border-radius: 10px;">
            <div class="mdl-card__title" style="background-color: indigo; color: white; ">
                <h3 class="mdl-card__title-text" id="txt_request_ID_status"></h3>
                <!-- <div id="txt_PO_ID"></div>
                    </h2> -->
            </div>
            <div class="mdl-card__supporting-text" style=" height: 300px;">
                <div id="div_cbb_status_ch"
                    class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height"
                    style="width: 250px;">
                    <input type="text" value="" class="mdl-textfield__input" id="cbb_status_ch" readonly
                        style="color: black;">
                    <input type="hidden" value="" name="cbb_status_ch">
                    <label for="cbb_status_ch" class="mdl-textfield__label">Status</label>
                    <ul for="cbb_status_ch" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-shadow--8dp"
                        style="color: black" id="list_cbb_status_ch">
                        <li class="mdl-menu__item" data-val="Request">Request</li>
                        <li class="mdl-menu__item" data-val="Bidding">Bidding</li>
                        <li class="mdl-menu__item" data-val="Process">Process</li>
                        <li class="mdl-menu__item" data-val="Reject">Reject</li>
                        <li class="mdl-menu__item" data-val="Quotation">Quotation</li>
                    </ul>
                </div>
            </div>
            <div class="mdl-card__actions mdl-card--border">
                <button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                    id="btn_status_done_change">
                    <i class="material-icons">update</i>
                    CẬP NHẬT
                </button>
            </div>
            <div class="mdl-card__menu">
                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect"
                    id="btn_status_close_change" style="background-color: red; color: white;">
                    <i class="material-icons">close</i>
                </button>
            </div>
        </div>
    </dialog>
    <dialog class="mdl-dialog" id="dialog_send_pr_vendor"
        style="width: 450px; height: 650px; padding: 0; overflow:hidden; border-radius: 10px;">
        <div class="mdl-card mdl-shadow--2dp" style="width: 100%; height: 100%;">
            <div class="mdl-card__title" style="background-color: green; color: white;">
                <h2 class="mdl-card__title-text" id="txt_pr_for_vendor">Gửi vendor báo giá</h2>
            </div>
            <div class="mdl-card__supporting-text" style="height: 550px;">
                <div id="div_cbb_vendor_email"
                    class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height"
                    style="margin: 0 auto; width: 400px;">
                    <input type="text" value="" class="mdl-textfield__input" id="cbb_vendor_email" style="color: black">
                    <input type="hidden" value="" name="cbb_vendor_email">
                    <label for="cbb_vendor_email" class="mdl-textfield__label">Search Vendor</label>
                    <ul for="cbb_vendor_email" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-shadow--8dp"
                        id="list_cbb_vendor_email">
                    </ul>
                </div>
                <div class="mdl-textfield mdl-js-textfield" style="width: 400px;">
                    <input class="mdl-textfield__input" type="text" id="txt_pr_email" style="color:black;" readonly>
                    <label class="mdl-textfield__label" for="txt_pr_email">Email</label>
                </div>
                <div class="mdl-textfield mdl-js-textfield" style="width: 400px;">
                    <input class="mdl-textfield__input" type="password" id="txt_pr_pass" style="color:black;">
                    <label class="mdl-textfield__label" for="txt_pr_pass">Password</label>
                </div>
                <div>Đính kèm:</div>
                <div class="mdl-grid" style="padding: 0;">
                    <div class="mdl-cell mdl-cell--12-col">
                        <label for="file_attach" id="lable_file">
                            <i class="material-icons"
                                style="margin:0px auto; color:indigo; vertical-align: middle; cursor: pointer;">attach_file</i>
                        </label>
                        <div class="mdl-tooltip" data-mdl-for="lable_file" style="font-size: 11px;">Click here</div>
                        <form id='upload_form_attach' submit='return false;' method='POST'
                            action='/CCS/Upload_Vendor_Attachment' style="width: fit-content; display: none;">
                            <input type='file' name='file_attach' id='file_attach' style="width: 80%; display: none;"
                                onchange="load_file_attach(this)">
                            <input type='submit' id='submit_attach' style='display: none;'>
                            <button
                                class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"
                                id="btn_upload_attach" style="display: none;">
                            </button>
                        </form>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
                            style="margin-left: 10px; width: 80%;">
                            <input class="mdl-textfield__input" type="text" id="txt_attach_link" disabled>
                            <label class="mdl-textfield__label" for="txt_attach_link">Attach File</label>
                        </div>
                    </div>
                    <script>
                        function load_file_attach(x) {
                            document.getElementById('btn_upload_attach').click();
                        }
                        var form_attach = document.getElementById('upload_form_attach');
                        form_attach.addEventListener('submit', e => {
                            e.preventDefault();
                            return false;
                        })
                        document.getElementById('btn_upload_attach').addEventListener('click', function () {
                            document.getElementById('file_attach').click();
                            document.getElementById('file_attach').onchange = function () {
                                if (document.getElementById('file_attach').value != '') document.getElementById('submit_attach').click();
                            }
                            form_attach.addEventListener('submit', e => {
                                if (document.getElementById('file_attach').value != '') {
                                    e.preventDefault();
                                    var xsend = new XMLHttpRequest();
                                    xsend.onreadystatechange = function () {
                                        if (this.readyState == 4 && this.status == 200) {
                                            //done
                                            result = xsend.responseText;
                                            console.log(result);
                                            if (result == 'done') {
                                                alert('File đính kèm đã được cập nhật!');
                                                document.getElementById('file_attach').value = '';
                                            }
                                        }
                                    }
                                    var fileInput = document.getElementById('file_attach');
                                    var file;
                                    file = fileInput.files[0];
                                    extention = file['name'].split('.').pop();
                                    console.log(file['name'].split('.').pop());
                                    new_name = document.getElementById('txt_pr_for_vendor').innerHTML + '.' + extention;
                                    var formData = new FormData();
                                    formData.append('file', file, new_name);
                                    document.getElementById('txt_attach_link').value = new_name;
                                    document.getElementById('txt_attach_link').parentNode.classList.add('is-dirty');
                                    document.getElementById('txt_attach_link').blur();
                                    if (file != null) {
                                        xsend.open('POST', '/CCS/Upload_Vendor_Attachment', true);
                                        xsend.send(formData);
                                    }
                                }
                                return false;
                            })
                        })
                    </script>
                </div>
                <div>Nội dung:</div>
                <div class="mdl-textfield mdl-js-textfield" style="width: 400px;">
                    <textarea class="mdl-textfield__input" type="text" rows="15" id="txt_pr_contend"
                        style="color: black">
Kính gửi nhà cung cấp,
Dear Value supplier, 
Bộ phận Mua hàng Công ty TNHH Hanesbrands Việt Nam gửi thông tin yêu cầu báo giá đính kèm 
We- Purchasing Team of Hanesbrands Viet Nam would like to send the“ Goods information bidding request” as attachment. 
Quý Công ty vui lòng gửi báo giá theo các yêu cầu như bên dưới:
Please kindly send the quotation as following information: 
Thời hạn chào giá:  đến hết ngày        
The deadline of quotatation’ submission:    before           
Địa điểm giao hàng: Nhà máy HBI Phú Bài – Huế- Địa chỉ: Lô C2-6 & C2-7 KCN Phú Bài- Hương Thủy- TT Huế
Shipped to: HANESBRANDS VIET NAM HUE- Addressed: Lot C2-6 & C2-7 Pu Bai Industrial Zone- Phu Bai Ward- Huong Thuy district- Thua Thien Hue Province
Điều kiện thanh toán: 120 ngày kể từ ngày xuất hóa đơn
The Payment term: 120 days from the shipping date
    Hiệu lực báo giá: đến hết ngày       
The quotation will be valid to 
    Yêu cầu nhà cung cấp điền đầy đủ các thông tin theo mẫu yêu cầu chào giá của HBI đính kèm, và gửi lại cho bộ phận Mua hàng qua email theo địa chỉ sau HBI_Phubai_Purchasers@hanes.com
Please find the attached fil & fill in the all the information at the “Vendor” part for quotation and send back the update file via this email HBI_Phubai_Purchasers@hanes.com
Lưu ý: Nếu báo giá hàng hóa thay thế, quý nhà cung cấp vui lòng ghi rõ thông tin hàng thay thế ở cột ghi chú (tên sản phẩm, mã sản phẩm, thông số, xuất xứ, ...)
Please be noted that if any change of part name or part number or Origin or any replaced part,…, please note the change at column W ”NOTE” 
                            
                        </textarea>
                    <label class="mdl-textfield__label" for="txt_pr_contend">Nội dung</label>
                </div>
            </div>
            <div class="mdl-card__actions mdl-card--border">
                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" id="btn_download_pr">
                    Tải báo giá<i class="material-icons">download</i>
                </a>
                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" id="btn_send_pr">
                    Gửi báo giá<i class="material-icons">mail</i>
                </a>
            </div>
            <div class="mdl-card__menu">
                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect"
                    style="border-radius: 20px; background-color: red; color: white;" id="btn_pr_send_close">
                    <i class="material-icons">close</i>
                </button>
            </div>
        </div>
    </dialog>
</body>
<script>
    var tzoffset = (new Date()).getTimezoneOffset() * 60000; //offset in milliseconds
    var localISOTime = (new Date(Date.now() - tzoffset)).toISOString().slice(0, -1).substring(0, 10);
    var rawTime = (new Date(Date.now() - tzoffset)).toISOString().slice(0, -1);
    table_body = document.getElementById('table_body');
    table_body_PR = document.getElementById('table_body_PR');
    document.getElementById('txt_expired').value = localISOTime
    function init_month_year() {
        var tzoffset = (new Date()).getTimezoneOffset() * 60000; //offset in milliseconds
        var localISOTime = (new Date(Date.now() - tzoffset)).toISOString().slice(0, -1);
        var month = localISOTime.substring(5, 7);
        var year = localISOTime.substring(0, 4);
        $('ul[for="cbb_month"] li[data-val="' + parseInt(month) + '"]').attr('data-selected', true);
        $('ul[for="cbb_year"]  li[data-val="' + year + '"]').attr('data-selected', true);
        // getmdlSelect.init('#div_cbb_month');
        // getmdlSelect.init('#div_cbb_year');
        // componentHandler.upgradeAllRegistered();
        fnc_current_purchaser()
        fnc_pic();
        load_request_PR();
        // get_employee_infor(month, quater, year);
    }
    function load_price(req_id) {
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Get_Bidding_Price", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data1 = JSON.parse(xsend.responseText);
                console.log(data1)
                document.getElementById('txt_full_price').innerHTML = "Tổng tiền đã chọn: $" + data1[0].totalUSD;
                document.getElementById('txt_full_price_discount').innerHTML = "Tổng tiền đã chọn sau chiết khấu: $" + data1[0].totalUSD_discount;
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data_send = { req_id: req_id }
        xsend.send(JSON.stringify(data_send));
    }
    function fnc_current_purchaser() {
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/Get_User_Infor", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(xsend.responseText);

                $('ul[for="cbb_purchaser"]  li[data-val="' + data[0].Name + '"]').attr('data-selected', true);
                getmdlSelect.init('#div_cbb_purchaser');
                load_request_PR(month, year);
                load_order_PO(month, year);
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        xsend.send();
    }
    function load_note(req_id) {
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/get_note_bidding", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                result = JSON.parse(xsend.responseText);
                console.log(result)
                if (result.length > 0) {
                    if (result[0].staffNote != null) document.getElementById('txt_staff_note_bidding').innerHTML = "Nhân viên ghi chú: " + result[0].staffNote;
                    if (result[0].deptNote != null) document.getElementById('txt_dept_note_bidding').innerHTML = "Bộ phận ghi chú: " + result[0].deptNote;
                    document.getElementById('txt_note_bidding').value = result[0].purNote;
                    document.getElementById('txt_note_bidding').parentNode.classList.add('is-dirty');
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { pr_id: req_id }
        xsend.send(JSON.stringify(data));
    }
    // document.getElementById('toggle_search_vendor_pr').addEventListener('change', function(){
    //     isChecked=document.getElementById('toggle_search_vendor_pr').checked;
    //     if (isChecked==false) {
    //         document.getElementById('list_pr_vendor').style.display='none';
    //     } else document.getElementById('list_pr_vendor').style.display='grid';
    // });
    vendor_div = document.getElementById('list_cbb_vendor_email');
    table_body_quotation = document.getElementById('table_body_quotation');
    table_body_vendor = document.getElementById('table_body_vendor');
    document.getElementById('btn_item_infor_close').addEventListener('click', function () {
        document.getElementById('dialog_item_infor').close()
    });
    document.getElementById('cbb_vendor_email').addEventListener('keyup', function () {
        vendor_email = document.getElementById('cbb_vendor_email').value;
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Get_Vendor_Email", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(xsend.responseText);
                while (vendor_div.childNodes.length > 0)
                    vendor_div.removeChild(vendor_div.childNodes[0]);
                for (var i = 0; i < data.length; i++) {
                    li = document.createElement('li');
                    li.setAttribute('class', 'mdl-menu__item');
                    if (data[i].Email == null || data[i].Email == '' || data[i].Email == 'INVAILID') continue;
                    li.innerHTML = data[i].Email;
                    sessionStorage.setItem(data[i].Email, data[i].ID)
                    vendor_div.appendChild(li);
                }
                getmdlSelect.init('#div_cbb_vendor_email');
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { vendor_email: vendor_email }
        xsend.send(JSON.stringify(data));
    })
    document.getElementById('btn_pr_send_close').addEventListener('click', function () {
        document.getElementById('dialog_send_pr_vendor').close();
        window.reload();
    });
    document.getElementById('btn_send_pr').addEventListener('click', function () {
        requestID = document.getElementById('txt_pr_for_vendor').innerHTML
        vendor_email = document.getElementById('cbb_vendor_email').value;
        if (vendor_email == '') {
            alert('Vendor Email is empty!');
            return;
        }
        vendor_id = sessionStorage.getItem(vendor_email)
        purchase_email = document.getElementById('txt_pr_email').value;
        if (purchase_email == '') {
            alert('Hãy nhập email để gửi mail đến vendor!');
            return;
        }
        purchase_pass = document.getElementById('txt_pr_pass').value;
        if (purchase_pass == '') {
            alert('Hãy nhập password để gửi mail đến vendor!');
            return;
        }
        contend = document.getElementById('txt_pr_contend').value;
        if (contend == '') {
            alert('Hãy nhập nội dung cho mail gửi vendor')
        }
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Send_PR_to_vendor", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = xsend.responseText;
                if (data != 'fail') {
                    if (data == 'Sai mật khẩu') alert('Sai mật khẩu, hãy thử lại!');
                    else alert('Đã gửi Báo giá đến vendor');
                } else {
                    alert('Đã có lỗi xảy ra!');
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");

        data = { vendor: vendor_email, vendor_id: vendor_id, user_purchaser: purchase_email, pass_purchaser: purchase_pass, contend: contend, requestID: requestID };
        xsend.send(JSON.stringify(data));
    });
    document.getElementById('btn_download_pr').addEventListener('click', function () {
        requestID = document.getElementById('txt_pr_for_vendor').innerHTML
        vendor_email = document.getElementById('cbb_vendor_email').value;
        if (vendor_email == '') {
            alert('Vendor Email is empty!');
            return;
        }
        vendor_id = sessionStorage.getItem(vendor_email)
        purchase_email = document.getElementById('txt_pr_email').value;
        if (purchase_email == '') {
            alert('Hãy nhập email để gửi mail đến vendor!');
            return;
        }
        purchase_pass = document.getElementById('txt_pr_pass').value;
        // if (purchase_pass==''){
        //     alert('Hãy nhập password để gửi mail đến vendor!');
        //     return;
        // }
        contend = document.getElementById('txt_pr_contend').value;
        if (contend == '') {
            alert('Hãy nhập nội dung cho mail gửi vendor')
        }
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Download_PR_to_vendor", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = xsend.responseText;
                if (!data.includes('fail')) {
                    a = document.createElement('a');
                    a.setAttribute('href', '../Python/Finance/CCS/Export/' + data);
                    a.click();
                } else {
                    alert('Đã có lỗi xảy ra: ' + data.split(';')[1]);
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");

        data = { vendor: vendor_email, vendor_id: vendor_id, user_purchaser: purchase_email, pass_purchaser: purchase_pass, contend: contend, requestID: requestID };
        xsend.send(JSON.stringify(data));
    })
    function load_request_item_temp(requestID) {
        document.getElementById('txt_request_ID').innerHTML = requestID;
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Get_Request_Item_Temp", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(xsend.responseText);
                sessionStorage.setItem(requestID, xsend.responseText);
                while (table_body.childNodes.length > 0)
                    table_body.removeChild(table_body.childNodes[0]);
                for (var i = 0; i < data.length; i++) {
                    var tr = document.createElement("tr");
                    //stt
                    var tdSTT = document.createElement("td");
                    var node = document.createTextNode(i + 1);
                    tdSTT.appendChild(node);
                    tr.appendChild(tdSTT);
                    //Item name
                    var tdItem = document.createElement("td");
                    tdItem.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Item);
                    sessionStorage.setItem(data[i].Item, JSON.stringify(data[i]))
                    tdItem.appendChild(node);
                    tr.appendChild(tdItem);
                    //tdUnit
                    var tdUnit = document.createElement("td");
                    tdUnit.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].UnitName);
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //tdQuan
                    var tdQuan = document.createElement("td");
                    var node = document.createTextNode(data[i].Quantity);
                    tdQuan.appendChild(node);
                    tr.appendChild(tdQuan);
                    //price
                    var tdprice = document.createElement("td");
                    total = Math.round(data[i].Price * 100) / 100
                    total = total.toLocaleString('en-US', { minimumFractionDigits: 0 });
                    var node = document.createTextNode(total);
                    if (data[i].Price == null) node = document.createTextNode('');
                    tdprice.appendChild(node);
                    tr.appendChild(tdprice);
                    //currency
                    var tdcurrency = document.createElement("td");
                    tdcurrency.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Currency);
                    if (data[i].Currency == null) node = document.createTextNode('');
                    tdcurrency.appendChild(node);
                    tr.appendChild(tdcurrency);
                    //vendor
                    var tdvendor = document.createElement("td");
                    tdvendor.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node;//=document.createTextNode(data[i].VendorName.substring(0,20));
                    if (data[i].Vendor == null) node = document.createTextNode('');
                    else node = document.createTextNode(data[i].VendorName.substring(0, 20));
                    tdvendor.appendChild(node);
                    tr.appendChild(tdvendor);
                    //tdEs
                    var tdEs = document.createElement("td");
                    tdEs.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var timeUpdate = (new Date(data[i].Estimated)).toLocaleString("en-US", { timeZone: "Asia/Bangkok" }).split(',')[0];
                    var node = document.createTextNode(timeUpdate);
                    tdEs.appendChild(node);
                    tr.appendChild(tdEs)
                    //btn more
                    var tdMore = document.createElement("td");
                    tdMore.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var div = document.createElement("div");
                    var button = document.createElement("button");
                    button.setAttribute("class", "mdl-button mdl-js-button mdl-button--icon");
                    button.setAttribute("id", "button_more" + i);
                    // button.setAttribute("onclick", "attach_file_download(this)");
                    var icon = document.createElement("i");
                    icon.setAttribute("class", "material-icons");
                    icon.innerHTML = "more_vert";
                    componentHandler.upgradeElement(icon);
                    button.appendChild(icon);
                    componentHandler.upgradeElement(button);
                    var ul = document.createElement("ul");
                    ul.setAttribute("class", "mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect");
                    ul.setAttribute("for", "button_more" + i);
                    var li1 = document.createElement("li");
                    li1.setAttribute("class", "mdl-menu__item");
                    li1.setAttribute("onclick", "fnc_detail(this)");
                    li1.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: green'>edit</i>Cập nhật";
                    var li3 = document.createElement("li");
                    li3.setAttribute("class", "mdl-menu__item");
                    if (data[i].Price == null)
                        li3.setAttribute("onclick", "fnc_remove(this)");
                    else
                        li3.setAttribute('disabled', true)
                    li3.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: red'>delete</i>Remove";
                    status = sessionStorage.getItem(requestID);
                    // if (status!='None') li3.setAttribute('disabled', 'true');
                    componentHandler.upgradeElement(li1);
                    componentHandler.upgradeElement(li3);
                    ul.appendChild(li1);
                    ul.appendChild(li3);
                    tdMore.appendChild(button);
                    tdMore.appendChild(ul);
                    tr.appendChild(tdMore);
                    table_body.appendChild(tr);
                    componentHandler.upgradeElement(tr);
                    componentHandler.upgradeDom('MaterialMenu', 'mdl-menu');
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { requestID: requestID }
        xsend.send(JSON.stringify(data));
    }
    function add_request_item_temp(item, requestID) {
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Add_Request_Item_Temp", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = xsend.responseText;
                if (data == 'done') {
                    alert('Đã lưu Item!');
                    load_request_item_temp(requestID)
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { item: JSON.stringify(item), requestID: requestID };
        xsend.send(JSON.stringify(data));
    }
    load_currency()
    function load_currency() {
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Get_Currency", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(xsend.responseText);
                sessionStorage.setItem('VND', data[0].VND);
                sessionStorage.setItem('EUR', data[0].EUR);
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        xsend.send();
    }
    function load_request_PR(month, year) {
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Get_Request_Summary", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(xsend.responseText);
                console.log('hello')
                console.log(data)
                quotation_sort = document.getElementById('cbb_quotation').value;
                dept_sort = document.getElementById('cbb_dept').value;
                pic_sort = document.getElementById('cbb_purchaser').value;
                dept_sort = "";
                while (table_body_PR.childNodes.length > 0)
                    table_body_PR.removeChild(table_body_PR.childNodes[0]);
                for (var i = 0; i < data.length; i++) {

                    if ('Quotation' == quotation_sort && data[i].Req_Status != 'Quotation') continue;
                    if ('Request' == quotation_sort && data[i].Req_Status != 'Request') continue;
                    if ('Bidding' == quotation_sort && data[i].Req_Status != 'Bidding') continue;
                    if ('Process' == quotation_sort && data[i].Req_Status != 'Process') continue;
                    if ('Reject' == quotation_sort && data[i].Req_Status != 'Reject') continue;
                    // purchaser_spec=document.getElementById('cbb_purchaser')
                    if ('all' != pic_sort.toLowerCase() && pic_sort != 'HOANG THI QUE' && pic_sort != "TRINH THI THU HA") {
                        pic = data[i].Purchaser;
                        if (pic != pic_sort) continue;
                    }

                    var tr = document.createElement("tr");
                    //stt
                    var tdSTT = document.createElement("td");
                    var node = document.createTextNode(i + 1);
                    tdSTT.appendChild(node);
                    tr.appendChild(tdSTT);
                    //Item name
                    var tdItem = document.createElement("td");
                    tdItem.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].RequestID);
                    sessionStorage.setItem(data[i].RequestID + '_PR_infor', JSON.stringify(data[i]))
                    tdItem.appendChild(node);
                    if (data[i].Attached_File != '' && data[i].Attached_File != null) {
                        // tdItem.setAttribute('href', '../Python/Finance/CCS/Upload/Attachment/'+data[i].Attached_File)
                        tdItem.setAttribute('style', 'cursor: pointer; color: green; font-weight: bold');
                        tdItem.setAttribute('onclick', 'func_download_attached("' + data[i].Attached_File + '")')
                    }
                    tr.appendChild(tdItem);
                    //Project name
                    var tdItem = document.createElement("td");
                    tdItem.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Project.substr(0, 20) + '...');
                    tdItem.setAttribute('onmouseover', 'display_project_pr(this)');
                    tdItem.setAttribute('onmouseout', 'hide_project_pr(this)');
                    tdItem.style.cursor = 'pointer';
                    tdItem.appendChild(node);
                    tr.appendChild(tdItem);
                    //tdUnit
                    var tdUnit = document.createElement("td");
                    var node = document.createTextNode(data[i].Items);
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //tdUser
                    var tdUser = document.createElement("td");
                    tdUser.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].RequestID.substr(0, 2));
                    tdUser.appendChild(node);
                    tr.appendChild(tdUser);
                    //tdDept
                    var tdDept = document.createElement("td");
                    tdDept.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    full_name = data[i].Staff.split(' ');
                    family_name = full_name[0];
                    last_name = full_name[full_name.length - 1]
                    var div_name = document.createElement('a');
                    div_name.setAttribute('href', 'mailto:' + data[i].Email + '?subject=' + data[i].RequestID);
                    div_name.innerHTML = family_name + ', ' + last_name//nameL[nameL.length-1]
                    var node = div_name//document.createTextNode();
                    tdDept.appendChild(node);
                    tr.appendChild(tdDept);
                    //tdEs
                    var tdEs = document.createElement("td");
                    tdEs.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var timeUpdate = (new Date(data[i].Estimated)).toLocaleString("en-US", { timeZone: "Asia/Bangkok" }).split(',')[0];
                    var node = document.createTextNode(timeUpdate);
                    tdEs.appendChild(node);
                    tr.appendChild(tdEs)
                    //tdQuan
                    var tdQuan = document.createElement("td");
                    tdQuan.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Req_Status);
                    if (data[i].Req_Status == 'Quotation') tdQuan.setAttribute('style', 'color: green; font-weight: bold;');
                    else if (data[i].Req_Status == 'Request') tdQuan.setAttribute('style', 'color: indigo; font-weight: bold;')
                    else if (data[i].Req_Status == 'Process') tdQuan.setAttribute('style', 'color: indigo; font-weight: bold;')
                    else if (data[i].Req_Status == 'Bidding') tdQuan.setAttribute('style', 'color: blue; font-weight: bold;')
                    else if (data[i].Req_Status == 'Reject') tdQuan.setAttribute('style', 'color: red; font-weight: bold;')
                    sessionStorage.setItem(data[i].RequestID, data[i].Req_Status);
                    tdQuan.appendChild(node);
                    tr.appendChild(tdQuan);

                    //LEVEL
                    var tdItem = document.createElement("td");
                    tdItem.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    nameL = data[i].Purchaser.split(' ');
                    var node = document.createTextNode(nameL[nameL.length - 1]);
                    tdItem.appendChild(node);
                    tr.appendChild(tdItem);
                    //Purchaser
                    var tdItem = document.createElement("td");
                    tdItem.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    sup = '';
                    if (data[i].Sup_Result != null) sup = 'Sup';
                    if (data[i].Result_1000 != null) sup = '1k';
                    if (data[i].Operation_Result != null) sup = 'Opr';
                    if (data[i].Result_3000 != null) sup = '3k';
                    if (data[i].Plant_Result != null) sup = 'Pln';

                    var node = document.createTextNode(sup);
                    tdItem.appendChild(node);
                    tr.appendChild(tdItem);
                    //btn more
                    var tdMore = document.createElement("td");
                    tdMore.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var div = document.createElement("div");
                    var button = document.createElement("button");
                    button.setAttribute("class", "mdl-button mdl-js-button mdl-button--icon");
                    button.setAttribute("id", "button_more_rq" + i);
                    // button.setAttribute("onclick", "attach_file_download(this)");
                    var icon = document.createElement("i");
                    icon.setAttribute("class", "material-icons");
                    icon.innerHTML = "more_vert";
                    // componentHandler.upgradeElement(icon);
                    button.appendChild(icon);
                    componentHandler.upgradeElement(button);
                    var ul = document.createElement("ul");
                    ul.setAttribute("class", "mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect");
                    ul.setAttribute("for", "button_more_rq" + i);
                    // ul.setAttribute("style", "overflow: visible")
                    var li1 = document.createElement("li");
                    li1.setAttribute("class", "mdl-menu__item");
                    li1.setAttribute("onclick", "function_detail_rq(this)");
                    li1.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: green'>insert_comment</i>Chi tiết";
                    var li2 = document.createElement("li");
                    li2.setAttribute("class", "mdl-menu__item");
                    li2.setAttribute("onclick", "function_excel_rq(this)");
                    li2.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: orangered'>download</i>Tải xuống";
                    var li3 = document.createElement("li");
                    li3.setAttribute("class", "mdl-menu__item");
                    li3.setAttribute("onclick", "function_send_vendor_rq(this)");
                    li3.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: indigo;'>email</i>Gửi Vendor";
                    var li4 = document.createElement("li");
                    li4.setAttribute("class", "mdl-menu__item");
                    li4.setAttribute("onclick", "function_return_rq(this)");
                    li4.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: red'>cancel</i>Từ chối";
                    var li5 = document.createElement("li");
                    li5.setAttribute("class", "mdl-menu__item");
                    li5.setAttribute("onclick", "function_bidding_rq(this)");
                    li5.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: blue'>find_replace</i>Bidding";
                    var li6 = document.createElement("li");
                    li6.setAttribute("class", "mdl-menu__item");
                    li6.setAttribute("onclick", "function_process_rq(this)");
                    li6.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: blue'>settings</i>Process";
                    var li7 = document.createElement("li");
                    li7.setAttribute("class", "mdl-menu__item");
                    li7.setAttribute("onclick", "function_change_status_rq(this)");
                    li7.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: indigo'>settings</i>Status";
                    var li8 = document.createElement("li");
                    li8.setAttribute("class", "mdl-menu__item");
                    li8.setAttribute("onclick", "function_change_pic_rq(this)");
                    li8.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: orangered'>update</i>Purchaser";
                    ul.appendChild(li1);
                    ul.appendChild(li7);
                    componentHandler.upgradeElement(li1);
                    if (data[i].Req_Status != 'Reject') {
                        componentHandler.upgradeElement(li2);
                        componentHandler.upgradeElement(li3);
                        if (data[i].Req_Status == 'Bidding') {
                            ul.appendChild(li2);
                            // ul.appendChild(li8);
                        }
                        ul.appendChild(li3);
                    }
                    if (data[i].Req_Status == 'Request') {
                        componentHandler.upgradeElement(li4);
                        ul.appendChild(li4);
                        // ul.appendChild(li6);
                        ul.appendChild(li8);
                    }
                    if (data[i].Req_Status == 'Bidding') {
                        componentHandler.upgradeElement(li5);
                        ul.appendChild(li5);
                        // ul.appendChild(li8);
                    }
                    tdMore.appendChild(button);
                    tdMore.appendChild(ul);
                    tr.appendChild(tdMore);

                    table_body_PR.appendChild(tr);
                    componentHandler.upgradeElement(tr);
                    componentHandler.upgradeDom('MaterialMenu', 'mdl-menu');
                }
            }
        }
        purchaser = document.getElementById('cbb_purchaser').value;
        if ('ALL' == purchaser) purchaser = "";
        if ('ALL' == month) month = 0
        xsend.setRequestHeader("Content-type", "application/json");
        data = { month: month, year: year, purchaser: purchaser }
        xsend.send(JSON.stringify(data));
    }
    function display_project_pr(x) {
        orderID = x.parentNode.childNodes[1].innerHTML;
        po_infor = sessionStorage.getItem(orderID + '_PR_infor');
        x.parentNode.childNodes[2].innerHTML = JSON.parse(po_infor).Project;
    }
    function hide_project_pr(x) {
        orderID = x.parentNode.childNodes[1].innerHTML;
        po_infor = sessionStorage.getItem(orderID + '_PR_infor');
        x.parentNode.childNodes[2].innerHTML = JSON.parse(po_infor).Project.substr(0, 20) + '...';
    }
    function func_download_attached(file) {
        a = document.createElement('a');
        a.setAttribute('href', '../Python/Finance/CCS/Upload/Attachment/' + file);
        a.click();
    }
    function function_change_status_rq(x) {
        req_id = x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
        document.getElementById('txt_request_ID_status').innerHTML = req_id;
        document.getElementById('dialog_change_status').showModal();
    }
    function function_change_pic_rq(x) {
        req_id = x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
        document.getElementById('txt_request_ID_change').innerHTML = req_id;
        document.getElementById('dialog_change_purchaser').showModal();
    }
    function function_process_rq(x) {
        req_id = x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Process_Request", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                alert('Đã cập nhật trạng thái Request!');
                location.reload()
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { req_id: req_id }
        xsend.send(JSON.stringify(data));
    }
    function function_bidding_rq(x) {
        req_id = x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
        document.getElementById('txt_pr_id').innerHTML = req_id;
        load_bidding_detail(req_id);
        load_note(req_id);
        document.querySelectorAll("a[href='#scroll-tab-1']")[0].click();
    }
    function clear_table() {
        while (table_body_request.childNodes.length > 0) table_body_request.removeChild(table_body_request.childNodes[0]);
        while (table_body_vendor6.childNodes.length > 0) table_body_vendor6.removeChild(table_body_vendor6.childNodes[0]);
        while (table_body_vendor1.childNodes.length > 0) table_body_vendor1.removeChild(table_body_vendor1.childNodes[0]);
        while (table_body_vendor2.childNodes.length > 0) table_body_vendor2.removeChild(table_body_vendor2.childNodes[0]);
        while (table_body_vendor3.childNodes.length > 0) table_body_vendor3.removeChild(table_body_vendor3.childNodes[0]);
        while (table_body_vendor4.childNodes.length > 0) table_body_vendor4.removeChild(table_body_vendor4.childNodes[0]);
        while (table_body_vendor5.childNodes.length > 0) table_body_vendor5.removeChild(table_body_vendor5.childNodes[0]);
        document.getElementById('txt_price_no_vat0').innerHTML = 0;
        document.getElementById('txt_price_no_vat1').innerHTML = 0;
        document.getElementById('txt_price_no_vat2').innerHTML = 0;
        document.getElementById('txt_price_no_vat3').innerHTML = 0;
        document.getElementById('txt_price_no_vat4').innerHTML = 0;
        document.getElementById('txt_price_no_vat5').innerHTML = 0;

        document.getElementById('txt_price_discount0').innerHTML = 0;
        document.getElementById('txt_price_discount1').innerHTML = 0;
        document.getElementById('txt_price_discount2').innerHTML = 0;
        document.getElementById('txt_price_discount3').innerHTML = 0;
        document.getElementById('txt_price_discount4').innerHTML = 0;
        document.getElementById('txt_price_discount5').innerHTML = 0;

        document.getElementById('txt_warranty0').innerHTML = 0;
        document.getElementById('txt_warranty1').innerHTML = 0;
        document.getElementById('txt_warranty2').innerHTML = 0;
        document.getElementById('txt_warranty3').innerHTML = 0;
        document.getElementById('txt_warranty4').innerHTML = 0;
        document.getElementById('txt_warranty5').innerHTML = 0;

        document.getElementById('txt_available0').innerHTML = 0;
        document.getElementById('txt_available1').innerHTML = 0;
        document.getElementById('txt_available2').innerHTML = 0;
        document.getElementById('txt_available3').innerHTML = 0;
        document.getElementById('txt_available4').innerHTML = 0;
        document.getElementById('txt_available5').innerHTML = 0;

        // document.getElementById('txt_dept_result').innerHTML        ='DEPARTMENT MANAGER'
        // document.getElementById('txt_pur_mng_result').innerHTML     ='PUR. MANAGER'
        // document.getElementById('txt_operation_result').innerHTML   ='OPERATION MANAGER'
        // document.getElementById('txt_rcm_result').innerHTML         ='RCM'
        // document.getElementById('txt_plant_result').innerHTML       ='PLANT MANAGER'
    }
    function set_display(num_of_vendor) {
        switch (num_of_vendor) {
            case 0:
                document.getElementById('div_vendor1').style.display = "none";
                document.getElementById('div_vendor2').style.display = "none";
                document.getElementById('div_vendor3').style.display = "none";
                document.getElementById('div_vendor4').style.display = "none";
                document.getElementById('div_vendor5').style.display = "none";
                document.getElementById('div_vendor6').style.display = "none";
                break;
            case 1:
                document.getElementById('div_vendor1').style.display = "inline-block";
                document.getElementById('div_vendor2').style.display = "none";
                document.getElementById('div_vendor3').style.display = "none";
                document.getElementById('div_vendor4').style.display = "none";
                document.getElementById('div_vendor5').style.display = "none";
                document.getElementById('div_vendor6').style.display = "none";
                break;
            case 2:
                document.getElementById('div_vendor1').style.display = "inline-block";
                document.getElementById('div_vendor2').style.display = "inline-block";
                document.getElementById('div_vendor3').style.display = "none";
                document.getElementById('div_vendor4').style.display = "none";
                document.getElementById('div_vendor5').style.display = "none";
                document.getElementById('div_vendor6').style.display = "none";
                break;
            case 3:
                document.getElementById('div_vendor1').style.display = "inline-block";
                document.getElementById('div_vendor2').style.display = "inline-block";
                document.getElementById('div_vendor3').style.display = "inline-block";
                document.getElementById('div_vendor4').style.display = "none";
                document.getElementById('div_vendor5').style.display = "none";
                document.getElementById('div_vendor6').style.display = "none";
                break;
            case 4:
                document.getElementById('div_vendor1').style.display = "inline-block";
                document.getElementById('div_vendor2').style.display = "inline-block";
                document.getElementById('div_vendor3').style.display = "inline-block";
                document.getElementById('div_vendor4').style.display = "inline-block";
                document.getElementById('div_vendor5').style.display = "none";
                document.getElementById('div_vendor6').style.display = "none";
                break;
            case 5:
                document.getElementById('div_vendor1').style.display = "inline-block";
                document.getElementById('div_vendor2').style.display = "inline-block";
                document.getElementById('div_vendor3').style.display = "inline-block";
                document.getElementById('div_vendor4').style.display = "inline-block";
                document.getElementById('div_vendor5').style.display = "inline-block";
                document.getElementById('div_vendor6').style.display = "none";
                break;
        }
    }
    function vendor_display(vendor_list) {
        for (var i = 0; i < vendor_list.length; i++) {
            document.getElementById('txt_vendor_' + (i + 1)).innerHTML = vendor_list[i];
        }
    }
    function fnc_item_detail(data) {
        console.log(data)
        document.getElementById('txt_item_infor').innerHTML = data.ITEM;
        document.getElementById('txt_item_vendor').innerHTML = 'Vendor: ' + '<b>' + data.NAME + '</b>';
        document.getElementById('txt_item_vendor_cd').innerHTML = 'Vendor Code: ' + '<b>' + data.VENDOR + '</b>';
        document.getElementById('txt_item_qty').innerHTML = 'Số Lượng: ' + '<b>' + data.QUANTITY + '</b>';
        document.getElementById('txt_item_unit').innerHTML = 'Đơn Vị: ' + '<b>' + data.UNIT + '</b>';
        document.getElementById('txt_item_currency').innerHTML = 'Tiền Tệ: ' + '<b>' + data.CURRENCY + '</b>';
        document.getElementById('txt_item_usd').innerHTML = 'Theo USD: ' + '<b>' + data.USD + '</b>';
        document.getElementById('txt_item_discount').innerHTML = 'Chiết Khấu: ' + '<b>' + data.DISCOUNT * 100 + '%' + '</b>';
        document.getElementById('txt_item_leadtime').innerHTML = 'Lead time: ' + '<b>' + data.LEADTIME + ' Ngày' + '</b>';
        document.getElementById('txt_item_expired').innerHTML = 'Ngày Hết Hạn: ' + '<b>' + data.EXPIRED.split('T')[0] + '</b>';
        document.getElementById('txt_item_orgin').innerHTML = 'Xuất xứ: ' + '<b>' + data.ORIGIN + '</b>';
        document.getElementById('txt_item_warranty').innerHTML = 'Bảo Hành: ' + '<b>' + data.WARRANTY + ' Tháng' + '</b>';
        document.getElementById('txt_item_moq').innerHTML = 'MOQ: ' + '<b>' + Math.round(data.MOQ * data.QUANTITY) + '</b>';
        document.getElementById('txt_item_file').innerHTML = 'File: ' + '<b>' + data.FILE + '</b>';
        document.getElementById('txt_item_note').innerHTML = 'Vendor Ghi Chú: ' + '<b>' + data.VENDOR_NOTE + '</b>';
        document.getElementById('dialog_item_infor').showModal();
    }
    function load_bidding_detail(req_id) {
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Get_Bidding_Infor", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(xsend.responseText);
                console.log(data)
                item_list = new Array();
                item_detail_list = new Array();
                vendor_list = new Array();
                vendor_name_list = new Array();
                vendor_infor = new Array();
                if (data.length > 0) {
                    sup_timeUpdate = '';
                    op_timeUpdate = '';
                    plt_timeUpdate = '';
                    k1_timeUpdate = '';
                    k3_timeUpdate = '';
                    if (data[0].SUP_TIMEUPDATE != null) {
                        sup_timeUpdate = (new Date(data[0].SUP_TIMEUPDATE)).toLocaleString("en-US", { timeZone: "Asia/Bangkok" }).split(',')[0];
                    }
                    if (data[0].SUBPLANT_TIMEUPDATE != null) {
                        op_timeUpdate = (new Date(data[0].SUBPLANT_TIMEUPDATE)).toLocaleString("en-US", { timeZone: "Asia/Bangkok" }).split(',')[0];
                    }
                    if (data[0].PLANT_TIMEUPDATE != null) {
                        plt_timeUpdate = (new Date(data[0].PLANT_TIMEUPDATE)).toLocaleString("en-US", { timeZone: "Asia/Bangkok" }).split(',')[0];
                    }
                    if (data[0].K1_TIMEUPDATE != null) {
                        k1_timeUpdate = (new Date(data[0].K1_TIMEUPDATE)).toLocaleString("en-US", { timeZone: "Asia/Bangkok" }).split(',')[0];
                    }
                    if (data[0].K3_TIMEUPDATE != null) {
                        k3_timeUpdate = (new Date(data[0].K3_TIMEUPDATE)).toLocaleString("en-US", { timeZone: "Asia/Bangkok" }).split(',')[0];
                    }
                    // if (data[0].SUP_USER=="ltdang"){
                    //     sup_timeUpdate=(new Date(data[0].SUP_TIMEUPDATE)).toLocaleString("en-US", {timeZone: "Asia/Bangkok"}).split(',')[0];
                    // }
                    if (data[0].SUP_RESULT == 'Y') document.getElementById('txt_dept_result').innerHTML = '<div style="color: green">Approved - ' + sup_timeUpdate + '</div>';
                    else if (data[0].SUP_RESULT == 'N') document.getElementById('txt_dept_result').innerHTML = '<div style="color: red">Rejected (' + data[0].SUP_NOTE + ' - ' + sup_timeUpdate + ')' + '</div>';
                    if (data[0].SUBPLANT_RESULT == 'Y') document.getElementById('txt_operation_result').innerHTML = '<div style="color: green">Approved - ' + op_timeUpdate + '</div>'
                    else if (data[0].SUBPLANT_RESULT == 'N') document.getElementById('txt_operation_result').innerHTML = '<div style="color: red">Rejected (' + data[0].SUBPLANT_NOTE + ' - ' + op_timeUpdate + ')' + '</div>';
                    if (data[0].PLANT_RESULT == 'Y') document.getElementById('txt_plant_result').innerHTML = '<div style="color: green">Approved - ' + plt_timeUpdate + '</div>'
                    else if (data[0].PLANT_RESULT == 'N') document.getElementById('txt_plant_result').innerHTML = '<div style="color: red">Rejected (' + data[0].PLANT_NOTE + ' - ' + plt_timeUpdate + ')' + '</div>';
                    if (data[0].K1_RESULT == 'Y') document.getElementById('txt_pur_mng_result').innerHTML = '<div style="color: green">Approved - ' + k1_timeUpdate + '</div>'
                    else if (data[0].K1_RESULT == 'N') document.getElementById('txt_plant_result').innerHTML = '<div style="color: red">Rejected (' + data[0].K1_NOTE + ' - ' + k1_timeUpdate + ')' + '</div>';
                    if (data[0].K3_RESULT == 'Y') document.getElementById('txt_rcm_result').innerHTML = '<div style="color: green">Approved - ' + k3_timeUpdate + '</div>'
                    else if (data[0].K3_RESULT == 'N') document.getElementById('txt_plant_result').innerHTML = '<div style="color: red">Rejected (' + data[0].K3_NOTE + ' - ' + k3_timeUpdate + ')' + '</div>';
                }
                for (var i = 0; i < data.length; i++) {
                    item = data[i].ITEM;
                    if (item_list.indexOf(item) == -1) {
                        item_list.push(data[i].ITEM);
                        item_detail_list.push({ Item: data[i].ITEM, Unit: data[i].UNIT, Quantity: data[i].QUANTITY });
                    }
                    vendor_id_element = data[i].VENDOR;
                    if (vendor_list.indexOf(vendor_id_element) == -1) {
                        vendor_list.push(vendor_id_element);
                        vendor_name_list.push(data[i].NAME)
                    }
                }
                set_display(vendor_list.length);
                vendor_display(vendor_name_list)
                clear_table();
                for (var i = 0; i < item_detail_list.length; i++) {
                    var tr = document.createElement("tr");
                    tr.setAttribute('style', 'height: 50px;')
                    //stt
                    var tdSTT = document.createElement("td");
                    tdSTT.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(i + 1);
                    tdSTT.setAttribute('style', 'color: black;');
                    tdSTT.appendChild(node);
                    tr.appendChild(tdSTT);
                    //Item name
                    var tdItem = document.createElement("td");
                    tdItem.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(item_detail_list[i].Item.substring(0, 40));
                    tdItem.appendChild(node);
                    tdItem.setAttribute('style', 'color: black;')
                    tr.appendChild(tdItem);
                    //tdUnit
                    var tdUnit = document.createElement("td");
                    tdUnit.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(item_detail_list[i].Unit);
                    tdUnit.appendChild(node);
                    tdUnit.setAttribute('style', 'color: black;')
                    tr.appendChild(tdUnit);
                    //tdUnit
                    var tdQuantity = document.createElement("td");
                    tdQuantity.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(item_detail_list[i].Quantity);
                    tdQuantity.appendChild(node);
                    tdQuantity.setAttribute('style', 'color: black;')
                    tr.appendChild(tdQuantity);
                    table_body_request.appendChild(tr);
                    componentHandler.upgradeElement(tr);
                    console.log(item_detail_list[i].Quantity)
                }
                price_no_vat1 = 0;
                price_discount1 = 0;
                warranty1 = 0;
                price_no_vat2 = 0;
                price_discount2 = 0;
                warranty2 = 0;
                price_no_vat3 = 0;
                price_discount3 = 0;
                warranty3 = 0;
                price_no_vat4 = 0;
                price_discount4 = 0;
                warranty4 = 0;
                price_no_vat5 = 0;
                price_discount5 = 0;
                warranty5 = 0;
                price_no_vat0 = 0;
                price_discount0 = 0;
                warranty0 = 0;

                available0 = 0;
                available1 = 0;
                available2 = 0;
                available3 = 0;
                available4 = 0;
                available5 = 0;

                for (var i = 0; i < item_detail_list.length; i++) {
                    item = item_detail_list[i].Item;
                    min_price_vendor = 100000000000000000
                    for (var j = 0; j < data.length; j++) {
                        if (data[j].ITEM == item)
                            if (min_price_vendor > data[j].PRICE) min_price_vendor = data[j].PRICE
                    }
                    for (var j = 0; j < vendor_list.length; j++) {
                        var tr = document.createElement("tr");
                        tr.setAttribute('style', 'height: 50px')
                        vendor = vendor_list[j];
                        is_exist_item_in_vendor = false;
                        for (var k = 0; k < data.length; k++) {
                            if (vendor == data[k].VENDOR && item == data[k].ITEM) {
                                is_exist_item_in_vendor = true;
                                if (j == 0) {
                                    //Price
                                    var tdItem = document.createElement("td");
                                    total = data[k].PRICE.toLocaleString('en-US', { minimumFractionDigits: 0 });
                                    var node = document.createTextNode(total);
                                    if (data[k].PRICE == min_price_vendor) tdItem.setAttribute('style', 'color: green; font-weight: bold;')
                                    else tdItem.setAttribute('style', 'color: black;')
                                    tdItem.appendChild(node);
                                    tr.appendChild(tdItem);
                                    //Total
                                    var tdUnit = document.createElement("td");
                                    total = (data[k].PRICE * data[k].QUANTITY).toLocaleString('en-US', { minimumFractionDigits: 0 });
                                    // if (data[k].CHECKED=='Y')
                                    // {
                                    price_no_vat0 += data[k].PRICE * data[k].QUANTITY;
                                    price_discount0 += data[k].PRICE * data[k].QUANTITY * (1 - data[k].DISCOUNT);
                                    // }
                                    warranty0 = data[k].WARRANTY;
                                    available0 = data[k].EXPIRED;
                                    var node = document.createTextNode(total);
                                    tdUnit.setAttribute('style', 'color: black;')
                                    tdUnit.appendChild(node);
                                    tr.appendChild(tdUnit);
                                    //LeadTime
                                    var tdQuantity = document.createElement("td");
                                    var node = document.createTextNode(data[k].LEADTIME);
                                    tdQuantity.setAttribute('style', 'color: black;');
                                    tdQuantity.appendChild(node);
                                    tr.appendChild(tdQuantity);
                                    //Origin
                                    var tdQuantity = document.createElement("td");
                                    tdQuantity.setAttribute("class", "mdl-data-table__cell--non-numeric");
                                    var node = document.createTextNode(data[k].ORIGIN.substring(0, 12));
                                    tdQuantity.setAttribute('style', 'color: black;')
                                    tdQuantity.appendChild(node);
                                    tr.appendChild(tdQuantity);
                                    //IsCheck
                                    var tdQuantity = document.createElement("td");
                                    tdQuantity.setAttribute("class", "mdl-data-table__cell--non-numeric");
                                    var label = document.createElement('label');
                                    label.setAttribute('class', 'mdl-radio mdl-js-radio mdl-js-ripple-effect');
                                    label.setAttribute('for', vendor + item);
                                    var input = document.createElement('input');
                                    input.setAttribute('type', 'radio');
                                    input.setAttribute('id', vendor + item);
                                    input.setAttribute('class', 'mdl-radio__button');
                                    input.setAttribute('name', item);
                                    input.setAttribute('value', data[k].PR_ID + ';' + vendor + ';' + item);
                                    input.setAttribute('onchange', 'item_selected(this)');
                                    if (data[k].CHECKED == 'Y') input.setAttribute('checked', true);
                                    componentHandler.upgradeElement(input);
                                    label.appendChild(input);
                                    componentHandler.upgradeElement(label);
                                    tdQuantity.appendChild(label);
                                    tr.appendChild(tdQuantity);
                                    // console.log(data[k].VENDOR_NOTE)
                                    if (data[k].VENDOR_NOTE != '' && data[k].VENDOR_NOTE != null) tr.style.backgroundColor = 'rgb(204, 204, 204)'
                                    tr.setAttribute('ondblclick', 'fnc_item_detail(data[' + k + '])')
                                    console.log(data[k])
                                    table_body_vendor1.appendChild(tr);
                                    componentHandler.upgradeElement(tr);
                                }
                                if (j == 1) {
                                    //Price
                                    var tdItem = document.createElement("td");
                                    total = data[k].PRICE.toLocaleString('en-US', { minimumFractionDigits: 0 });
                                    var node = document.createTextNode(total);
                                    tdItem.appendChild(node);
                                    if (data[k].PRICE == min_price_vendor) tdItem.setAttribute('style', 'color: green; font-weight: bold;')
                                    else tdItem.setAttribute('style', 'color: black;');
                                    tr.appendChild(tdItem);
                                    //Total
                                    var tdUnit = document.createElement("td");
                                    total = (data[k].PRICE * data[k].QUANTITY).toLocaleString('en-US', { minimumFractionDigits: 0 });
                                    // if (data[k].CHECKED=='Y')
                                    // {
                                    price_no_vat1 += data[k].PRICE * data[k].QUANTITY;
                                    price_discount1 += data[k].PRICE * data[k].QUANTITY * (1 - data[k].DISCOUNT);
                                    // }
                                    warranty1 = data[k].WARRANTY;
                                    available1 = data[k].EXPIRED;
                                    var node = document.createTextNode(total);
                                    tdUnit.setAttribute('style', 'color: black;')
                                    tdUnit.appendChild(node);
                                    tr.appendChild(tdUnit);
                                    //LeadTime
                                    var tdQuantity = document.createElement("td");
                                    var node = document.createTextNode(data[k].LEADTIME);
                                    tdQuantity.setAttribute('style', 'color: black;')
                                    tdQuantity.appendChild(node);
                                    tr.appendChild(tdQuantity);
                                    //Origin
                                    var tdQuantity = document.createElement("td");
                                    tdQuantity.setAttribute("class", "mdl-data-table__cell--non-numeric");
                                    var node = document.createTextNode(data[k].ORIGIN.substring(0, 12));
                                    tdQuantity.appendChild(node);
                                    tdQuantity.setAttribute('style', 'color: black;')
                                    tr.appendChild(tdQuantity);
                                    //IsCheck
                                    var tdQuantity = document.createElement("td");
                                    tdQuantity.setAttribute("class", "mdl-data-table__cell--non-numeric");
                                    var label = document.createElement('label');
                                    label.setAttribute('class', 'mdl-radio mdl-js-radio mdl-js-ripple-effect');
                                    label.setAttribute('for', vendor + item);
                                    var input = document.createElement('input');
                                    input.setAttribute('type', 'radio');
                                    input.setAttribute('id', vendor + item);
                                    input.setAttribute('class', 'mdl-radio__button');
                                    input.setAttribute('name', item);
                                    input.setAttribute('value', data[k].PR_ID + ';' + vendor + ';' + item);
                                    input.setAttribute('onchange', 'item_selected(this)');
                                    if (data[k].CHECKED == 'Y') input.setAttribute('checked', true);
                                    componentHandler.upgradeElement(input);
                                    label.appendChild(input);
                                    componentHandler.upgradeElement(label);
                                    tdQuantity.appendChild(label);
                                    tr.appendChild(tdQuantity);
                                    if (data[k].VENDOR_NOTE != '' && data[k].VENDOR_NOTE != null) tr.style.backgroundColor = 'rgb(204, 204, 204)'
                                    tr.setAttribute('ondblclick', 'fnc_item_detail(data[' + k + '])')
                                    table_body_vendor2.appendChild(tr);
                                    componentHandler.upgradeElement(tr);
                                }
                                if (j == 2) {
                                    //Price
                                    var tdItem = document.createElement("td");
                                    total = data[k].PRICE.toLocaleString('en-US', { minimumFractionDigits: 0 });
                                    var node = document.createTextNode(total);
                                    if (data[k].PRICE == min_price_vendor) tdItem.setAttribute('style', 'color: green; font-weight: bold;')
                                    else tdItem.setAttribute('style', 'color: black;')
                                    tdItem.appendChild(node);
                                    tr.appendChild(tdItem);
                                    //Total
                                    var tdUnit = document.createElement("td");
                                    total = (data[k].PRICE * data[k].QUANTITY).toLocaleString('en-US', { minimumFractionDigits: 0 });
                                    // if (data[k].CHECKED=='Y')
                                    // {
                                    price_no_vat2 += data[k].PRICE * data[k].QUANTITY;
                                    price_discount2 += data[k].PRICE * data[k].QUANTITY * (1 - data[k].DISCOUNT);
                                    // }
                                    warranty2 = data[k].WARRANTY;
                                    available2 = data[k].EXPIRED;
                                    var node = document.createTextNode(total);
                                    tdUnit.setAttribute('style', 'color: black;')
                                    tdUnit.appendChild(node);
                                    tr.appendChild(tdUnit);
                                    //LeadTime
                                    var tdQuantity = document.createElement("td");
                                    var node = document.createTextNode(data[k].LEADTIME);
                                    tdQuantity.appendChild(node);
                                    tdQuantity.setAttribute('style', 'color: black;')
                                    tr.appendChild(tdQuantity);
                                    //Origin
                                    var tdQuantity = document.createElement("td");
                                    tdQuantity.setAttribute("class", "mdl-data-table__cell--non-numeric");
                                    var node = document.createTextNode(data[k].ORIGIN.substring(0, 12));
                                    tdQuantity.appendChild(node);
                                    tdQuantity.setAttribute('style', 'color: black;')
                                    tr.appendChild(tdQuantity);
                                    //IsCheck
                                    var tdQuantity = document.createElement("td");
                                    tdQuantity.setAttribute("class", "mdl-data-table__cell--non-numeric");
                                    var label = document.createElement('label');
                                    label.setAttribute('class', 'mdl-radio mdl-js-radio mdl-js-ripple-effect');
                                    label.setAttribute('for', vendor + item);
                                    var input = document.createElement('input');
                                    input.setAttribute('type', 'radio');
                                    input.setAttribute('id', vendor + item);
                                    input.setAttribute('class', 'mdl-radio__button');
                                    input.setAttribute('name', item);
                                    input.setAttribute('value', data[k].PR_ID + ';' + vendor + ';' + item);
                                    input.setAttribute('onchange', 'item_selected(this)');
                                    if (data[k].CHECKED == 'Y') input.setAttribute('checked', true);
                                    componentHandler.upgradeElement(input);
                                    label.appendChild(input);
                                    componentHandler.upgradeElement(label);
                                    tdQuantity.appendChild(label);
                                    tr.appendChild(tdQuantity);
                                    if (data[k].VENDOR_NOTE != '' && data[k].VENDOR_NOTE != null) tr.style.backgroundColor = 'rgb(204, 204, 204)'
                                    tr.setAttribute('ondblclick', 'fnc_item_detail(data[' + k + '])')
                                    table_body_vendor3.appendChild(tr);
                                    componentHandler.upgradeElement(tr);
                                }
                                if (j == 3) {
                                    //Price
                                    var tdItem = document.createElement("td");
                                    total = data[k].PRICE.toLocaleString('en-US', { minimumFractionDigits: 0 });
                                    var node = document.createTextNode(total);
                                    if (data[k].PRICE == min_price_vendor) tdItem.setAttribute('style', 'color: green; font-weight: bold;')
                                    else tdItem.setAttribute('style', 'color: black;')
                                    tdItem.appendChild(node);
                                    tr.appendChild(tdItem);
                                    //Total
                                    var tdUnit = document.createElement("td");
                                    total = (data[k].PRICE * data[k].QUANTITY).toLocaleString('en-US', { minimumFractionDigits: 0 });
                                    // if (data[k].CHECKED=='Y')
                                    // {
                                    price_no_vat3 += data[k].PRICE * data[k].QUANTITY;
                                    price_discount3 += data[k].PRICE * data[k].QUANTITY * (1 - data[k].DISCOUNT);
                                    // }
                                    warranty3 = data[k].WARRANTY;
                                    available3 = data[k].EXPIRED;
                                    var node = document.createTextNode(total);
                                    tdUnit.setAttribute('style', 'color: black;')
                                    tdUnit.appendChild(node);
                                    tr.appendChild(tdUnit);
                                    //LeadTime
                                    var tdQuantity = document.createElement("td");
                                    var node = document.createTextNode(data[k].LEADTIME);
                                    tdQuantity.appendChild(node);
                                    tdQuantity.setAttribute('style', 'color: black;')
                                    tr.appendChild(tdQuantity);
                                    //Origin
                                    var tdQuantity = document.createElement("td");
                                    tdQuantity.setAttribute("class", "mdl-data-table__cell--non-numeric");
                                    var node = document.createTextNode(data[k].ORIGIN.substring(0, 12));
                                    tdQuantity.setAttribute('style', 'color: black;')
                                    tdQuantity.appendChild(node);
                                    tr.appendChild(tdQuantity);
                                    //IsCheck
                                    var tdQuantity = document.createElement("td");
                                    tdQuantity.setAttribute("class", "mdl-data-table__cell--non-numeric");
                                    var label = document.createElement('label');
                                    label.setAttribute('class', 'mdl-radio mdl-js-radio mdl-js-ripple-effect');
                                    label.setAttribute('for', vendor + item);
                                    var input = document.createElement('input');
                                    input.setAttribute('type', 'radio');
                                    input.setAttribute('id', vendor + item);
                                    input.setAttribute('class', 'mdl-radio__button');
                                    input.setAttribute('name', item);
                                    input.setAttribute('value', data[k].PR_ID + ';' + vendor + ';' + item);
                                    input.setAttribute('onchange', 'item_selected(this)');
                                    if (data[k].CHECKED == 'Y') input.setAttribute('checked', true);
                                    componentHandler.upgradeElement(input);
                                    label.appendChild(input);
                                    componentHandler.upgradeElement(label);
                                    tdQuantity.appendChild(label);
                                    tr.appendChild(tdQuantity);
                                    if (data[k].VENDOR_NOTE != '' && data[k].VENDOR_NOTE != null) tr.style.backgroundColor = 'rgb(204, 204, 204)'
                                    tr.setAttribute('ondblclick', 'fnc_item_detail(data[' + k + '])')
                                    table_body_vendor4.appendChild(tr);
                                    componentHandler.upgradeElement(tr);
                                }
                                if (j == 4) {
                                    //Price
                                    var tdItem = document.createElement("td");
                                    total = data[k].PRICE.toLocaleString('en-US', { minimumFractionDigits: 0 });
                                    var node = document.createTextNode(total);
                                    if (data[k].PRICE == min_price_vendor) tdItem.setAttribute('style', 'color: green; font-weight: bold;')
                                    else tdItem.setAttribute('style', 'color: black;')
                                    tdItem.appendChild(node);
                                    tr.appendChild(tdItem);
                                    //Total
                                    var tdUnit = document.createElement("td");
                                    total = (data[k].PRICE * data[k].QUANTITY).toLocaleString('en-US', { minimumFractionDigits: 0 });
                                    // if (data[k].CHECKED=='Y')
                                    // {
                                    price_no_vat4 += data[k].PRICE * data[k].QUANTITY;
                                    price_discount4 += data[k].PRICE * data[k].QUANTITY * (1 - data[k].DISCOUNT);
                                    // }
                                    warranty4 = data[k].WARRANTY;
                                    available4 = data[k].EXPIRED;
                                    var node = document.createTextNode(total);
                                    tdUnit.setAttribute('style', 'color: black;')
                                    tdUnit.appendChild(node);
                                    tr.appendChild(tdUnit);
                                    //LeadTime
                                    var tdQuantity = document.createElement("td");
                                    var node = document.createTextNode(data[k].LEADTIME);
                                    tdQuantity.appendChild(node);
                                    tdQuantity.setAttribute('style', 'color: black;')
                                    tr.appendChild(tdQuantity);
                                    //Origin
                                    var tdQuantity = document.createElement("td");
                                    tdQuantity.setAttribute("class", "mdl-data-table__cell--non-numeric");
                                    var node = document.createTextNode(data[k].ORIGIN.substring(0, 12));
                                    tdQuantity.setAttribute('style', 'color: black;')
                                    tdQuantity.appendChild(node);
                                    tr.appendChild(tdQuantity);
                                    //IsCheck
                                    var tdQuantity = document.createElement("td");
                                    tdQuantity.setAttribute("class", "mdl-data-table__cell--non-numeric");
                                    var label = document.createElement('label');
                                    label.setAttribute('class', 'mdl-radio mdl-js-radio mdl-js-ripple-effect');
                                    label.setAttribute('for', vendor + item);
                                    var input = document.createElement('input');
                                    input.setAttribute('type', 'radio');
                                    input.setAttribute('id', vendor + item);
                                    input.setAttribute('class', 'mdl-radio__button');
                                    input.setAttribute('name', item);
                                    input.setAttribute('value', data[k].PR_ID + ';' + vendor + ';' + item);
                                    input.setAttribute('onchange', 'item_selected(this)');
                                    if (data[k].CHECKED == 'Y') input.setAttribute('checked', true);
                                    componentHandler.upgradeElement(input);
                                    label.appendChild(input);
                                    componentHandler.upgradeElement(label);
                                    tdQuantity.appendChild(label);
                                    tr.appendChild(tdQuantity);
                                    if (data[k].VENDOR_NOTE != '' && data[k].VENDOR_NOTE != null) tr.style.backgroundColor = 'rgb(204, 204, 204)'
                                    tr.setAttribute('ondblclick', 'fnc_item_detail(data[' + k + '])')
                                    table_body_vendor5.appendChild(tr);
                                    componentHandler.upgradeElement(tr);
                                }
                                if (j == 5) {
                                    //Price
                                    var tdItem = document.createElement("td");
                                    total = data[k].PRICE.toLocaleString('en-US', { minimumFractionDigits: 0 });
                                    var node = document.createTextNode(total);
                                    if (data[k].PRICE == min_price_vendor) tdItem.setAttribute('style', 'color: green; font-weight: bold;')
                                    else tdItem.setAttribute('style', 'color: black;')
                                    tdItem.appendChild(node);
                                    tr.appendChild(tdItem);
                                    //Total
                                    var tdUnit = document.createElement("td");
                                    total = (data[k].PRICE * data[k].QUANTITY).toLocaleString('en-US', { minimumFractionDigits: 0 });
                                    // if (data[k].CHECKED=='Y')
                                    // {
                                    price_no_vat5 += data[k].PRICE * data[k].QUANTITY;
                                    price_discount5 += data[k].PRICE * data[k].QUANTITY * (1 - data[k].DISCOUNT);
                                    // }
                                    warranty5 = data[k].WARRANTY;
                                    available5 = data[k].EXPIRED;
                                    var node = document.createTextNode(total);
                                    tdUnit.setAttribute('style', 'color: black;')
                                    tdUnit.appendChild(node);
                                    tr.appendChild(tdUnit);
                                    //LeadTime
                                    var tdQuantity = document.createElement("td");
                                    var node = document.createTextNode(data[k].LEADTIME);
                                    tdQuantity.setAttribute('style', 'color: black;')
                                    tdQuantity.appendChild(node);
                                    tr.appendChild(tdQuantity);
                                    //Origin
                                    var tdQuantity = document.createElement("td");
                                    tdQuantity.setAttribute("class", "mdl-data-table__cell--non-numeric");
                                    var node = document.createTextNode(data[k].ORIGIN.substring(0, 12));
                                    tdQuantity.setAttribute('style', 'color: black;')
                                    tdQuantity.appendChild(node);
                                    tr.appendChild(tdQuantity);
                                    //IsCheck
                                    var tdQuantity = document.createElement("td");
                                    tdQuantity.setAttribute("class", "mdl-data-table__cell--non-numeric");
                                    var label = document.createElement('label');
                                    label.setAttribute('class', 'mdl-radio mdl-js-radio mdl-js-ripple-effect');
                                    label.setAttribute('for', vendor + item);
                                    var input = document.createElement('input');
                                    input.setAttribute('type', 'radio');
                                    input.setAttribute('id', vendor + item);
                                    input.setAttribute('class', 'mdl-radio__button');
                                    input.setAttribute('name', item);
                                    input.setAttribute('value', data[k].PR_ID + ';' + vendor + ';' + item);
                                    input.setAttribute('onchange', 'item_selected(this)');
                                    if (data[k].CHECKED == 'Y') input.setAttribute('checked', true);
                                    componentHandler.upgradeElement(input);
                                    label.appendChild(input);
                                    componentHandler.upgradeElement(label);
                                    tdQuantity.appendChild(label);
                                    tr.appendChild(tdQuantity);
                                    if (data[k].VENDOR_NOTE != '' && data[k].VENDOR_NOTE != null) tr.style.backgroundColor = 'rgb(204, 204, 204)'
                                    tr.setAttribute('ondblclick', 'fnc_item_detail(data[' + k + '])')
                                    table_body_vendor6.appendChild(tr);
                                    componentHandler.upgradeElement(tr);
                                }
                            }
                        }
                        if (is_exist_item_in_vendor == false) {
                            if (j == 0) {
                                //Price
                                var tdItem = document.createElement("td");
                                var node = document.createTextNode('');
                                tdItem.appendChild(node);
                                tr.appendChild(tdItem);
                                //Total
                                var tdUnit = document.createElement("td");
                                var node = document.createTextNode('');
                                tdUnit.appendChild(node);
                                tr.appendChild(tdUnit);
                                //LeadTime
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                //Origin
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                //IsCheck
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                table_body_vendor1.appendChild(tr);
                                componentHandler.upgradeElement(tr);
                            }
                            if (j == 1) {
                                //Price
                                var tdItem = document.createElement("td");
                                var node = document.createTextNode('');
                                tdItem.appendChild(node);
                                tr.appendChild(tdItem);
                                //Total
                                var tdUnit = document.createElement("td");
                                var node = document.createTextNode('');
                                tdUnit.appendChild(node);
                                tr.appendChild(tdUnit);
                                //LeadTime
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                //Origin
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                //IsCheck
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                table_body_vendor2.appendChild(tr);
                                componentHandler.upgradeElement(tr);
                            }
                            if (j == 2) {
                                //Price
                                var tdItem = document.createElement("td");
                                var node = document.createTextNode('');
                                tdItem.appendChild(node);
                                tr.appendChild(tdItem);
                                //Total
                                var tdUnit = document.createElement("td");
                                var node = document.createTextNode('');
                                tdUnit.appendChild(node);
                                tr.appendChild(tdUnit);
                                //LeadTime
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                //Origin
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                //IsCheck
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                table_body_vendor3.appendChild(tr);
                                componentHandler.upgradeElement(tr);
                            }
                            if (j == 3) {
                                //Price
                                var tdItem = document.createElement("td");
                                var node = document.createTextNode('');
                                tdItem.appendChild(node);
                                tr.appendChild(tdItem);
                                //Total
                                var tdUnit = document.createElement("td");
                                var node = document.createTextNode('');
                                tdUnit.appendChild(node);
                                tr.appendChild(tdUnit);
                                //LeadTime
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                //Origin
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                //IsCheck
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                table_body_vendor4.appendChild(tr);
                                componentHandler.upgradeElement(tr);
                            }
                            if (j == 4) {
                                //Price
                                var tdItem = document.createElement("td");
                                var node = document.createTextNode('');
                                tdItem.appendChild(node);
                                tr.appendChild(tdItem);
                                //Total
                                var tdUnit = document.createElement("td");
                                var node = document.createTextNode('');
                                tdUnit.appendChild(node);
                                tr.appendChild(tdUnit);
                                //LeadTime
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                //Origin
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                //IsCheck
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                table_body_vendor5.appendChild(tr);
                                componentHandler.upgradeElement(tr);
                            }
                            if (j == 5) {
                                //Price
                                var tdItem = document.createElement("td");
                                var node = document.createTextNode('');
                                tdItem.appendChild(node);
                                tr.appendChild(tdItem);
                                //Total
                                var tdUnit = document.createElement("td");
                                var node = document.createTextNode('');
                                tdUnit.appendChild(node);
                                tr.appendChild(tdUnit);
                                //LeadTime
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                //Origin
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                //IsCheck
                                var tdQuantity = document.createElement("td");
                                var node = document.createTextNode('');
                                tdQuantity.appendChild(node);
                                tr.appendChild(tdQuantity);
                                table_body_vendor6.appendChild(tr);
                                componentHandler.upgradeElement(tr);
                            }
                        }
                    }
                }
                min_price_no_vat = 100000000000000;
                min_price_discount = 100000000000000;
                if (min_price_no_vat > price_no_vat0 && price_no_vat0 != 0) min_price_no_vat = price_no_vat0;
                if (min_price_no_vat > price_no_vat1 && price_no_vat1 != 0) min_price_no_vat = price_no_vat1;
                if (min_price_no_vat > price_no_vat2 && price_no_vat2 != 0) min_price_no_vat = price_no_vat2;
                if (min_price_no_vat > price_no_vat3 && price_no_vat3 != 0) min_price_no_vat = price_no_vat3;
                if (min_price_no_vat > price_no_vat4 && price_no_vat4 != 0) min_price_no_vat = price_no_vat4;
                if (min_price_no_vat > price_no_vat5 && price_no_vat5 != 0) min_price_no_vat = price_no_vat5;

                if (min_price_discount > price_discount0 && price_discount0 != 0) min_price_discount = price_discount0;
                if (min_price_discount > price_discount1 && price_discount1 != 0) min_price_discount = price_discount1;
                if (min_price_discount > price_discount2 && price_discount2 != 0) min_price_discount = price_discount2;
                if (min_price_discount > price_discount3 && price_discount3 != 0) min_price_discount = price_discount3;
                if (min_price_discount > price_discount4 && price_discount4 != 0) min_price_discount = price_discount4;
                if (min_price_discount > price_discount5 && price_discount5 != 0) min_price_discount = price_discount5;

                if (min_price_no_vat == price_no_vat0) document.getElementById('txt_price_no_vat0').setAttribute('style', 'color:green; font-weight: bold;');
                if (min_price_no_vat == price_no_vat1) document.getElementById('txt_price_no_vat1').setAttribute('style', 'color:green; font-weight: bold;');
                if (min_price_no_vat == price_no_vat2) document.getElementById('txt_price_no_vat2').setAttribute('style', 'color:green; font-weight: bold;');
                if (min_price_no_vat == price_no_vat3) document.getElementById('txt_price_no_vat3').setAttribute('style', 'color:green; font-weight: bold;');
                if (min_price_no_vat == price_no_vat4) document.getElementById('txt_price_no_vat4').setAttribute('style', 'color:green; font-weight: bold;');
                if (min_price_no_vat == price_no_vat5) document.getElementById('txt_price_no_vat5').setAttribute('style', 'color:green; font-weight: bold;');

                if (min_price_discount == price_discount0) document.getElementById('txt_price_discount0').setAttribute('style', 'color:green; font-weight: bold;');
                if (min_price_discount == price_discount1) document.getElementById('txt_price_discount1').setAttribute('style', 'color:green; font-weight: bold;');
                if (min_price_discount == price_discount2) document.getElementById('txt_price_discount2').setAttribute('style', 'color:green; font-weight: bold;');
                if (min_price_discount == price_discount3) document.getElementById('txt_price_discount3').setAttribute('style', 'color:green; font-weight: bold;');
                if (min_price_discount == price_discount4) document.getElementById('txt_price_discount4').setAttribute('style', 'color:green; font-weight: bold;');
                if (min_price_discount == price_discount5) document.getElementById('txt_price_discount5').setAttribute('style', 'color:green; font-weight: bold;');

                price_no_vat0 = (price_no_vat0).toLocaleString('en-US', { minimumFractionDigits: 0 });
                price_no_vat1 = (price_no_vat1).toLocaleString('en-US', { minimumFractionDigits: 0 });
                price_no_vat2 = (price_no_vat2).toLocaleString('en-US', { minimumFractionDigits: 0 });
                price_no_vat3 = (price_no_vat3).toLocaleString('en-US', { minimumFractionDigits: 0 });
                price_no_vat4 = (price_no_vat4).toLocaleString('en-US', { minimumFractionDigits: 0 });
                price_no_vat5 = (price_no_vat5).toLocaleString('en-US', { minimumFractionDigits: 0 });

                price_discount0 = (price_discount0).toLocaleString('en-US', { minimumFractionDigits: 0 });
                price_discount1 = (price_discount1).toLocaleString('en-US', { minimumFractionDigits: 0 });
                price_discount2 = (price_discount2).toLocaleString('en-US', { minimumFractionDigits: 0 });
                price_discount3 = (price_discount3).toLocaleString('en-US', { minimumFractionDigits: 0 });
                price_discount4 = (price_discount4).toLocaleString('en-US', { minimumFractionDigits: 0 });
                price_discount5 = (price_discount5).toLocaleString('en-US', { minimumFractionDigits: 0 });

                document.getElementById('txt_price_no_vat0').innerHTML = price_no_vat0;
                document.getElementById('txt_price_no_vat1').innerHTML = price_no_vat1;
                document.getElementById('txt_price_no_vat2').innerHTML = price_no_vat2;
                document.getElementById('txt_price_no_vat3').innerHTML = price_no_vat3;
                document.getElementById('txt_price_no_vat4').innerHTML = price_no_vat4;
                document.getElementById('txt_price_no_vat5').innerHTML = price_no_vat5;

                document.getElementById('txt_price_discount0').innerHTML = price_discount0;
                document.getElementById('txt_price_discount1').innerHTML = price_discount1;
                document.getElementById('txt_price_discount2').innerHTML = price_discount2;
                document.getElementById('txt_price_discount3').innerHTML = price_discount3;
                document.getElementById('txt_price_discount4').innerHTML = price_discount4;
                document.getElementById('txt_price_discount5').innerHTML = price_discount5;

                document.getElementById('txt_warranty0').innerHTML = warranty0;
                document.getElementById('txt_warranty1').innerHTML = warranty1;
                document.getElementById('txt_warranty2').innerHTML = warranty2;
                document.getElementById('txt_warranty3').innerHTML = warranty3;
                document.getElementById('txt_warranty4').innerHTML = warranty4;
                document.getElementById('txt_warranty5').innerHTML = warranty5;
                if (available0 != null)
                    document.getElementById('txt_available0').innerHTML = available0.toString().split('T')[0];
                if (available1 != null)
                    document.getElementById('txt_available1').innerHTML = available1.toString().split('T')[0];
                if (available2 != null)
                    document.getElementById('txt_available2').innerHTML = available2.toString().split('T')[0];
                if (available3 != null)
                    document.getElementById('txt_available3').innerHTML = available3.toString().split('T')[0];
                console.log(available3)
                if (available4 != null)
                    document.getElementById('txt_available4').innerHTML = available4.toString().split('T')[0];
                if (available5 != null)
                    document.getElementById('txt_available5').innerHTML = available5.toString().split('T')[0];
                // document.getElementById('txt_available0').innerHTML      =available0.split('T')[0];
                // document.getElementById('txt_available1').innerHTML      =available1.split('T')[0];
                // document.getElementById('txt_available2').innerHTML      =available2.split('T')[0];
                // document.getElementById('txt_available3').innerHTML      =available3.split('T')[0];
                // document.getElementById('txt_available4').innerHTML      =available4.split('T')[0];
                // document.getElementById('txt_available5').innerHTML      =available5.split('T')[0]; 

                load_price(req_id)
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        // PR_ID=document.getElementById('cbb_pr_id').value;
        data = { PR_ID: req_id }
        xsend.send(JSON.stringify(data));
    }
    function item_selected(x) {
        purchaser = document.getElementById('cbb_purchaser').value;
        console.log(purchaser)
        if (purchaser == "TRINH THI THU HA" || purchaser == "HOANG THI QUE") {
            var xsend = new XMLHttpRequest();
            xsend.open("POST", "/CCS/Select_Item_Bidding", true);
            xsend.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data = xsend.responseText;
                    if (data == 'done') show_message('Đã cập nhật Item!')
                }
            }
            xsend.setRequestHeader("Content-type", "application/json");
            data = { item: x.value.split(';')[2], pr_id: x.value.split(';')[0], vendor: x.value.split(';')[1] }
            console.log(data)
            xsend.send(JSON.stringify(data));
        }
    }
    function function_return_rq(x) {
        request = x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
        var reason = prompt("Hãy nhập lý do từ chối!");
        if (reason == null) return;
        if (reason == "") {
            alert('Lý do không được để trống!');
            return;
        } else {
            // PO_ID=x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
            var xsend = new XMLHttpRequest();
            xsend.open("POST", "/CCS/Purchase_reject_PO", true);
            xsend.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data = xsend.responseText;
                    if (data == 'done') {
                        alert('PO đã được trả lại!');
                        month = document.getElementById('cbb_month').value;
                        year = document.getElementById('cbb_year').value;
                        load_order_PO(month, year);
                    }
                }
            }
            xsend.setRequestHeader("Content-type", "application/json");
            data = { pr_id: request, reason: reason }
            xsend.send(JSON.stringify(data));
        }
    }
    function reset_pr_filldata() {
        document.getElementById('txt_item').value = '';
        document.getElementById('txt_specification').value = '';
        document.getElementById('txt_origin').value = '';
        document.getElementById('txt_IDItem').value = '';
        document.getElementById('txt_english').value = '';
        document.getElementById('txt_price').value = '';
        document.getElementById('txt_vendor').value = '';
        document.getElementById('txt_leadtime').value = '';
    }
    function function_detail_rq(x) {
        requestID = x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
        load_request_item_temp(requestID);
        // document.getElementById('btn_update_item_request').disabled=true;
        // document.getElementById('btn_update_item_request').style.cursor="no-drop"
        reset_pr_filldata()
        document.getElementById('dialog_create_pr').showModal();
    }
    function delete_request(x) {
        requestID = x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Delete_Request_PR", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = xsend.responseText;
                if (data == 'done') {
                    alert('Đã lưu Item!');
                    load_request_PR();

                    // load_request_item_temp(requestID);
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { requestID: requestID };
        xsend.send(JSON.stringify(data));
    }
    function function_get_attached_file() {
        request = document.getElementById('txt_pr_for_vendor').innerHTML;
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Get_Attached_Vendor", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(xsend.responseText);
                if (data.length > 0) {
                    document.getElementById('txt_attach_link').value = data[0].Attached_Image;
                    document.getElementById('txt_attach_link').parentNode.classList.add('is-dirty');
                    document.getElementById('txt_attach_link').blur();
                }
                document.getElementById('dialog_send_pr_vendor').showModal();
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { pr_id: request }
        xsend.send(JSON.stringify(data));
    }
    function function_send_vendor_rq(x) {
        request = x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
        document.getElementById('txt_pr_for_vendor').innerHTML = request;
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Get_Purchaser_Email", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(xsend.responseText);
                if (data.length > 0)
                    document.getElementById('txt_pr_email').value = data[0].Email;
                document.getElementById('txt_pr_email').parentNode.classList.add('is-dirty');
                function_get_attached_file();
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        xsend.send();
    }
    function fnc_detail(x) {
        requestID = document.getElementById('txt_request_ID').innerHTML;
        stt = x.parentNode.parentNode.parentNode.parentNode.childNodes[0].innerHTML - 1
        data = JSON.parse(sessionStorage.getItem(requestID));
        document.getElementById('txt_item').value = data[stt].Item;
        document.getElementById('txt_item').parentNode.classList.add('is-dirty');
        document.getElementById('txt_vietnamese').value = data[stt].Vietnamese;
        document.getElementById('txt_vietnamese').parentNode.classList.add('is-dirty');
        document.getElementById('txt_english').value = data[stt].English;
        document.getElementById('txt_english').parentNode.classList.add('is-dirty');
        document.getElementById('txt_specification').value = data[stt].Specification;
        document.getElementById('txt_specification').parentNode.classList.add('is-dirty');
        document.getElementById('txt_origin').value = data[stt].Origin;
        document.getElementById('txt_origin').parentNode.classList.add('is-dirty');
        document.getElementById('txt_price').value = data[stt].Price;
        document.getElementById('txt_price').parentNode.classList.add('is-dirty');
        document.getElementById('txt_IDItem').value = data[stt].PR_ID;
        document.getElementById('txt_IDItem').parentNode.classList.add('is-dirty');
        document.getElementById('txt_vendor').value = data[stt].Vendor;
        document.getElementById('txt_vendor').parentNode.classList.add('is-dirty');
        document.getElementById('txt_leadtime').value = data[stt].Leadtime;
        document.getElementById('txt_leadtime').parentNode.classList.add('is-dirty');
        $('ul[for="cbb_unit"] li[data-val="' + data[stt].Unit + '"]').attr('data-selected', true);
        getmdlSelect.init('#cbb_unit_div');
        $('ul[for="cbb_currency"] li[data-val="' + data[stt].Currency + '"]').attr('data-selected', true);
        getmdlSelect.init('#div_cbb_currency');
        componentHandler.upgradeAllRegistered();
    }
    function load_unit() {
        init_month_year();
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Get_Unit", true);
        cbb_unit = document.getElementById('cbb_unit_list');
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(xsend.responseText);
                for (var i = 0; i < data.length; i++) {
                    sessionStorage.setItem(data[i].NAME, data[i].UoM)
                    li = document.createElement('li');
                    li.setAttribute('class', 'mdl-menu__item');
                    li.setAttribute('data-val', data[i].UoM)
                    li.innerHTML = data[i].NAME;
                    cbb_unit.appendChild(li);
                }
                getmdlSelect.init('#cbb_unit_div');
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        xsend.send();
    }
    document.getElementById('btn_update_item_request').addEventListener('click', function () {
        item = document.getElementById('txt_item').value;
        if (item == '') {
            alert('Item is not vailid!');
            return;
        }
        unit = sessionStorage.getItem(document.getElementById('cbb_unit').value);
        vietnamese = document.getElementById('txt_vietnamese').value;
        english = document.getElementById('txt_english').value;
        requestID = document.getElementById('txt_request_ID').innerHTML;
        PR_ID = document.getElementById('txt_IDItem').value;
        // if (PR_ID=='') {
        //     alert('Lawson ID is not vailid!');
        //     return;
        // }
        price = document.getElementById('txt_price').value;
        if ((price == '' || parseFloat(price) <= 0) && PR_ID != '') {
            alert('Price is not vailid!');
            return;
        }
        usd = price;
        currency = document.getElementById('cbb_currency').value;
        vnd = sessionStorage.getItem('VND');
        if (vnd == null) vnd = 23150;
        eur = sessionStorage.getItem('EUR');
        if (eur == null) eur = 0.85
        if (currency == 'VND') usd = Math.round(price / vnd, 2);
        if (currency == 'EUR') usd = Math.round(price / eur, 2);
        // lawson=document.getElementById('txt_lawson').value;
        if (currency == '' && PR_ID != '') {
            alert('Currency is not vailid!');
            return;
        }
        vendor = document.getElementById('txt_vendor').value;
        if (vendor == '' && PR_ID != '') {
            alert('Vendor is not vailid!');
            return;
        }
        leadtime = document.getElementById('txt_leadtime').value;
        if ((leadtime == '' || parseFloat(leadtime <= 0)) && PR_ID != '') {
            alert('Leadtime is not vailid!')
            return;
        }
        expireddate = document.getElementById('txt_expired').value;
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Update_Request_PR", true);
        cbb_unit = document.getElementById('cbb_unit_list');
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = xsend.responseText;
                alert('Item updated!');
                load_request_item_temp(requestID);
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { item: item, english: english, vietnamese: vietnamese, requestID: requestID, PR_ID: PR_ID, price: price, currency: currency, vendor: vendor, leadtime: leadtime, expireddate: expireddate, usd: usd, unit: unit }
        xsend.send(JSON.stringify(data));
    });
    document.getElementById('btn_update_item_close').addEventListener('click', function () {
        document.getElementById('dialog_create_pr').close();
        month = document.getElementById('cbb_month').value;
        year = document.getElementById('cbb_year').value;
        load_request_PR(month, year);
    });
    document.getElementById('cbb_month').addEventListener('change', function () {
        month = document.getElementById('cbb_month').value;
        year = document.getElementById('cbb_year').value;
        if (month != '' & year != '') {
            load_order_PO(month, year);
            load_request_PR(month, year);
        }
    });
    function get_name(full_name) {
        name = '';
        if (full_name != null) {
            list_name = full_name.split(' ');
            name = list_name[list_name.length - 1];
        }
        return name
    }
    function load_order_PO(month, year) {
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Load_created_PO_Purchasing", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(xsend.responseText);
                console.log('hello')
                console.log(data)
                while (table_body_PO.childNodes.length > 0)
                    table_body_PO.removeChild(table_body_PO.childNodes[0]);
                pic_sort = document.getElementById('cbb_purchaser').value;
                for (var i = 0; i < data.length; i++) {
                    if ('ALL' != pic_sort.toUpperCase()) {
                        pic = data[i].Purchaser;
                        console.log(pic, pic_sort)
                        if (pic != pic_sort) continue;
                    }
                    if (data[i].TOTAL_USD >= 3000 || data[i].Urgent == 'Y' || data[i].OverBudget == 'Y') {// 
                        if (data[i].Status != 'PlantMng') continue
                    }
                    else if (data[i].TOTAL_USD >= 1000) {
                        if (data[i].Status != 'SubPlant') continue
                    }
                    var tr = document.createElement("tr");
                    //stt
                    var tdSTT = document.createElement("td");
                    var node = document.createTextNode(i + 1);
                    tdSTT.appendChild(node);
                    tr.appendChild(tdSTT);
                    //Item name
                    var tdItem = document.createElement("td");
                    tdItem.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].ID);
                    tdItem.appendChild(node);
                    if (data[i].Attached_File != '' && data[i].Attached_File != null) {
                        // tdItem.setAttribute('href', '../Python/Finance/CCS/Upload/Attachment/'+data[i].Attached_File)
                        tdItem.setAttribute('style', 'cursor: pointer; color: green; font-weight: bold');
                        tdItem.setAttribute('onclick', 'func_download_attached("' + data[i].Attached_File + '")')
                    }
                    tr.appendChild(tdItem);
                    sessionStorage.setItem(data[i].ID + '_PO_infor', JSON.stringify(data[i]))
                    sessionStorage.setItem(data[i].ID + '_urgent', data[i].Urgent);
                    sessionStorage.setItem(data[i].ID + '_overbudget', data[i].OverBudget);
                    //ITEMS
                    var tdUnit = document.createElement("td");
                    var node = document.createTextNode(data[i].ITEMS);
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //ProjectName
                    var tdUnit = document.createElement("td");
                    tdUnit.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].ProjectName.substring(0, 20) + '...');
                    tdUnit.setAttribute('onmouseover', 'display_project(this)');
                    tdUnit.setAttribute('onmouseout', 'hide_project(this)');
                    tdUnit.style.cursor = 'pointer';
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //total
                    var tdUnit = document.createElement("td");
                    total = Math.round(data[i].TOTAL * 100) / 100
                    total = total.toLocaleString('en-US', { minimumFractionDigits: 0 });
                    var node = document.createTextNode(total);
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //Currency
                    var tdUnit = document.createElement("td");
                    tdUnit.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Currency);
                    if (data[i].Currency == null) node = document.createTextNode("");
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //AccountName
                    var tdUnit = document.createElement("td");
                    tdUnit.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(get_name(data[i].Purchaser));
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //Status
                    var tdStatus = document.createElement("td");
                    tdStatus.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    stat = '';
                    var i_stat = document.createElement('i');
                    i_stat.setAttribute('class', 'material-icons');
                    if (data[i].Urgent == 'Y') {
                        i_stat.setAttribute('style', 'color: green;');
                        i_stat.innerHTML = 'done'; //document.createTextNode(stat);
                    }
                    else {
                        i_stat.setAttribute('style', 'color: red;');
                        i_stat.innerHTML = 'remove'; //document.createTextNode(stat);
                    }
                    tdStatus.appendChild(i_stat);
                    tr.appendChild(tdStatus);
                    //Status
                    var tdStatus = document.createElement("td");
                    tdStatus.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    stat = '';
                    var i_stat = document.createElement('i');
                    i_stat.setAttribute('class', 'material-icons');
                    if (data[i].OverBudget == 'Y') {
                        i_stat.setAttribute('style', 'color: green;');
                        i_stat.innerHTML = 'done'; //document.createTextNode(stat);
                    }
                    else {
                        i_stat.setAttribute('style', 'color: red;');
                        i_stat.innerHTML = 'remove'; //document.createTextNode(stat);
                    }
                    tdStatus.appendChild(i_stat);
                    tr.appendChild(tdStatus);
                    //tdEs
                    var tdEs = document.createElement("td");
                    tdEs.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var div_mail = document.createElement('a')
                    div_mail.setAttribute('href', 'mailto:' + data[i].Email + '?subject=' + data[i].ID);
                    name_list = data[i].Name.split(' ');
                    div_mail.innerHTML = name_list[0] + ', ' + name_list[name_list.length - 1]
                    var node = div_mail//document.createTextNode(div_mail);
                    tdEs.appendChild(node);
                    tr.appendChild(tdEs)
                    //tdEs
                    var tdEs = document.createElement("td");
                    tdEs.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].HeadDept_User);
                    tdEs.appendChild(node);
                    tr.appendChild(tdEs)
                    //tdEs
                    var tdEs = document.createElement("td");
                    tdEs.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Finance_User);
                    tdEs.appendChild(node);
                    tr.appendChild(tdEs)
                    //tdEs
                    var tdEs = document.createElement("td");
                    tdEs.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].OperationMng_User);
                    if (data[i].OperationMng_User == null) var node = document.createTextNode('');
                    tdEs.appendChild(node);
                    tr.appendChild(tdEs)
                    //tdEs
                    var tdEs = document.createElement("td");
                    tdEs.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].SubPlant_User);
                    if (data[i].SubPlant_User == null) var node = document.createTextNode('');
                    tdEs.appendChild(node);
                    tr.appendChild(tdEs)
                    //tdEs
                    var tdEs = document.createElement("td");
                    tdEs.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].PlantMng_User);
                    if (data[i].PlantMng_User == null) var node = document.createTextNode('');
                    tdEs.appendChild(node);
                    tr.appendChild(tdEs)
                    //btn more
                    var tdMore = document.createElement("td");
                    tdMore.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var div = document.createElement("div");
                    var button = document.createElement("button");
                    button.setAttribute("class", "mdl-button mdl-js-button mdl-button--icon");
                    button.setAttribute("id", "button_more_po" + i);
                    // button.setAttribute("onclick", "attach_file_download(this)");
                    var icon = document.createElement("i");
                    icon.setAttribute("class", "material-icons");
                    icon.innerHTML = "more_vert";
                    componentHandler.upgradeElement(icon);
                    button.appendChild(icon);
                    componentHandler.upgradeElement(button);
                    var ul = document.createElement("ul");
                    ul.setAttribute("class", "mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect");
                    ul.setAttribute("for", "button_more_po" + i);
                    // ul.setAttribute("style", "overflow: visible")
                    var li1 = document.createElement("li");
                    li1.setAttribute("class", "mdl-menu__item");
                    li1.setAttribute("onclick", "function_tab_detail_po(this)");
                    li1.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: green'>insert_comment</i>Chi tiết";
                    var li2 = document.createElement("li");
                    li2.setAttribute("class", "mdl-menu__item");
                    li2.setAttribute("onclick", "fnc_approved_po(this)");
                    li2.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: indigo'>check_circle</i>Xử lý";
                    var li3 = document.createElement("li");
                    li3.setAttribute("class", "mdl-menu__item");
                    li3.setAttribute("onclick", "fnc_download_po(this)");
                    li3.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: blue'>download</i>Tải PO";
                    var li4 = document.createElement("li");
                    li4.setAttribute("class", "mdl-menu__item");
                    li4.setAttribute("onclick", "fnc_denied_po(this)");
                    li4.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: red'>not_interested</i>Pending";
                    var li5 = document.createElement("li");
                    li5.setAttribute("class", "mdl-menu__item");
                    li5.setAttribute("onclick", "fnc_change_purchaser_po(this)");
                    li5.innerHTML = "<i class='material-icons' style='vertical-align: middle; margin-right:10px; color: orange'>update</i>Purchaser";
                    componentHandler.upgradeElement(li1);
                    componentHandler.upgradeElement(li2);
                    componentHandler.upgradeElement(li3);
                    componentHandler.upgradeElement(li4);
                    componentHandler.upgradeElement(li5);
                    ul.appendChild(li1);
                    ul.appendChild(li2);
                    ul.appendChild(li3);
                    ul.appendChild(li4);
                    ul.appendChild(li5);
                    tdMore.appendChild(button);
                    tdMore.appendChild(ul);
                    tr.appendChild(tdMore);
                    table_body_PO.appendChild(tr);
                    componentHandler.upgradeElement(tr);
                    componentHandler.upgradeDom('MaterialMenu', 'mdl-menu');
                }

            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        if (month == 'ALL') month = 0;
        data = { month: month, year: year }
        console.log(data)
        xsend.send(JSON.stringify(data));
    }
    function display_project(x) {
        orderID = x.parentNode.childNodes[1].innerHTML;
        po_infor = sessionStorage.getItem(orderID + '_PO_infor');
        x.parentNode.childNodes[3].innerHTML = JSON.parse(po_infor).ProjectName;
    }
    function hide_project(x) {
        orderID = x.parentNode.childNodes[1].innerHTML;
        po_infor = sessionStorage.getItem(orderID + '_PO_infor');
        x.parentNode.childNodes[3].innerHTML = JSON.parse(po_infor).ProjectName.substr(0, 20) + '...';
    }
    function fnc_change_purchaser_po(x) {
        pr_id = x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
        document.getElementById('txt_pr_ID_change').innerHTML = pr_id;
        document.getElementById('dialog_change_purchaser_pr').showModal();
    }
    function function_tab_detail_po(x) {
        orderID = x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Get_Order_Item_Temp", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(xsend.responseText);
                while (table_body_PO_temp.childNodes.length > 0)
                    table_body_PO_temp.removeChild(table_body_PO_temp.childNodes[0]);
                for (var i = 0; i < data.length; i++) {
                    if (data[i].DeptResult == 'N' || data[i].FinanceResult == 'N') continue;
                    var tr = document.createElement("tr");
                    //stt
                    var tdSTT = document.createElement("td");
                    var node = document.createTextNode(i + 1);
                    tdSTT.appendChild(node);
                    tr.appendChild(tdSTT);
                    sessionStorage.setItem(orderID + '_' + i, data[i].RequestID);
                    // sessionStorage.setItem(data[i].ID+'_PO_infor', JSON.stringify(data[i]))
                    //tdUnit
                    var tdUnit = document.createElement("td");
                    tdUnit.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Item);
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //tdUnit
                    var tdUnit = document.createElement("td");
                    tdUnit.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node;
                    if (data[i].Vietnamese == null) node = document.createTextNode("");
                    else node = document.createTextNode(data[i].Vietnamese.substring(0, 20) + '...');
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //Quantity
                    var tdUnit = document.createElement("td");
                    var node = document.createTextNode(data[i].Quantity);
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //Unit
                    var tdUnit = document.createElement("td");
                    var node = document.createTextNode(data[i].Unit);
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //Price
                    var tdQuan = document.createElement("td");
                    total = data[i].Price.toLocaleString('en-US', { minimumFractionDigits: 0 });
                    var node = document.createTextNode(total);
                    tdQuan.appendChild(node);
                    tr.appendChild(tdQuan);
                    //Currency
                    var tdEs = document.createElement("td");
                    tdEs.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Currency);
                    if (data[i].Currency == null) node = document.createTextNode("")
                    tdEs.appendChild(node);
                    tr.appendChild(tdEs)
                    //tdEs
                    var tdEs = document.createElement("td");
                    var node = document.createTextNode(data[i].Leadtime);
                    tdEs.appendChild(node);
                    tr.appendChild(tdEs)
                    //tdEs
                    var tdEs = document.createElement("td");
                    tdEs.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var timeUpdate = (new Date(data[i].ExpiredDate)).toLocaleString("en-US", { timeZone: "Asia/Bangkok" }).split(',')[0];
                    var node = document.createTextNode(timeUpdate);
                    tdEs.appendChild(node);
                    tr.appendChild(tdEs);

                    table_body_PO_temp.appendChild(tr);
                    componentHandler.upgradeElement(tr);
                    componentHandler.upgradeDom('MaterialMenu', 'mdl-menu');
                }
                document.getElementById('dialog_detail').showModal();
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { orderID: orderID }
        xsend.send(JSON.stringify(data));
    }
    function fnc_approved_po(x) {
        PO_ID = x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Purchasing_approve_PO", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = xsend.responseText;
                if (data == 'done') {
                    alert('PO đã được xác nhận!');
                    month = document.getElementById('cbb_month').value;
                    year = document.getElementById('cbb_year').value;
                    load_order_PO(month, year);
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { PO_ID: PO_ID, result: 'Y', reason: '' }
        xsend.send(JSON.stringify(data));
    }
    function fnc_denied_po(x) {
        var reason = prompt("Hãy mhập lý do từ chối!");
        if (reason == null) return;
        if (reason == "") {
            alert('Lý do không được để trống!');
            return;
        } else {
            PO_ID = x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
            var xsend = new XMLHttpRequest();
            xsend.open("POST", "/CCS/Purchasing_approve_PO", true);
            xsend.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data = xsend.responseText;
                    if (data == 'done') {
                        alert('PO đã bị từ chối!');
                        month = document.getElementById('cbb_month').value;
                        year = document.getElementById('cbb_year').value;
                        load_order_PO(month, year);
                    }
                }
            }
            xsend.setRequestHeader("Content-type", "application/json");
            data = { PO_ID: PO_ID, result: 'N', reason: reason }
            xsend.send(JSON.stringify(data));
        }

    }
    function function_excel_rq(x) {
        requestID = x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Export_Bidding_File", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = xsend.responseText;
                a = document.createElement('a');
                a.setAttribute('href', '../Python/Finance/CCS/Export/' + requestID + '_bidding.xlsx');
                a.setAttribute('download', requestID + '.xlsx');
                a.click();
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { PR_ID: requestID }
        xsend.send(JSON.stringify(data));
    }
    document.getElementById('cbb_quotation').addEventListener('change', function () {
        month = document.getElementById('cbb_month').value;
        year = document.getElementById('cbb_year').value;
        load_request_PR(month, year);
    });
    document.getElementById('cbb_dept').addEventListener('change', function () {
        month = document.getElementById('cbb_month').value;
        year = document.getElementById('cbb_year').value;
        load_request_PR(month, year);
    });
    document.getElementById('cbb_purchaser').addEventListener('change', function () {
        month = document.getElementById('cbb_month').value;
        year = document.getElementById('cbb_year').value;
        load_request_PR(month, year);
        load_order_PO(month, year);
    });
    var form_bidding = document.getElementById('upload_form_bidding');
    form_bidding.addEventListener('submit', e => {
        e.preventDefault();
        return false;
    })
    document.getElementById('btn_upload_new_PR').addEventListener('click', function () {
        document.getElementById('file_bidding').click();
        document.getElementById('file_bidding').onchange = function () {
            if (document.getElementById('file_bidding').value != '') document.getElementById('submit_bidding').click();
        }
        var form_bidding = document.getElementById('upload_form_bidding');
        form_bidding.addEventListener('submit', e => {
            if (document.getElementById('file_bidding').value != '') {
                e.preventDefault();
                var xsend = new XMLHttpRequest();
                xsend.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        //done
                        result = xsend.responseText;
                        if (result == 'done') {
                            alert('File PR đã được cập nhật!');
                            document.getElementById('file_bidding').value = ''
                            month = document.getElementById('cbb_month').value;
                            year = document.getElementById('cbb_year').value;
                            load_request_PR(month, year);
                        } else {
                            alert('Đã có lỗi, hãy kiểm tra lại file: ' + result.split(';')[1]);
                        }
                    }
                }
                var fileInput = document.getElementById('file_bidding');
                var file;
                file = fileInput.files[0];
                var formData = new FormData();
                formData.append('file', file);
                if (file != null) {
                    xsend.open('POST', '/CCS/Update_PR_File_Bidding_Done', true);
                    xsend.send(formData);
                }
            }
            return false;
        })

    })
    document.getElementById('btn_close').addEventListener('click', function () {
        document.getElementById('dialog_detail').close();
    });
    function fnc_download_po(x) {
        poID = x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Export_PO_File", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = xsend.responseText;
                a = document.createElement('a');
                a.setAttribute('href', '../Python/Finance/CCS/Export/' + poID + '.xlsx');
                a.setAttribute('download', poID + '.xlsx');
                a.click();
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { poID: poID }
        xsend.send(JSON.stringify(data));
    }
    document.getElementById('btn_done').addEventListener('click', function () {
        var r = confirm('Bạn có chắc?');
        if (r == false) return;
        pr_id = document.getElementById('txt_pr_id').innerHTML;
        purchaser = document.getElementById('cbb_purchaser').value;
        if (purchaser == 'TRINH THI THU HA') {
            var xsend = new XMLHttpRequest();
            xsend.open("POST", "/CCS/Bidding_Approve_3k", true);
            xsend.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data = xsend.responseText;
                    if (data == 'done')
                        alert('Bidding đã được thông qua!');
                    location.reload();
                }
            }
            xsend.setRequestHeader("Content-type", "application/json");
            data = { pr_id: pr_id }
            xsend.send(JSON.stringify(data));
        } else if (purchaser == 'HOANG THI QUE') {
            var xsend = new XMLHttpRequest();
            xsend.open("POST", "/CCS/Bidding_Approve_1k", true);
            xsend.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data = xsend.responseText;
                    if (data == 'done')
                        alert('Bidding đã được thông qua!');
                    location.reload();
                }
            }
            xsend.setRequestHeader("Content-type", "application/json");
            data = { pr_id: pr_id }
            xsend.send(JSON.stringify(data));
        } else {
            var xsend = new XMLHttpRequest();
            xsend.open("POST", "/CCS/Bidding_Approve_Purchasing", true);
            xsend.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data = xsend.responseText;
                    if (data == 'done')
                        alert('Bidding đã được thông qua!');
                    location.reload();
                }
            }
            xsend.setRequestHeader("Content-type", "application/json");
            data = { pr_id: pr_id }
            xsend.send(JSON.stringify(data));
        }
    });
    document.getElementById('btn_reject').addEventListener('click', function () {
        pr_id = document.getElementById('txt_pr_id').innerHTML;
        var reason = prompt("Hãy nhập lý do từ chối!");
        if (reason == null) return;
        if (reason == "") {
            alert('Lý do không được để trống!');
            return;
        } else {
            // PO_ID=x.parentNode.parentNode.parentNode.parentNode.childNodes[1].innerHTML;
            var xsend = new XMLHttpRequest();
            xsend.open("POST", "/CCS/Bidding_Reject_Purchasing", true);
            xsend.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data = xsend.responseText;
                    if (data == 'done') {
                        alert('Bidding đã được cập nhật từ chối!');
                        location.reload();
                    }
                }
            }
            xsend.setRequestHeader("Content-type", "application/json");
            data = { pr_id: pr_id, reason: reason }
            xsend.send(JSON.stringify(data));
        }
    });
    var form_pricelist = document.getElementById('upload_form_price_list');
    form_pricelist.addEventListener('submit', e => {
        e.preventDefault();
        return false;
    })
    document.getElementById('btn_pricelist').addEventListener('click', function () {
        document.getElementById('file_price_list').click();
        document.getElementById('file_price_list').onchange = function () {
            if (document.getElementById('file_price_list').value != '') document.getElementById('submit_price_list').click();
        }
        var form_pricelist = document.getElementById('upload_form_price_list');
        form_pricelist.addEventListener('submit', e => {
            if (document.getElementById('file_price_list').value != '') {
                e.preventDefault();
                var xsend = new XMLHttpRequest();
                xsend.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        //done
                        result = xsend.responseText;
                        if (result.split(';')[0] == 'done') {
                            alert('File Price List đã được cập nhật!');
                            document.getElementById('file_price_list').value = '';
                        } else {
                            alert('Lỗi: ' + result.split(';')[1]);
                            document.getElementById('file_price_list').value = '';
                        }
                    }
                }
                var fileInput = document.getElementById('file_price_list');
                var file;
                file = fileInput.files[0];
                var formData = new FormData();
                formData.append('file_price_list', file);
                if (file != null) {
                    xsend.open('POST', '/CCS/Upload_PriceList_File', true);
                    xsend.send(formData);
                }
            }
            return false;
        })
    });
    document.getElementById('txt_item_find').addEventListener('keyup', function () {
        item_find = document.getElementById('txt_item_find').value;
        load_item_quotation(item_find);
    });
    function load_item_quotation(item = '') {
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Get_Item_Quotation", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(xsend.responseText);
                while (table_body_quotation.childNodes.length > 0)
                    table_body_quotation.removeChild(table_body_quotation.childNodes[0]);
                for (var i = 0; i < data.length; i++) {
                    var tr = document.createElement("tr");
                    //stt
                    var tdSTT = document.createElement("td");
                    var node = document.createTextNode(i + 1);
                    tdSTT.appendChild(node);
                    tr.appendChild(tdSTT);
                    //RequestID
                    var tdItem = document.createElement("td");
                    tdItem.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    // tdItem.setAttribute("style", "display: none;")
                    var node = document.createTextNode(data[i].RequestID);
                    tdItem.appendChild(node);
                    tr.appendChild(tdItem);
                    sessionStorage.setItem(data[i].ID + '_PR_infor', JSON.stringify(data[i]))
                    //Item
                    var tdUnit = document.createElement("td");
                    tdUnit.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Item);
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //Vietnamese
                    var tdUnit = document.createElement("td");
                    tdUnit.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Vietnamese.substring(0, 50));
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //English
                    var tdUnit = document.createElement("td");
                    tdUnit.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].English.substring(0, 50));
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //Unit
                    var tdQuan = document.createElement("td");
                    tdQuan.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Unit);
                    tdQuan.appendChild(node);
                    tr.appendChild(tdQuan);
                    //Price
                    var tdQuan = document.createElement("td");
                    total = data[i].Price.toLocaleString('en-US', { minimumFractionDigits: 0 });
                    var node = document.createTextNode(total);
                    tdQuan.appendChild(node);
                    tr.appendChild(tdQuan);
                    //Discount
                    var tdQuan = document.createElement("td");
                    var node = document.createTextNode(data[i].Discount);
                    if (data[i].Discount == null) node = document.createTextNode(0);
                    tdQuan.appendChild(node);
                    tr.appendChild(tdQuan);
                    //Currency
                    var tdQuan = document.createElement("td");
                    tdQuan.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Currency);
                    tdQuan.appendChild(node);
                    tr.appendChild(tdQuan);
                    //Quantity
                    var tdQuan = document.createElement("td");
                    // tdQuan.setAttribute("class","mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Quantity);
                    tdQuan.appendChild(node);
                    tr.appendChild(tdQuan);
                    //Allowance
                    var tdQuan = document.createElement("td");
                    // tdQuan.setAttribute("class","mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Allowance);
                    if (data[i].Allowance == null) node = document.createTextNode(0);
                    tdQuan.appendChild(node);
                    tr.appendChild(tdQuan);
                    //Leadtime
                    var tdEs = document.createElement("td");
                    // tdEs.setAttribute("class","mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Leadtime);
                    tdEs.appendChild(node);
                    tr.appendChild(tdEs);
                    //Notice
                    var tdEs = document.createElement("td");
                    tdEs.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Notice);
                    if (data[i].Notice == null) node = document.createTextNode("");
                    tdEs.appendChild(node);
                    tr.appendChild(tdEs)
                    //Expired
                    var tdEs = document.createElement("td");
                    tdEs.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var timeUpdate = (new Date(data[i].ExpiredDate)).toLocaleString("en-US", { timeZone: "Asia/Bangkok" }).split(',')[0];
                    var node = document.createTextNode(timeUpdate);
                    tdEs.appendChild(node);
                    tr.appendChild(tdEs)
                    //btn more
                    var tdMore = document.createElement("td");
                    tdMore.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var div = document.createElement("div");
                    var button = document.createElement("button");
                    button.setAttribute("class", "mdl-button mdl-js-button mdl-button--icon");
                    button.setAttribute("id", "button_more_rq" + i);
                    button.setAttribute("onclick", "remove_item(this)");
                    var icon = document.createElement("i");
                    icon.setAttribute("class", "material-icons");
                    icon.setAttribute("style", "color: red");
                    icon.innerHTML = "delete";
                    componentHandler.upgradeElement(icon);
                    button.appendChild(icon);
                    componentHandler.upgradeElement(button);
                    tdMore.appendChild(button);
                    tr.appendChild(tdMore);
                    componentHandler.upgradeElement(tr);
                    table_body_quotation.appendChild(tr);
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { item: item };
        xsend.send(JSON.stringify(data));
    }
    function remove_item(x) {
        var r = confirm("Bạn có chắc muốn xóa item này?");
        if (r == false) return;
        pr = x.parentNode.parentNode.childNodes[1].innerHTML;
        item = x.parentNode.parentNode.childNodes[2].innerHTML;
        console.log(item, pr);
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Remove_item", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                alert('Item đã được xóa khỏi hệ thống!');
                item_find = document.getElementById('txt_item_find').value;
                load_item_quotation(item_find);
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { item: item, pr: pr };
        xsend.send(JSON.stringify(data));
    }
    document.getElementById('txt_vendor_find').addEventListener('keyup', function () {
        vendor_find = document.getElementById('txt_vendor_find').value;
        load_vendor_find(vendor_find);
    });
    function load_vendor_find(vendor) {
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Get_Vendors", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(xsend.responseText);
                while (table_body_vendor.childNodes.length > 0)
                    table_body_vendor.removeChild(table_body_vendor.childNodes[0]);
                for (var i = 0; i < data.length; i++) {
                    var tr = document.createElement("tr");
                    //stt
                    var tdSTT = document.createElement("td");
                    var node = document.createTextNode(i + 1);
                    tdSTT.appendChild(node);
                    tr.appendChild(tdSTT);
                    //VENDOR NUM
                    var tdItem = document.createElement("td");
                    tdItem.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].ID);
                    tdItem.appendChild(node);
                    tr.appendChild(tdItem);
                    sessionStorage.setItem(data[i].ID + '_vendor', JSON.stringify(data[i]))
                    //VENDOR LOC
                    var tdUnit = document.createElement("td");
                    tdUnit.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Location);
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //VENDOR NAME
                    var tdUnit = document.createElement("td");
                    tdUnit.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Name.substring(0, 50));
                    if (data[i].Name == null) var node = document.createTextNode('')
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //VENDOR EMAIL
                    var tdUnit = document.createElement("td");
                    tdUnit.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Email);
                    if (data[i].Email == null) var node = document.createTextNode('')
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //STATUS
                    var tdQuan = document.createElement("td");
                    tdQuan.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].Status);
                    tdQuan.appendChild(node);
                    tr.appendChild(tdQuan);
                    //TIME UPDATE
                    var tdQuan = document.createElement("td");
                    tdQuan.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var timeUpdate = (new Date(data[i].TimeUpdate)).toLocaleString("en-US", { timeZone: "Asia/Bangkok" }).split(',')[0];
                    var node = document.createTextNode(timeUpdate);
                    tdQuan.appendChild(node);
                    tr.appendChild(tdQuan);
                    componentHandler.upgradeElement(tr);
                    table_body_vendor.appendChild(tr);
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { vendor: vendor };
        xsend.send(JSON.stringify(data));
    }
    var form_vendor = document.getElementById('upload_form_vendor');
    form_vendor.addEventListener('submit', e => {
        e.preventDefault();
        return false;
    })
    document.getElementById('btn_vendor').addEventListener('click', function () {
        document.getElementById('file_vendor').click();
        document.getElementById('file_vendor').onchange = function () {
            if (document.getElementById('file_vendor').value != '') document.getElementById('submit_vendor').click();
        }
        var form_vendor = document.getElementById('upload_form_vendor');
        form_vendor.addEventListener('submit', e => {
            if (document.getElementById('file_vendor').value != '') {
                e.preventDefault();
                var xsend = new XMLHttpRequest();
                xsend.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        //done
                        result = xsend.responseText;
                        if (result.split(';')[0] == 'done') {
                            alert('File Vendor đã được cập nhật!');
                            document.getElementById('file_vendor').value = '';
                        } else {
                            alert('Lỗi: ' + result.split(';')[1]);
                            document.getElementById('file_vendor').value = '';
                        }
                    }
                }
                var fileInput = document.getElementById('file_vendor');
                var file;
                file = fileInput.files[0];
                var formData = new FormData();
                formData.append('file_vendor', file);
                if (file != null) {
                    xsend.open('POST', '/CCS/Upload_Vendor_File', true);
                    xsend.send(formData);
                }
            }
            return false;
        })
    });
    table_body_purchaser = document.getElementById('table_body_purchaser')
    function fnc_pic() {
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Get_Purchasers_Category", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(xsend.responseText);
                while (table_body_purchaser.childNodes.length > 0)
                    table_body_purchaser.removeChild(table_body_purchaser.childNodes[0]);
                for (var i = 0; i < data.length; i++) {
                    var tr = document.createElement("tr");
                    //stt
                    var tdSTT = document.createElement("td");
                    var node = document.createTextNode(i + 1);
                    tdSTT.appendChild(node);
                    tr.appendChild(tdSTT);
                    //VENDOR NUM
                    var tdItem = document.createElement("td");
                    tdItem.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].CATEGORY);
                    tdItem.appendChild(node);
                    tr.appendChild(tdItem);
                    //VENDOR LOC
                    var tdUnit = document.createElement("td");
                    tdUnit.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var node = document.createTextNode(data[i].PIC);
                    tdUnit.appendChild(node);
                    tr.appendChild(tdUnit);
                    //TIME UPDATE
                    var tdQuan = document.createElement("td");
                    tdQuan.setAttribute("class", "mdl-data-table__cell--non-numeric");
                    var timeUpdate = (new Date(data[i].TimeUpdate)).toLocaleString("en-US", { timeZone: "Asia/Bangkok" }).split(',')[0];
                    var node = document.createTextNode(timeUpdate);
                    tdQuan.appendChild(node);
                    tr.appendChild(tdQuan);
                    tr.setAttribute('ondblclick', 'func_purchaser_chage(this)');
                    componentHandler.upgradeElement(tr);
                    table_body_purchaser.appendChild(tr);
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        xsend.send();
    }
    function func_purchaser_chage(x) {
        category = x.childNodes[1].innerHTML;
        document.getElementById('txt_purchaser_category').innerText = category;
        document.getElementById('dialog_change_purchaser_category').showModal();
    }
    document.getElementById('btn_purchaser_close_change').addEventListener('click', function () {
        document.getElementById('dialog_change_purchaser').close();
    });
    document.getElementById('btn_purchaser_done_change').addEventListener('click', function () {
        var r = confirm('Bạn có chắc?');
        if (r == false) return;
        requestID = document.getElementById('txt_request_ID_change').innerHTML;
        purchaser = document.getElementById('cbb_purchaser_ch').value;
        if (purchaser == '') {
            alert('Purchaser không được để trống!');;
            return
        }
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Change_Purchaser", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = xsend.responseText;
                if (data == 'done') {
                    alert('Đã cập nhật thành công!');
                    load_request_PR(month, year);
                    document.getElementById('dialog_change_purchaser').close();
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { requestID: requestID, purchaser: purchaser }
        xsend.send(JSON.stringify(data));
    });
    document.getElementById('btn_status_close_change').addEventListener('click', function () {
        document.getElementById('dialog_change_status').close();
    });
    document.getElementById('btn_status_done_change').addEventListener('click', function () {
        var r = confirm('Bạn có chắc?');
        if (r == false) return;
        requestID = document.getElementById('txt_request_ID_status').innerHTML;

        status = document.getElementById('cbb_status_ch').value;
        if (status == '') {
            alert('Status không được để trống!');;
            return
        }
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Change_Request_Status", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = xsend.responseText;
                if (data == 'done') {
                    alert('Đã cập nhật thành công!');
                    load_request_PR(month, year);
                    document.getElementById('dialog_change_status').close();
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { requestID: requestID, status: status }

        xsend.send(JSON.stringify(data));
    });
    document.getElementById('btn_1000').addEventListener('click', function () {
        pr_id = document.getElementById('txt_pr_id').innerHTML;
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Set_1k_Bidding", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = xsend.responseText;
                if (data == 'done') {
                    alert('Bidding đã được cập nhật!');
                    location.reload();
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { pr_id: pr_id }
        xsend.send(JSON.stringify(data));
    })
    document.getElementById('btn_3000').addEventListener('click', function () {
        pr_id = document.getElementById('txt_pr_id').innerHTML;
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Set_3k_Bidding", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = xsend.responseText;
                if (data == 'done') {
                    alert('Bidding đã được cập nhật!');
                    location.reload();
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { pr_id: pr_id }
        xsend.send(JSON.stringify(data));
    });
    document.getElementById('btn_purchaser_close_change_pr').addEventListener('click', function () {
        document.getElementById('dialog_change_purchaser_pr').close();
    });
    document.getElementById('btn_purchaser_done_change_pr').addEventListener('click', function () {
        var r = confirm('Bạn có chắc?');
        if (r == false) return;
        requestID = document.getElementById('txt_pr_ID_change').innerHTML;
        purchaser = document.getElementById('cbb_purchaser_ch_pr').value;
        if (purchaser == '') {
            alert('Purchaser không được để trống!');;
            return
        }
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Change_Purchaser_PR", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = xsend.responseText;
                if (data == 'done') {
                    alert('Đã cập nhật thành công!');
                    month = document.getElementById('cbb_month').value;
                    year = document.getElementById('cbb_year').value;
                    load_order_PO(month, year);
                    document.getElementById('dialog_change_purchaser_pr').close();
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { prID: requestID, purchaser: purchaser }
        xsend.send(JSON.stringify(data));
    });
    document.getElementById('btn_purchaser_category_done').addEventListener('click', function () {
        var r = confirm('Bạn có chắc?');
        if (r == false) return;
        category = document.getElementById('txt_purchaser_category').innerHTML;
        purchaser = document.getElementById('cbb_purchaser_category').value;
        if (purchaser == '') {
            alert('Purchaser không được để trống!');;
            return
        }
        var xsend = new XMLHttpRequest();
        xsend.open("POST", "/CCS/Change_Purchaser_Category", true);
        xsend.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                data = xsend.responseText;
                if (data == 'done') {
                    alert('Đã cập nhật thành công!');
                    fnc_pic();
                    document.getElementById('dialog_change_purchaser_category').close();
                }
            }
        }
        xsend.setRequestHeader("Content-type", "application/json");
        data = { category: category, purchaser: purchaser }
        xsend.send(JSON.stringify(data));
    });
    document.getElementById('btn_purchaser_category_close').addEventListener('click', function () {
        document.getElementById('dialog_change_purchaser_category').close();
    })
</script>

</html>